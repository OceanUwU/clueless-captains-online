{"version":3,"sources":["theme/index.js","Dialog/index.js","Dialog/show.js","socket/Connect/ing.js","socket/Connect/Failed.js","Home/CodeInput.js","Home/NameInput.js","Lobby/ColorPicker.js","Home/PresetMenu.js","Home/showMatchOptions.js","Rules/sections/Cards.js","Rules/sections/Turn.js","Rules/sections/index.js","Rules/sections/Premise.js","Rules/sections/Roles.js","Rules/sections/Mode2.js","Rules/sections/SpecialCases.js","Rules/sections/Tiles.js","Rules/DialogCentre.js","Rules/RulesDialog.js","Rules/index.js","Home/index.js","Lobby/index.js","Lobby/ComeBackMenu.js","Match/formatText.js","Match/Controller.js","Match/showRoleInfo.js","Match/index.js","Results/index.js","Match/images.js","Match/shuffleString.js","Match/gameplay.js","socket/index.js"],"names":["theme","createMuiTheme","palette","type","background","default","primary","main","overrides","MuiButton","textPrimary","borderRadius","border","color","padding","boxShadow","textSecondary","Dialog","props","state","open","handleOpen","bind","handleClose","this","setState","classes","onClose","disablePortal","aria-labelledby","aria-describedby","disableBackdropClick","required","disableEscapeKeyDown","DialogTitle","id","title","DialogContent","dividers","DialogContentText","className","text","description","children","DialogActions","Button","onClick","closeText","buttonText","buttonAction","React","Component","withStyles","margin","showDialog","a","Promise","res","Object","assign","layer","element","document","getElementById","createElement","appendChild","ReactDOM","render","ThemeProvider","CssBaseline","ref","dialog","setTimeout","Connecting","CircularProgress","ConnectFailed","error","size","window","location","reload","CodeInput","code","changeInput","tryCode","event","target","value","replace","socket","emit","search","length","slice","history","pushState","htmlFor","FormControl","clsx","textField","variant","InputLabel","FilledInput","onChange","autoComplete","inputProps","textInput","maxLength","onKeyDown","e","key","endAdornment","InputAdornment","position","IconButton","aria-label","edge","spacing","marginBottom","joinLabel","display","marginTop","marginRight","width","textTransform","useStyles","makeStyles","input","label","textAlign","NameInput","useState","localStorage","name","setName","changeName","newName","first","Grid","container","justify","alignItems","item","TextField","activeElement","blur","InputLabelProps","ColorPicker","selected","setSelected","taken","setTaken","useEffect","matchInfo","showTaken","console","log","players","map","p","num","on","off","ButtonGroup","orientation","buttonGroups","i","push","buttons","k","style","backgroundColor","playerColours","height","includes","cccolor","String","copyHelp","saveHelp","list","overflowY","actions","flex","PresetMenu","hasOwnProperty","ccpresets","JSON","stringify","defaultPresets","enteredPresetCode","setEnteredPresetCode","ccpreset","parse","items","setItems","copyTitle","setCopyTitle","saveTitle","setSaveTitle","loadPresets","find","List","dragHandleSelector","lockAxis","onDrop","removedIndex","addedIndex","arrayMove","ListItem","button","ListItemText","Tooltip","presets","Math","random","options","defaultMatchOptions","defaultValue","disabled","editable","showMatchOptions","preset","copy","btoa","filter","Divider","flexDirection","helperText","atob","alert","allowedPlayers","formControl","select","smallSelect","tile","card","tilesAvailable","cardsAvailable","optionsToLoad","tiles","cards","Array","isArray","MatchOptions","NumberTweaker","bigChange","fn","min","max","sendUpdate","started","public","publicity","setPublicity","setPlayers","startHP","setStartHP","changeStartHP","change","maxHP","changeMaxHP","setMaxHP","rockDamage","setRockDamage","iceDamage","setIceDamage","leaveDamage","setLeaveDamage","treasureHeal","setTreasureHeal","boardSize","setBoardSize","changeBoardSize","axis","resetTiles","startPos","round","setStartPos","changeStartPos","startDir","setStartDir","revealTiles","setRevealTiles","setTiles","treasuresNeeded","setTreasuresNeeded","changeTreasuresNeeded","treasure","newTiles","values","reduce","b","fromEntries","entries","t","handSize","setHandSize","minPlayed","setMinPlayed","changeMinPlayed","maxPlayed","setMaxPlayed","changeMaxPlayed","topPlayed","setTopPlayed","evilsSeeCards","setEvilsSeeCards","setCards","resetCards","newCards","votingAnonymity","setVotingAnonymity","mode","setMode","names","nameConvention","setNameConvention","updateOptions","addEventListener","removeEventListener","nrCards","FormLabel","Typography","component","Switch","checked","RadioGroup","Number","row","n","FormControlLabel","control","Radio","Select","displayEmpty","MenuItem","FormHelperText","top","fontSize","fill","0","1","2","3","4","5","6","7","8","9","10","Checkbox","labelPlacement","flexWrap","justifyContent","src","class","changeTiles","smallSselect","changeCards","ingame","changeOptions","newOptions","dispatchEvent","Event","hostChanged","amNowHost","Turn","Cards","Premise","videoID","maxWidth","Link","href","rel","frameBorder","allow","allowFullScreen","Roles","Mode2","SpecialCases","Tiles","TabPanel","index","other","role","hidden","Box","root","flexGrow","paper","tabs","minWidth","borderRight","divider","tab","tabPanel","DialogCentre","setValue","Tabs","newValue","Tab","sections","centre","RulesDialog","setOpen","exp","openRules","ShowRulesIcon","BookIcon","showRules","ShowRulesButton","logoImage","controls","Home","gutterBottom","alt","rules","floor","privacyIcon","table","head","tableCell","you","textDecoration","Lobby","tableBody","amHost","startsWith","host","content","TableRow","TableCell","starting","bot","Audio","startTimer","play","protocol","TableContainer","Paper","Table","TableHead","TableBody","ComeBackMenu","choices","choice","typeNames","types","keys","colourOverrides","formatText","playerNames","words","split","word","space","hashtag","toLowerCase","typeFound","colourOverride","publicDir","test","enterTouchDelay","PopperProps","zIndex","borderTop","overflowX","whiteSpace","playingStatusContainer","playingStatus","paddingRight","paddingLeft","playingCards","chat","maxHeight","wordBreak","voteArea","borderBottom","cursor","Controller","chatRef","createRef","bottomRef","setDisplay","cardsSelected","setCardsSelected","setPlayingStatus","playedCard","setPlayedCard","cardsLeft","setCardsLeft","vote","setVote","chooseTitle","setChooseTitle","muted","setMuted","messages","setMessages","messageTyped","setMessageTyped","sendMessage","votes","setVotes","votesA","newPlayingStatus","newCardsLeft","newVote","chatStart","dead","newMuted","message","prevMessages","current","scrollIntoView","lastMessage","scrollHeight","clientHeight","clientTop","scrollTop","cardsSelectedAmount","sendBlocked","opacity","player","pl","s","msg","o","l","m","toUpperCase","borderLeft","disableElevation","RoleInfo","me","pirates","teammate","roles","showRoleInfo","controllerHeight","gameInfo","gameInfoTitle","gameInfoContent","boardContainer","lineHeight","board","objectFit","left","Match","myId","dir","setDir","ship","pos","setPos","newDir","newPos","wins","gamesContainer","marginLeft","gameImage","counterImage","otherPlayer","Results","win","results","cause","rjCode","finalBoard","shuffleString","images","img","Image","HP","canvas","ctx","topCanvas","topCtx","boxSize","borderSize","tilesChanging","movement","direction","textNotifs","animating","renderBottom","globalAlpha","clearRect","fillStyle","x","fillRect","y","beginPath","moveTo","lineTo","complete","drawImage","renderBoard","bypass","now","Date","cttd","doBottom","forEach","start","time","new","before","reverse","splice","from","to","diff","shipImg","textBaseline","font","ntd","notif","progress","sin","PI","fillText","at","requestAnimationFrame","changeTile","newNotif","changeHP","abs","innerHTML","socketIOClient","serverLocation","transports","connectedOnce","displayConnectionFail","disconnected","toString","disconnect","kicker","startingMatchInfo","sentId","getContext","gameplay","damage","healing","originalBoard","toDataURL"],"mappings":"uvWAsCeA,EApCDC,YAAe,CACzBC,QAAS,CACLC,KAAM,QAENC,WAAY,CACRC,QAAS,WAGbC,QAAS,CACLC,KAAM,YAIdC,UAAW,CACPC,UAAW,CACPC,YAAa,CACTN,WAAY,mDACZO,aAAc,EACdC,OAAQ,EACRC,MAAO,mBACPC,QAAS,SACTC,UAAW,2BAGfC,cAAe,CACXZ,WAAY,mDACZO,aAAc,EACdC,OAAQ,EACRC,MAAO,mBACPC,QAAS,SACTC,UAAW,+B,0NCjBrBE,E,kDACF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,MAAM,GAEV,EAAKC,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKC,YAAc,EAAKA,YAAYD,KAAjB,gBANJ,E,8CASnB,WACIE,KAAKC,SAAS,CAACL,MAAM,M,yBAGzB,WACII,KAAKC,SAAS,CAACL,MAAM,M,oBAGzB,WAAU,IACEM,EAAYF,KAAKN,MAAjBQ,QAER,OACI,8BACI,eAAC,IAAD,CACIN,KAAMI,KAAKL,MAAMC,KACjBO,QAASH,KAAKD,YACdK,eAAa,EACbC,kBAAgB,qBAChBC,mBAAiB,2BACjBC,qBAAsBP,KAAKN,MAAMc,SACjCC,qBAAsBT,KAAKN,MAAMc,SAPrC,UASI,cAACE,EAAA,EAAD,CAAaC,GAAG,qBAAhB,SAAsCX,KAAKN,MAAMkB,QACjD,eAACC,EAAA,EAAD,CAAeC,UAAQ,EAAvB,UACI,cAACC,EAAA,EAAD,CAAmBC,UAAWd,EAAQe,KAAMN,GAAG,2BAA/C,SACKX,KAAKN,MAAMwB,cAEflB,KAAKN,MAAMyB,YAEhB,eAACC,EAAA,EAAD,WACKpB,KAAKN,MAAMc,SAAW,KACnB,cAACa,EAAA,EAAD,CAAQC,QAAStB,KAAKD,YAAaV,MAAM,YAAzC,SACKW,KAAKN,MAAM6B,UAAYvB,KAAKN,MAAM6B,UAAY,UAGtDvB,KAAKN,MAAM8B,WACR,cAACH,EAAA,EAAD,CAAQC,QAAStB,KAAKN,MAAM+B,aAAcpC,MAAM,UAAhD,SACKW,KAAKN,MAAM8B,aAEhB,iB,GAjDPE,IAAMC,WAyDZC,eA/DG,SAAApD,GAAK,MAAK,CACxByC,KAAM,CACFY,OAAQ,MA6DDD,CAAsBnC,G,SCjEtBqC,I,2EAAf,0CAAAC,EAAA,6DAA0BrC,EAA1B,+BAAkC,GAAIyB,EAAtC,+BAAiD,KAAjD,kBACW,IAAIa,QAAJ,uCAAY,WAAMC,GAAN,mBAAAF,EAAA,sDACfrC,EAAQwC,OAAOC,OAAO,CAClBvB,MAAO,eACPJ,UAAU,GACXd,GAGCiB,EAPW,gBAOGjB,EAAM0C,MAAQ1C,EAAM0C,MAAQ,GAE/B,OADXC,EAAUC,SAASC,eAAe5B,OAElC0B,EAAUC,SAASE,cAAc,QACzB7B,GAAKA,EACb2B,SAASC,eAAe,UAAUE,YAAYJ,IAElDK,IAASC,OACL,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UACI,cAACqE,EAAA,EAAD,IACA,cAAC,EAAD,2BAAYnD,GAAZ,IAAmBoD,IAAK,SAAAT,GAAO,OAAIU,EAASV,GAA5C,SACKlB,QAGVkB,GAEEU,GAGDA,EAAOlD,aACPoC,EAAIc,IAHJC,WAAU,sBAAC,sBAAAjB,EAAA,kEAAYE,EAAZ,SAAsBH,EAAWpC,EAAOyB,GAAxC,uGAAoD,KAxBpD,2CAAZ,wDADX,4C,sBAiCeW,Q,kBC3BAmB,MATf,WACI,OACI,sBAAKjC,UAAU,UAAf,UACI,cAACkC,EAAA,EAAD,IACA,8F,iBCSGC,MAZf,SAAuBzD,GACnB,OACI,sBAAKsB,UAAU,UAAf,UACI,cAAC,IAAD,IACA,oFACCtB,EAAM0D,MAAQ,yCAAY1D,EAAM0D,MAAlB,OAAgC,KAC/C,sGACA,cAAC/B,EAAA,EAAD,CAAQgC,KAAK,QAAQhE,MAAM,UAAUiC,QAAS,kBAAMgC,OAAOC,SAASC,QAAO,IAA3E,uB,yGCiBNC,E,kDACF,WAAY/D,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACT+D,KAAM,IAEV,EAAKC,YAAc,EAAKA,YAAY7D,KAAjB,gBACnB,EAAK8D,QAAU,EAAKA,QAAQ9D,KAAb,gBANA,E,+CASnB,SAAY+D,GACR,IAAIH,EAAOG,EAAMC,OAAOC,MACxBL,EAAOA,EAAKM,QAAQ,IAAK,IACzBhE,KAAKC,SAAS,CAACyD,W,qBAGnB,WACIO,GAAOC,KAAK,YAAalE,KAAKL,MAAM+D,Q,+BAGxC,WAAqB,IAAD,OAGHJ,OAAOC,SAASY,OAAOC,OAAS,IACzCpE,KAAKC,SAAS,CAACyD,KAAMJ,OAAOC,SAASY,OAAOE,MAAM,KAAK,kBAAM,EAAKT,aAClEN,OAAOgB,QAAQC,UAAU,GAAI,GAAI,Q,oBAIzC,WAAU,IAAD,OACGrE,EAAYF,KAAKN,MAAjBQ,QAER,OACI,gCACI,uBAAgDsE,QAAQ,gBAAxD,+BACA,uBAEA,eAACC,EAAA,EAAD,CAAazD,UAAW0D,YAAKxE,EAAQ2B,OAAQ3B,EAAQyE,WAAYC,QAAQ,SAAzE,UACI,cAACC,EAAA,EAAD,CAAYL,QAAQ,gBAApB,uBACA,cAACM,EAAA,EAAD,CACInE,GAAG,gBACHhC,KAAK,OACLoF,MAAO/D,KAAKL,MAAM+D,KAClBqB,SAAU/E,KAAK2D,YACfqB,aAAa,MACbC,WAAY,CACRjE,UAAWd,EAAQgF,UACnBC,UAAW,EACXC,UAAW,SAAAC,GAAmB,SAATA,EAAEC,KAAgB,EAAK1B,YAEhD2B,aACI,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACI,cAACC,EAAA,EAAD,CACIC,aAAW,OACXrE,QAAStB,KAAK4D,QACdgC,KAAK,MAHT,SAKI,cAAC,IAAD,oB,GAzDZlE,IAAMC,WAoEfC,gBAtFG,SAAApD,GAAK,MAAK,CACxBqD,OAAQ,CACJA,OAAQrD,EAAMqH,QAAQ,GACtBC,aAAc,GAElBC,UAAW,CACPC,QAAS,eACTC,UAAW,GACXC,YAAa,GAEjBvB,UAAW,CACPwB,MAAO,QAEXjB,UAAW,CACPkB,cAAe,gBAwERxE,CAAsB6B,G,iDCtF/B4C,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrCqD,OAAQ,CACJA,OAAQrD,EAAMqH,QAAQ,IAE1BU,MAAO,CACHJ,MAAO,KAEXK,MAAO,CACHC,UAAW,cA6CJC,OAzCf,WACI,IAAMxG,EAAUmG,KADC,EAEO3E,IAAMiF,SAASC,aAAaC,KAAOD,aAAaC,KAAO,IAF9D,oBAEVA,EAFU,KAEJC,EAFI,KAGXC,EAAa,SAACC,GAA4B,IAAnBC,EAAkB,wDACtCA,GACDH,EAAQE,GACZJ,aAAaC,KAAOG,EACpB/C,GAAOC,KAAK,aAAc8C,IAM9B,OAJAD,EAAWF,GAAM,GAKb,qBAAK7F,UAAWd,EAAQ2B,OAAxB,SACI,eAACqF,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASvB,QAAS,EAAGwB,WAAW,WAAxD,UACI,cAACH,GAAA,EAAD,CAAMI,MAAI,EAAV,SACI,cAAC,KAAD,MAEJ,cAACJ,GAAA,EAAD,CAAMI,MAAI,EAAV,SACI,cAACC,GAAA,EAAD,CACI5G,GAAG,YACH6F,MAAM,YACNzC,MAAO8C,EACP9B,SAbC,SAAAlB,GAAK,OAAIkD,EAAWlD,EAAMC,OAAOC,QAclCiB,aAAa,MACbC,WAAY,CACRjE,UAAWd,EAAQqG,MACnBpB,UAAW,EACXC,UAAW,SAAAC,GAAmB,SAATA,EAAEC,KAAgBhD,SAASkF,cAAcC,SAElEC,gBAAiB,CACb1G,UAAWd,EAAQsG,iB,mBCEhCmB,OAjDf,SAAqBjI,GAAQ,IAAD,EACQgC,IAAMiF,SAASjH,EAAMkI,UAD7B,oBACjBA,EADiB,KACPC,EADO,OAEEnG,IAAMiF,SAAS,IAFjB,oBAEjBmB,EAFiB,KAEVC,EAFU,KAoBxB,OAhBArG,IAAMsG,WAAU,WACZ/D,GAAOC,KAAK,cAAe0D,MAGR,MAAnBlI,EAAMuI,WACNvG,IAAMsG,WAAU,WACZ,IAAIE,EAAY,SAAAD,GACZE,QAAQC,IAAI,MACZL,EAASE,EAAUI,QAAQC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,SAI1C,OAFAvE,GAAOwE,GAAG,cAAeP,GACzBA,EAAUxI,EAAMuI,WACT,kBAAMhE,GAAOyE,IAAI,cAAeR,MACxC,IAIH,cAACS,GAAA,EAAD,CAAaC,YAAY,WAAzB,SACM,WAEE,IADA,IAAIC,EAAe,GADf,WAEKC,GACLD,EAAaE,KAAK,cAACJ,GAAA,EAAD,UAAe,WAE7B,IADA,IAAIK,EAAU,GADqB,WAE1BC,GACLD,EAAQD,KACJ,cAAC1H,EAAA,EAAD,CACI6H,MAAO,CAAC7J,MAAO,QAAS8J,gBAAiBC,GAAcH,GAAII,OAAO,QAASlD,MAAO,GAClF7E,QAAS,WACAwG,EAAMwB,SAASL,KAChBrC,aAAa2C,QAAUC,OAAOP,GAC9BpB,EAAYoB,KALxB,SAQErB,GAAYqB,EAAI,SAAOnB,EAAMwB,SAASL,GAAK,SAAM,QAVlDA,EAAIH,EAAGG,EAAIH,EAAE,EAAGG,IAAM,EAAtBA,GAaT,OAAOD,EAfsB,OAD5BF,EAAI,EAAGA,EAAI,GAAIA,GAAG,EAAI,EAAtBA,GAmBT,OAAOD,EArBT,M,kQClBRY,GAAW,+DACXC,GAAW,wDACXrD,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrCmL,KAAM,CACFN,OAAQ,IACRlD,MAAO,OACPyD,UAAW,SACXxK,OAAQ,sBACRD,aAAc,GAElB0K,QAAS,CACL1D,MAAO,OACPH,QAAS,OACT,QAAS,CACL8D,KAAM,QAgJHC,OA3If,SAAoBrK,GAChB,IAAMQ,EAAUmG,KAEXO,aAAaoD,eAAe,eAC7BpD,aAAaqD,UAAYC,KAAKC,UAAUC,KAJrB,MAM2B1I,IAAMiF,SAAS,IAN1C,oBAMhB0D,EANgB,KAMGC,EANH,OAOS5I,IAAMiF,SAAkC,QAAzBC,aAAa2D,SAAqB,KAAO3D,aAAa2D,UAP9E,oBAOhB3C,EAPgB,KAONC,EAPM,OAQGnG,IAAMiF,SAASuD,KAAKM,MAAM5D,aAAaqD,YAR1C,oBAQhBQ,EARgB,KAQTC,EARS,OASWhJ,IAAMiF,SAAS8C,IAT1B,oBAShBkB,EATgB,KASLC,EATK,OAUWlJ,IAAMiF,SAAS+C,IAV1B,oBAUhBmB,EAVgB,KAULC,EAVK,KAiBnBC,EAAc,kBAAML,EAASR,KAAKM,MAAM5D,aAAaqD,aASzD,OAPAvI,IAAMsG,WAAU,WACPyC,EAAMO,MAAK,SAAA1D,GAAI,OAAIA,EAAK3G,IAAMiH,OAC/BC,EAAY,MACZjB,aAAa2D,SAAW,QAE7B,IAGC,gCACI,cAACU,GAAA,EAAD,CAAMjK,UAAWd,EAAQyJ,KAAzB,SACI,cAAC,aAAD,CAAWuB,mBAAmB,eAAeC,SAAS,IAAIC,OAjBvD,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,aAAcC,EAAiB,EAAjBA,WAC5B1E,aAAaqD,UAAYC,KAAKC,UAAUoB,KAAUd,EAAOY,EAAcC,IACvEP,KAeQ,SACKN,EAAMnC,KAAI,gBAAG3H,EAAH,EAAGA,GAAIkG,EAAP,EAAOA,KAAP,OACP,cAAC,aAAD,UACI,cAAC2E,GAAA,EAAD,CAAUC,QAAM,EAACzK,UAAU,cAAcM,QAAS,kBAAMuG,EAAYD,GAAYjH,EAAK,KAAOA,IAAKiH,SAAUA,GAAYjH,EAAvH,SACI,cAAC+K,GAAA,EAAD,CAAc5M,QAAS+H,OAFflG,UAQ5B,eAACgI,GAAA,EAAD,CAAa/D,QAAQ,YAAYvF,MAAM,UAAU2B,UAAWd,EAAQ2J,QAApE,UACI,cAAC8B,GAAA,EAAD,CAAS/K,MAAM,4BAAf,SACI,cAACS,EAAA,EAAD,CAAQC,QAAO,sBAAE,4BAAAS,EAAA,sEACMD,EAAW,CAC1BlB,MAAO,uBACPM,YAAa,wCACbM,WAAY,SACZY,MAAO,EACPX,aAAc,WACV,IAAImK,EAAU1B,KAAKM,MAAM5D,aAAaqD,WACtC2B,EAAQ7C,KAAK,CACTpI,GAAI6I,OAAOqC,KAAKC,UAAUzH,MAAM,GAChCwC,KAAMvE,SAASC,eAAe,cAAcwB,MAC5CgI,QAASC,KAEbpF,aAAaqD,UAAYC,KAAKC,UAAUyB,GACxCb,IACAhI,EAAOhD,gBAEZ,cAACwH,GAAA,EAAD,CACCf,MAAM,cACN7F,GAAG,aACHsL,aAAa,GACbrH,QAAQ,cArBC,OACT7B,EADS,kDAAjB,mBAyBJ,cAAC4I,GAAA,EAAD,CAAS/K,MAAM,6CAAf,SACI,cAACS,EAAA,EAAD,CAAQ6K,UAAWxM,EAAMyM,UAAwB,MAAZvE,EAAkBtG,QAAS,WAC5D5B,EAAM0M,iBAAN,2BAA2B1M,GAA3B,IAAkCqM,QAAStB,EAAMO,MAAK,SAAA1D,GAAI,OAAIA,EAAK3G,IAAMiH,KAAUmE,WACnFnF,aAAa2D,SAAW3C,GAF5B,oBAKJ,cAAC+D,GAAA,EAAD,CAAS/K,MAAOiK,EAAhB,SACI,cAACxJ,EAAA,EAAD,CAAQ6K,SAAsB,MAAZtE,EAAkBtG,QAAS,WACzC,IAAIsK,EAAU1B,KAAKM,MAAM5D,aAAaqD,WACtC2B,EAAQZ,MAAK,SAAAqB,GAAM,OAAIA,EAAO1L,IAAMiH,KAAUmE,QAAUrM,EAAMqM,QAC9DnF,aAAaqD,UAAYC,KAAKC,UAAUyB,GACxCb,IACAD,EAAa,iBACb9H,YAAW,WACP8H,EAAapB,MACd,MARP,oBAWJ,cAACiC,GAAA,EAAD,CAAS/K,MAAO+J,EAAhB,SACI,cAACtJ,EAAA,EAAD,CAAQ6K,SAAsB,MAAZtE,EAAkBtG,QAAS,WACzCgL,KAAKC,KAAKrC,KAAKC,UAAUM,EAAMO,MAAK,SAAA1D,GAAI,OAAIA,EAAK3G,IAAMiH,KAAUmE,WACjEnB,EAAa,oCACb5H,YAAW,WACP4H,EAAanB,MACd,MALP,sBAQJ,cAACkC,GAAA,EAAD,CAAS/K,MAAM,6BAAf,SACI,cAACS,EAAA,EAAD,CAAQ6K,SAAsB,MAAZtE,EAAkBtG,QAAO,sBAAE,4BAAAS,EAAA,sEACtBD,EAAW,CAC1BlB,MAAO,wBACPM,YAAa,+CACbM,WAAY,SACZD,UAAW,SACXa,MAAO,EACPX,aAAc,WACVmF,aAAaqD,UAAYC,KAAKC,UAAUD,KAAKM,MAAM5D,aAAaqD,WAAWuC,QAAO,SAAAH,GAAM,OAAIA,EAAO1L,IAAMiH,MACzGmD,IACInE,aAAa2D,UAAY3C,IACzBhB,aAAa2D,SAAW,MAC5B1C,EAAY,MACZ9E,EAAOhD,iBAb0B,OACrCgD,EADqC,kDAA7C,yBAoBR,cAAC0J,EAAA,EAAD,CAASvD,MAAO,CAACjD,UAAW,GAAIH,aAAc,MAG9C,sBAAKoD,MAAO,CAAClD,QAAS,OAAQ0G,cAAe,OAA7C,UACI,cAACnF,GAAA,EAAD,CACIf,MAAM,qBACNyF,aAAa,GACblI,MAAOsG,EACPtF,SAAU,SAAAM,GAAC,OAAIiF,EAAqBjF,EAAEvB,OAAOC,QAC7C4I,WAAW,wDACX/H,QAAQ,WACRsH,UAAWxM,EAAMyM,WAErB,cAAC9K,EAAA,EAAD,CAAQhC,MAAOK,EAAMyM,SAAW,UAAY,UAAWD,UAAWxM,EAAMyM,SAAU7K,QAAS,WACvF,IACI5B,EAAM0M,iBAAN,2BAA2B1M,GAA3B,IAAkCqM,QAAQ,2BAAKrM,EAAMqM,SAAY7B,KAAKM,MAAMoC,KAAKvC,QACnF,MAAMhF,GACJwH,MAAMxH,KAJd,yBCnJVyH,GAAiB,CAAC,EAAG,GAGrBzG,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrCuO,YAAa,CACTlL,OAAQrD,EAAMqH,QAAQ,IAE1BmH,OAAQ,CACJ7G,MAAO,KAEX8G,YAAa,CACT9G,MAAO,IAEX+G,KAAM,CACF/G,MAAO,GACPhH,aAAc,GAElBgO,KAAM,CACFhH,MAAO,GACPhH,aAAc,OAIhBiO,GAAiB,CACnB,CAAC,YAAY,GACb,CAAC,QAAQ,GACT,CAAC,WAAW,GACZ,CAAC,SAAS,GACV,CAAC,SAAS,GACV,CAAC,WAAW,GACZ,CAAC,iBAAiB,GAClB,CAAC,kBAAkB,IAEjBC,GAAiB,CACnB,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,MAAM,GACP,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,OAAO,GACR,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,UAAU,GACX,CAAC,eAAe,GAChB,CAAC,WAAW,GACZ,CAAC,YAAY,GACb,CAAC,SAAS,GACV,CAAC,WAAW,GACZ,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,YAAY,GACb,CAAC,UAAU,GACX,CAAC,QAAQ,GACT,CAAC,cAAc,GACf,CAAC,WAAW,GACZ,CAAC,aAAa,GACd,CAAC,cAAc,GACf,CAAC,SAAS,GACV,CAAC,QAAQ,GACT,CAAC,QAAQ,GACT,CAAC,WAAW,GACZ,CAAC,eAAe,GAChB,CAAC,UAAU,IAGXC,IAAgB,EACpB,GAAI1G,aAAaqD,WAAarD,aAAa2D,SAAU,CACjD,IAAI8B,GAASnC,KAAKM,MAAM5D,aAAaqD,WAAWe,MAAK,SAAAqB,GAAM,OAAIA,EAAO1L,IAAMiG,aAAa2D,YACrF8B,KACAiB,GAAgBjB,GAAON,SAE/B5D,QAAQC,IAAIkF,IAEZ,IAAIvB,GAAO,uCACJC,IACAsB,IAAgC,IAF5B,IAGPC,MAAM,2BAAKvB,GAAoBuB,OAAUD,GAAgBA,GAAcC,MAAQ,IAC/EC,MAAM,2BAAKxB,GAAoBwB,OAAUF,GAAgBA,GAAcE,MAAQ,MAGnF,IAAK,IAAI1E,MAAKiD,GACe,iBAAdA,GAAQjD,KAAmB2E,MAAMC,QAAQ3B,GAAQjD,OACxDiD,GAAQjD,IAAR,2BACOlC,aAAa+G,aAAezD,KAAKM,MAAM5D,aAAa+G,cAAc7E,IAAK,IACvEiD,GAAQjD,MAIvB,SAAS8E,GAAclO,GACnB,OACI,eAACiJ,GAAA,EAAD,CAAatF,KAAK,QAAlB,UACK3D,EAAMmO,UAAY,cAACxM,EAAA,EAAD,CAAQC,QAAS,kBAAM5B,EAAMoO,IAAI,KAAK5B,SAAUxM,EAAMwM,UAAYxM,EAAMC,OAASD,EAAMqO,IAAvF,iBAA2G,KAC9H,cAAC1M,EAAA,EAAD,CAAQC,QAAS,kBAAM5B,EAAMoO,IAAI,IAAI5B,SAAUxM,EAAMwM,UAAYxM,EAAMC,OAASD,EAAMqO,IAAtF,eACA,cAAC1M,EAAA,EAAD,CAAQ6K,UAAQ,EAAhB,SAAkBxM,EAAMC,QACxB,cAAC0B,EAAA,EAAD,CAAQC,QAAS,kBAAM5B,EAAMoO,GAAG,IAAK5B,SAAUxM,EAAMwM,UAAYxM,EAAMC,OAASD,EAAMsO,IAAtF,eACCtO,EAAMmO,UAAY,cAACxM,EAAA,EAAD,CAAQC,QAAS,kBAAM5B,EAAMoO,GAAG,KAAM5B,SAAUxM,EAAMwM,UAAYxM,EAAMC,OAASD,EAAMsO,IAAvF,gBAA0G,QAKzI,SAASL,GAAajO,GAClB,IAAMQ,EAAUmG,KAEZ3G,EAAMqM,UACNA,GAAUrM,EAAMqM,SAEpB,IAAMkC,EAAa,WACXvO,EAAMyM,UAAYzM,EAAMwO,SACxBjK,GAAOC,KAAK,gBAAiB6H,KARZ,EAUSrK,IAAMiF,SAASoF,GAAQoC,QAVhC,oBAUlBC,EAVkB,KAUPC,EAVO,OAgBK3M,IAAMiF,SAASoF,GAAQ1D,SAhB5B,oBAgBlBA,EAhBkB,KAgBTiG,EAhBS,OAyBK5M,IAAMiF,SAASoF,GAAQwC,SAzB5B,oBAyBlBA,EAzBkB,KAyBTC,EAzBS,KA0BnBC,EAAgB,SAAAC,GAClB3C,GAAQwC,SAAWG,EACf3C,GAAQwC,QAAU,IAAGxC,GAAQwC,QAAU,GACvCxC,GAAQwC,QAAU,MAAKxC,GAAQwC,QAAU,KACzCxC,GAAQwC,QAAUxC,GAAQ4C,OAAOC,EAAY7C,GAAQwC,QAAUxC,GAAQ4C,OAC3EH,EAAWzC,GAAQwC,SACnBN,KAhCqB,EAkCCvM,IAAMiF,SAASoF,GAAQ4C,OAlCxB,oBAkClBA,EAlCkB,KAkCXE,EAlCW,KAmCnBD,EAAc,SAAAF,GAChB3C,GAAQ4C,OAASD,EACb3C,GAAQ4C,MAAQ,IAAG5C,GAAQ4C,MAAQ,GACnC5C,GAAQ4C,MAAQ,MAAK5C,GAAQ4C,MAAQ,KACrC5C,GAAQwC,QAAUxC,GAAQ4C,OAAOF,EAAc1C,GAAQ4C,MAAQ5C,GAAQwC,SAC3EM,EAAS9C,GAAQ4C,OACjBV,KAzCqB,EA2CWvM,IAAMiF,SAASoF,GAAQ+C,YA3ClC,oBA2ClBA,EA3CkB,KA2CNC,EA3CM,OAkDSrN,IAAMiF,SAASoF,GAAQiD,WAlDhC,oBAkDlBA,EAlDkB,KAkDPC,EAlDO,OAyDavN,IAAMiF,SAASoF,GAAQmD,aAzDpC,oBAyDlBA,EAzDkB,KAyDLC,EAzDK,OAgEezN,IAAMiF,SAASoF,GAAQqD,cAhEtC,oBAgElBA,EAhEkB,KAgEJC,EAhEI,OAuES3N,IAAMiF,SAAN,aAAmBoF,GAAQuD,YAvEpC,oBAuElBA,EAvEkB,KAuEPC,EAvEO,KAwEnBC,EAAkB,SAACzL,EAAO0L,GAI5B,IAAK,IAAI3G,KAHTiD,GAAQuD,UAAUG,GAAQ1L,EAC1BwL,EAAa,aAAIxD,GAAQuD,YACzBI,KACc3D,GAAQ4D,SACS,MAAvB5D,GAAQ4D,SAAS7G,KACjBiD,GAAQ4D,SAAS7G,GAAK+C,KAAK+D,OAAO7D,GAAQuD,UAAUxG,GAAG,GAAG,IAClE+G,GAAY,aAAI9D,GAAQ4D,WACxB1B,KAhFqB,EAkFOvM,IAAMiF,SAAN,aAAmBoF,GAAQ4D,WAlFlC,oBAkFlBA,GAlFkB,KAkFRE,GAlFQ,KAmFnBC,GAAiB,SAAC/L,EAAO0L,GAC3B1D,GAAQ4D,SAASF,GAAQ1L,EACzB8L,GAAY,aAAI9D,GAAQ4D,WACxB1B,KAtFqB,GAwFOvM,IAAMiF,SAASoF,GAAQgE,UAxF9B,sBAwFlBA,GAxFkB,MAwFRC,GAxFQ,SA8FatO,IAAMiF,SAASoF,GAAQkE,aA9FpC,sBA8FlBA,GA9FkB,MA8FLC,GA9FK,SAoGCxO,IAAMiF,SAASoF,GAAQwB,OApGxB,sBAoGlBA,GApGkB,MAoGX4C,GApGW,SA2GqBzO,IAAMiF,SAASoF,GAAQqE,iBA3G5C,sBA2GlBA,GA3GkB,MA2GDC,GA3GC,MA4GnBC,GAAwB,SAAxBA,EAAwB5B,GAC1B3C,GAAQqE,iBAAmB1B,EACvB3C,GAAQqE,gBAAkB,IAAGrE,GAAQqE,gBAAkB,GACvDrE,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,WAAUxE,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,UAC1FxE,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,UAAUD,EAAsBvE,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,UACpHF,GAAmBtE,GAAQqE,iBAC3BnC,KAEEyB,GAAa,WACf,IAAIc,EAAQ,2BAAOjD,IAAW,SAAAxB,GAAQuD,UAAU,GAAIvD,GAAQuD,UAAU,IAAKpN,OAAOuO,OAAOzE,GAAoBuB,OAAOmD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,KAAK3E,GAAoBuB,MAAQrL,OAAO0O,YAAY1O,OAAO2O,QAAQ7E,GAAoBuB,OAAOjF,KAAI,SAAAjD,GAAC,MAAI,CAACA,EAAE,GAAI+H,GAAepC,MAAK,SAAA8F,GAAC,OAAIA,EAAE,IAAMzL,EAAE,MAAI,GAAK,EAAI,QAClS8K,GAASK,GACTzE,GAAQwB,MAAR,eAAoBiD,IAvHC,GAyHO9O,IAAMiF,SAASoF,GAAQgF,UAzH9B,sBAyHlBA,GAzHkB,MAyHRC,GAzHQ,SAqIStP,IAAMiF,SAASoF,GAAQkF,WArIhC,sBAqIlBA,GArIkB,MAqIPC,GArIO,MAsInBC,GAAkB,SAAAtN,GACpBkI,GAAQkF,UAAYpN,EAAMC,OAAOC,MACjCmN,GAAarN,EAAMC,OAAOC,OAC1BkK,KAzIqB,GA2ISvM,IAAMiF,SAASoF,GAAQqF,WA3IhC,sBA2IlBA,GA3IkB,MA2IPC,GA3IO,MA4InBC,GAAkB,SAAAzN,GACpBkI,GAAQqF,UAAYvN,EAAMC,OAAOC,MACjCsN,GAAaxN,EAAMC,OAAOC,OACtBgI,GAAQkF,UAAYlF,GAAQqF,WAC5BD,GAAgB,CAACrN,OAAQ,CAACC,MAAOF,EAAMC,OAAOC,SAClDkK,KAjJqB,GAmJSvM,IAAMiF,SAASoF,GAAQwF,WAnJhC,sBAmJlBA,GAnJkB,MAmJPC,GAnJO,SA2JiB9P,IAAMiF,SAASoF,GAAQ0F,eA3JxC,sBA2JlBA,GA3JkB,MA2JHC,GA3JG,SAiKChQ,IAAMiF,SAASoF,GAAQyB,OAjKxB,sBAiKlBA,GAjKkB,MAiKXmE,GAjKW,MAuKnBC,GAAa,WACf,GAAIvE,GAAeb,QAAO,SAAAW,GAAI,OAAIA,EAAK,MAAI7E,KAAI,SAAA6E,GAAI,OAAIpB,GAAQyB,MAAML,EAAK,OAAKuD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,MAAM5E,GAAQ1D,QAAQ0D,GAAQgF,SAAShF,GAAQwF,UAAW,CACrJ,IAAIM,EAAQ,2BAAOrE,IAAUxB,GAAoBwB,OACjDmE,GAASE,GACT9F,GAAQyB,MAAR,eAAoBqE,KA3KH,GA8KqBnQ,IAAMiF,SAASoF,GAAQ+F,iBA9K5C,sBA8KlBA,GA9KkB,MA8KDC,GA9KC,SAoLDrQ,IAAMiF,SAASoF,GAAQiG,MApLtB,sBAoLlBA,GApLkB,MAoLZC,GApLY,SA0LmBvQ,IAAMiF,SAASoF,GAAQmG,OA1L1C,sBA0LlBC,GA1LkB,MA0LFC,GA1LE,MAiMrBC,GAAgB,WAChBhE,EAAatC,GAAQoC,QACrBG,EAAWvC,GAAQ1D,SACnBmG,EAAWzC,GAAQwC,SACnBM,EAAS9C,GAAQ4C,OACjBI,EAAchD,GAAQ+C,YACtBG,EAAalD,GAAQiD,WACrBG,EAAepD,GAAQmD,aACvBG,EAAgBtD,GAAQqD,cACxBG,EAAaxD,GAAQuD,WACrBO,GAAY9D,GAAQ4D,UACpBK,GAAYjE,GAAQgE,UACpBG,GAAenE,GAAQkE,aACvBE,GAAS,2BAAI5C,IAAUxB,GAAQwB,QAC/B8C,GAAmBtE,GAAQqE,iBAC3BoB,GAAazF,GAAQwF,WACrBP,GAAYjF,GAAQgF,UACpBG,GAAanF,GAAQkF,WACrBI,GAAatF,GAAQqF,WACrBO,GAAS,2BAAInE,IAAUzB,GAAQyB,QAC/BuE,GAAmBhG,GAAQ+F,iBAC3BG,GAAQlG,GAAQiG,MAChBI,GAAkBrG,GAAQmG,QAE9BxQ,IAAMsG,WAAU,WAGZ,OAFAiG,IACA3K,OAAOgP,iBAAiB,sBAAuBD,IACxC,kBAAM/O,OAAOiP,oBAAoB,sBAAuBF,OAChE,IAEH,IAAIG,GAAUnF,GAAeb,QAAO,SAAAW,GAAI,OAAIA,EAAK,MAAI7E,KAAI,SAAA6E,GAAI,OAAIK,GAAML,EAAK,OAAKuD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,KAEjG,OACI,gCACI,cAACtP,EAAA,EAAD,CAAQhC,MAAM,YAAYiC,QAAO,sBAAE,sBAAAS,EAAA,sEAChBD,EAAW,CACtBlB,MAAO,iBACPY,WAAY,OACZC,aAAc,kBAAM2K,GAAiB1M,KACtC,cAAC,GAAD,2BAAgBA,GAAhB,IAAuB0M,iBAAkBA,GAAkBL,QAASA,OALxC,OAC/BhJ,GAD+B,kDAAnC,qBAkBA,cAAC0J,EAAA,EAAD,CAASvD,MAAO,CAACjD,UAAW,MAE5B,eAACxB,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,sBACA,cAACC,EAAA,EAAD,CAAYC,UAAU,MAAtB,SACI,eAACzL,GAAA,EAAD,CAAMyL,UAAU,QAAQxL,WAAS,EAACE,WAAW,SAASxB,QAAS,EAA/D,UACI,cAACqB,GAAA,EAAD,CAAMI,MAAI,EAAV,SAAW,cAAC,KAAD,MACX,cAACJ,GAAA,EAAD,CAAMI,MAAI,EAAV,SACI,cAACsL,GAAA,EAAD,CAAQvT,MAAM,UAAUwT,QAASzE,EAAWrJ,SAlPtC,SAAAlB,GAC1BkI,GAAQoC,QAAUC,EAClBC,GAAcD,GACdH,KA+OiG/B,UAAWxM,EAAMyM,aAElG,cAACjF,GAAA,EAAD,CAAMI,MAAI,EAAV,SAAW,cAAC,KAAD,WAIlB5H,EAAMwO,QAAU,cAAC7M,EAAA,EAAD,CAAQhC,MAAOK,EAAMyM,SAAW,UAAY,WAAY9I,KAAK,QAAQ/B,QAAS,kBAAM2C,GAAOC,KAAK,gBAAgBgI,UAAWxM,EAAMyM,SAAjI,2BAAoK,QAGzL,cAACM,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,CAAWvJ,MAAO,CAACpD,aAAc,GAAjC,yBACA,cAAC8H,GAAD,CAAeE,GAzPL,SAAAY,GAClB3C,GAAQ1D,SAAWqG,EACf3C,GAAQ1D,QAAUyE,GAAe,KAAIf,GAAQ1D,QAAUyE,GAAe,IACtEf,GAAQ1D,QAAUyE,GAAe,KAAIf,GAAQ1D,QAAUyE,GAAe,IAC1EwB,EAAWvC,GAAQ1D,SACnBuJ,KACA3D,KAmP0CF,IAAKjB,GAAe,GAAIkB,IAAKlB,GAAe,GAAInN,MAAO0I,EAAS6D,SAAUxM,EAAMwO,QAASL,WAAS,OAExI,cAAC6E,EAAA,EAAD,mHAEA,cAACjG,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,CAAWvJ,MAAO,CAACpD,aAAc,GAAjC,8BACA,cAAC8H,GAAD,CAAeE,GAAIW,EAAeV,IAAK,EAAGC,IAAK,IAAKrO,MAAO4O,EAASrC,UAAWxM,EAAMyM,SAAU0B,WAAS,OAG5G,cAACpB,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,CAAWvJ,MAAO,CAACpD,aAAc,GAAjC,6BACA,cAAC8H,GAAD,CAAeE,GAAIc,EAAab,IAAK,EAAGC,IAAK,IAAKrO,MAAOgP,EAAOzC,UAAWxM,EAAMyM,SAAU0B,WAAS,OAGxG,cAACpB,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,mCACA,cAACK,GAAA,EAAD,CAAY/O,MAAO+K,EAAY/J,SApPlB,SAAClB,EAAOE,GAC7BA,EAAQgP,OAAOhP,GACfgI,GAAQ+C,WAAa/K,EACrBgL,EAAchL,GACdkK,KAgPmE+E,KAAG,EAA9D,SACK,CAAC,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,WAIhE,cAACxG,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,sCACA,cAACK,GAAA,EAAD,CAAY/O,MAAOiL,EAAWjK,SAtPlB,SAAClB,EAAOE,GAC5BA,EAAQgP,OAAOhP,GACfgI,GAAQiD,UAAYjL,EACpBkL,EAAalL,GACbkK,KAkPiE+E,KAAG,EAA5D,SACK,CAAC,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,WAIhE,cAACxG,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,+DACA,cAACK,GAAA,EAAD,CAAY/O,MAAOmL,EAAanK,SAxPlB,SAAClB,EAAOE,GAC9BA,EAAQgP,OAAOhP,GACfgI,GAAQmD,YAAcnL,EACtBoL,EAAepL,GACfkK,KAoPqE+E,KAAG,EAAhE,SACK,CAAC,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,WAIhE,cAACxG,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,2CACA,cAACK,GAAA,EAAD,CAAY/O,MAAOqL,EAAcrK,SA1PlB,SAAClB,EAAOE,GAC/BA,EAAQgP,OAAOhP,GACfgI,GAAQqD,aAAerL,EACvBsL,EAAgBtL,GAChBkK,KAsPuE+E,KAAG,EAAlE,SACK,CAAC,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,WAIhE,cAACxG,EAAA,EAAD,IAEA,cAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,SACI,cAAC0F,GAAA,EAAD,2BAEJ,uBACA,eAAChO,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAACsG,GAAA,EAAD,CACItP,MAAOuL,EAAU,GACjBvK,SAAU,SAAAM,GAAC,OAAImK,EAAgBnK,EAAEvB,OAAOC,MAAO,IAC/CuP,cAAY,EACZtS,UAAWd,EAAQ+M,YACnBf,UAAWxM,EAAMyM,SALrB,SAOK,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAI7D,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,GAAdA,QAE9E,cAACO,GAAA,EAAD,uBAEJ,sBAAMtK,MAAO,CACTzD,SAAU,WACVgO,IAAK,GACLC,SAAU,IAHd,eAKA,eAACjP,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAACsG,GAAA,EAAD,CACItP,MAAOuL,EAAU,GACjBvK,SAAU,SAAAM,GAAC,OAAImK,EAAgBnK,EAAEvB,OAAOC,MAAO,IAC/CuP,cAAY,EACZtS,UAAWd,EAAQ+M,YACnBf,UAAWxM,EAAMyM,SALrB,SAOK,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,IAAI7D,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,GAAdA,QAE9E,cAACO,GAAA,EAAD,wBAEJ,uBAAMtK,MAAO,CACTzD,SAAU,WACVgO,IAAK,GACLC,SAAU,IAHd,eAIMpE,EAAU,GAAKA,EAAU,GAJ/B,YAKA,cAACoD,EAAA,EAAD,8GAEA,cAACjG,EAAA,EAAD,IAEA,cAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,SACI,cAAC0F,GAAA,EAAD,uCAEJ,uBACA,eAAChO,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,eAACsG,GAAA,EAAD,CACItP,MAAO4L,GAAS,GAChB5K,SAAU,SAAAM,GAAC,OAAIyK,GAAezK,EAAEvB,OAAOC,MAAO,IAC9CuP,cAAY,EACZtS,UAAWd,EAAQ+M,YACnBf,UAAWxM,EAAMyM,SALrB,UAOI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,KAAjB,oBACC0J,MAAM6B,EAAU,IAAIqE,KAAK,MAAMrL,KAAI,SAACQ,EAAGzD,GAAJ,OAAUA,KAAGiD,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,EAAE,GAAhBA,SAE7E,cAACO,GAAA,EAAD,mBAEJ,sBAAMtK,MAAO,CACTzD,SAAU,WACVgO,IAAK,EACLC,SAAU,IAHd,gBAKA,eAACjP,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,eAACsG,GAAA,EAAD,CACItP,MAAO4L,GAAS,GAChB5K,SAAU,SAAAM,GAAC,OAAIyK,GAAezK,EAAEvB,OAAOC,MAAO,IAC9CuP,cAAY,EACZtS,UAAWd,EAAQ+M,YACnBf,UAAWxM,EAAMyM,SALrB,UAOI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,KAAjB,oBACC0J,MAAM6B,EAAU,IAAIqE,KAAK,MAAMrL,KAAI,SAACQ,EAAGzD,GAAJ,OAAUA,KAAGiD,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,EAAE,GAAhBA,SAE7E,cAACO,GAAA,EAAD,mBAGJ,cAAC/G,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,sCACA,eAACY,GAAA,EAAD,CACItP,MAAOgM,GACPhL,SA7Ta,SAAAlB,GACzBkI,GAAQgE,SAAWlM,EAAMC,OAAOC,MAChCiM,GAAYnM,EAAMC,OAAOC,OACzBkK,KA2TY/B,UAAWxM,EAAMyM,SAHrB,UAKI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,EAAjB,0BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,+BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,+BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,eACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,gBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,eACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,gBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,eACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,gBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,eACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,GAAjB,mBAEJ,cAACyP,GAAA,EAAD,UAAyB,CACrBI,EAAG,sCACHC,EAAG,oEACHC,EAAG,wEACHC,EAAG,SACHC,EAAG,SACHC,EAAG,SACHC,EAAG,SACHC,EAAG,SACHC,EAAG,SACHC,EAAG,SACHC,GAAI,UACNvE,SAGN,cAACtD,EAAA,EAAD,IAEA,cAACyG,GAAA,EAAD,CACIC,QAAS,cAACoB,GAAA,EAAD,CAAUlV,MAAM,UAAUwT,QAAS5C,GAAalL,SAxVrC,SAAAlB,GAC5BkI,GAAQkE,aAAeA,GACvBC,IAAgBD,IAChBhC,KAqVoG/B,UAAWxM,EAAMyM,WAC7G3F,MAAM,gCACNgO,eAAe,UAGnB,cAAC/H,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,oBACA,qBAAKvJ,MAAO,CAAClD,QAAS,OAAQyO,SAAU,OAAQC,eAAgB,gBAAhE,SAEQtH,GAAe9E,KAAI,SAAA4E,GAAI,OAAI,uBAAMhE,MAAO,CAAChD,YAAa,EAAGO,UAAW,UAAzC,UACvB,qBAAKkO,IAAG,iBAAYzH,EAAK,GAAjB,QAA2B0H,MAAO1U,EAAQgN,OAClD,uBACA,cAACU,GAAD,CAAeE,GAAI,SAAAY,GAAM,OAhW7B,SAACA,EAAQxB,GACzBnB,GAAQwB,MAAML,IAASwB,EACvByB,GAAS,2BAAI5C,IAAL,mBAAaL,EAAOnB,GAAQwB,MAAML,MACtCnB,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,UAAUD,GAAsBvE,GAAQqE,gBAAkBrE,GAAQwB,MAAMgD,UACpHtC,IA4ViD4G,CAAYnG,EAAQxB,EAAK,KAAKa,IAAKb,EAAK,GAAK,EAAI,EAAGc,IAAMsB,EAAU,GAAGA,EAAU,IAAKpN,OAAOuO,OAAOlD,IAAOmD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,KAAGpD,GAAML,EAAK,KAAK,EAAGvN,MAAO4N,GAAML,EAAK,IAAKhB,UAAWxM,EAAMyM,mBAIlO,eAACuG,EAAA,EAAD,4BAA4BpD,EAAU,GAAGA,EAAU,GAAIpN,OAAOuO,OAAOlD,IAAOmD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,KAA5F,wBAGJ,cAAClE,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,CAAWvJ,MAAO,CAACpD,aAAc,GAAjC,iDACA,cAAC8H,GAAD,CAAeE,GAAIwC,GAAuBvC,IAAK,EAAGC,IAAKT,GAAMgD,SAAU5Q,MAAOyQ,GAAiBlE,UAAWxM,EAAMyM,SAAU0B,WAAS,OAGvI,cAACpB,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,8DACA,cAACK,GAAA,EAAD,CAAY/O,MAAOwN,GAAWxM,SAnUlB,SAAClB,EAAOE,GAC5BA,EAAQgP,OAAOhP,GACfgI,GAAQwF,UAAYxN,EACpByN,GAAazN,GACb6N,KACA3D,KA8TiE+E,KAAG,EAA5D,SACK,CAAC,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,QAE5D,cAACP,EAAA,EAAD,iFAGHnB,GAAY,EAAI,gCACb,cAAC9E,EAAA,EAAD,IAEA,cAACyG,GAAA,EAAD,CACIC,QAAS,cAACoB,GAAA,EAAD,CAAUlV,MAAM,UAAUwT,QAASpB,GAAe1M,SArU/C,SAAAlB,GACxBkI,GAAQ0F,eAAiBA,GACzBC,IAAkBD,IAClBxD,KAkUsG/B,UAAWxM,EAAMyM,WAC3G3F,MAAM,sEACNgO,eAAe,aAEd,KAET,cAAC/H,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,mCACA,cAACK,GAAA,EAAD,CAAY/O,MAAOgN,GAAUhM,SAjXlB,SAAClB,EAAOE,GAC3BA,EAAQgP,OAAOhP,GACfgI,GAAQgF,SAAWhN,EACnBiN,GAAYjN,GACRgI,GAAQkF,UAAYlN,GACpBoN,GAAgB,CAACrN,OAAQ,CAACC,WAC1BgI,GAAQqF,UAAYrN,GACpBuN,GAAgB,CAACxN,OAAQ,CAACC,WAC9B6N,KACA3D,KAwW+D+E,KAAG,EAA1D,SACK,CAAC,EAAG,EAAG,EAAG,EAAG,GAAG1K,KAAI,SAAA2K,GAAC,OAAI,cAACC,GAAA,EAAD,CAAkBnP,MAAOkP,EAAWE,QAAS,cAACC,GAAA,EAAD,CAAO/T,MAAM,UAAU6M,UAAWxM,EAAMyM,WAAc3F,MAAOyM,GAAzEA,QAE/D,eAACP,EAAA,EAAD,mGAAkGrK,EAAQ0I,GAASQ,GAAnH,oIAGJ,cAAC9E,EAAA,EAAD,IAEA,cAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,SACI,cAAC0F,GAAA,EAAD,qEAEJ,uBACA,eAAChO,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAACsG,GAAA,EAAD,CACItP,MAAOkN,GACPlM,SAAUoM,GACVmC,cAAY,EACZtS,UAAWd,EAAQ4U,aACnB5I,UAAWxM,EAAMyM,SALrB,SAOK,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGK,QAAO,SAAAyG,GAAC,OAAIA,GAAKlC,IAAYkC,GAAK7B,MAAW9I,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,GAAdA,QAE7F,cAACO,GAAA,EAAD,qBAEJ,sBAAMtK,MAAO,CACTzD,SAAU,WACVgO,IAAK,GACLC,SAAU,IAHd,eAKA,eAACjP,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAACsG,GAAA,EAAD,CACItP,MAAOqN,GACPrM,SAAUuM,GACVgC,cAAY,EACZtS,UAAWd,EAAQ4U,aACnB5I,UAAWxM,EAAMyM,SALrB,SAOK,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGK,QAAO,SAAAyG,GAAC,OAAIA,GAAKlC,MAAUzI,KAAI,SAAA2K,GAAC,OAAI,cAACM,GAAA,EAAD,CAAkBxP,MAAOkP,EAAzB,SAA6BA,GAAdA,QAExE,cAACO,GAAA,EAAD,qBAGJ,cAAC/G,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,oBACA,qBAAKvJ,MAAO,CAAClD,QAAS,OAAQyO,SAAU,OAAQC,eAAgB,gBAAhE,SAEQrH,GAAe/E,KAAI,SAAA6E,GAAI,OAAI,uBAAMjE,MAAO,CAAChD,YAAa,EAAGO,UAAW,UAAzC,UACvB,qBAAKkO,IAAG,iBAAYxH,EAAK,GAAjB,QAA2ByH,MAAO1U,EAAQiN,OAClD,uBACA,cAACS,GAAD,CAAeE,GAAI,SAAAY,GAAM,OA5X7B,SAACA,EAAQvB,GACzBpB,GAAQyB,MAAML,IAASuB,EACvBiD,GAAS,2BAAInE,IAAL,mBAAaL,EAAOpB,GAAQyB,MAAML,MAC1Cc,IAyXiD8G,CAAYrG,EAAQvB,EAAK,KAAKY,IAAKZ,EAAK,IAAMqF,IAAWnK,EAAQ0I,GAASQ,GAAY/D,GAAML,EAAK,IAAW,EAAGa,IAAK,GAAIrO,MAAO6N,GAAML,EAAK,IAAKjB,UAAWxM,EAAMyM,mBAIzM,eAACuG,EAAA,EAAD,wBAAuBxQ,OAAOuO,OAAOjD,IAAOkD,QAAO,SAAC3O,EAAE4O,GAAH,OAAO5O,EAAE4O,KAA5D,wBAAqF6B,GAArF,yBAGJ,cAAC/F,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,+BACA,eAACY,GAAA,EAAD,CACItP,MAAO+N,GACP/M,SA5XoB,SAAAlB,GAChCkI,GAAQ+F,gBAAkBjO,EAAMC,OAAOC,MACvCgO,GAAmBlO,EAAMC,OAAOC,OAChCkK,KA0XY/B,UAAWxM,EAAMyM,SAHrB,UAKI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,EAAjB,kBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,oBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,0BAEJ,cAACyP,GAAA,EAAD,UAAyB,CACrBI,EAAG,gDACHC,EAAG,+GACHC,EAAG,kCACLhC,SAGN,cAACrF,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,mBACA,eAACY,GAAA,EAAD,CACItP,MAAOiO,GACPjN,SA1YS,SAAAlB,GACrBkI,GAAQiG,KAAOnO,EAAMC,OAAOC,MAC5BkO,GAAQpO,EAAMC,OAAOC,OACrBkK,KAwYY/B,UAAWxM,EAAMyM,SAHrB,UAKI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,EAAjB,uBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,2BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,4BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,4BACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,0BAEJ,cAACyP,GAAA,EAAD,UAAyB,CACrBI,EAAG,4FACHC,EAAG,0GACHC,EAAG,4FACHC,EAAG,qGACHC,EAAG,8EACLhC,SAGN,cAACvF,EAAA,EAAD,IAEA,eAAChI,EAAA,EAAD,CAAazD,UAAWd,EAAQ6M,YAAhC,UACI,cAAC0F,GAAA,EAAD,gCACA,eAACY,GAAA,EAAD,CACItP,MAAOoO,GACPpN,SA5ZmB,SAAAlB,GAC/BkI,GAAQmG,MAAQrO,EAAMC,OAAOC,MAC7BqO,GAAkBvO,EAAMC,OAAOC,OAC/BkK,KA0ZY/B,UAAWxM,EAAMyM,SAHrB,UAKI,cAACoH,GAAA,EAAD,CAAUxP,MAAO,EAAjB,oBACA,cAACwP,GAAA,EAAD,CAAUxP,MAAO,EAAjB,uBAEJ,cAACyP,GAAA,EAAD,UAAyB,CACrBI,EAAG,2CACHC,EAAG,2DACL1B,YAgBlB,IAAIpP,GAAS,CACTpD,MAAO,CACHC,MAAM,I,SAICwM,G,iFAAf,WAAgC1M,GAAhC,SAAAqC,EAAA,sEAGmBD,EAAW,eAClBpC,EAAMwO,QAAU,CAChBtN,MAAO,gBACPM,YAAY,kBAAD,OAAoBxB,EAAMsV,OAAS,GAAK,0BAAxC,MACX,CACApU,MAAO,eACPM,YAAa,iBACbM,WAAY,SACZC,aAAc,WACVsB,GAAOhD,cACPkE,GAAOC,KAAK,cAAe6H,OAGpC,cAAC4B,GAAD,eAAkBjO,KAhBzB,QAGIqD,GAHJ,QAiBWoJ,SAAWzM,EAAMyM,SAjB5B,4C,sBAiEe,QACXC,oBACA6I,cAnFJ,SAAuBC,GACnBnJ,GAAUmJ,EACV5R,OAAO6R,cAAc,IAAIC,MAAM,yBAkF/BC,YA/EJ,SAAqBC,GACbvS,GAAOpD,MAAMC,MAAQmD,GAAOoJ,UAAYmJ,GACxClJ,GAAiB,CAACD,SAAUmJ,EAAWpH,SAAS,M,6DC/vBlD7H,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrC2O,KAAM,CACFhH,MAAO,IACPD,YAAa,OCeNqP,ICdA,IACXC,MFEJ,WACI,IAAMtV,EAAUmG,KAChB,OACI,gCACI,cAACqM,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,sBACA,qBAAK+P,IAAI,gBAAgB3T,UAAWd,EAAQiN,OAC5C,qBAAKwH,IAAI,gBAAgB3T,UAAWd,EAAQiN,OAC5C,qBAAKwH,IAAI,iBAAiB3T,UAAWd,EAAQiN,OAC7C,cAACuF,EAAA,EAAD,yLACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,sCACA,qBAAK+P,IAAI,oBAAoB3T,UAAWd,EAAQiN,OAChD,qBAAKwH,IAAI,oBAAoB3T,UAAWd,EAAQiN,OAChD,qBAAKwH,IAAI,sBAAsB3T,UAAWd,EAAQiN,OAClD,cAACuF,EAAA,EAAD,yLACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,oCACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,sBACA,qBAAK+P,IAAI,sBAAsB3T,UAAWd,EAAQiN,OAClD,cAACuF,EAAA,EAAD,kEACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,qBAAqB3T,UAAWd,EAAQiN,OACjD,cAACuF,EAAA,EAAD,oOACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,mBAAmB3T,UAAWd,EAAQiN,OAC/C,cAACuF,EAAA,EAAD,mEACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,qBAAqB3T,UAAWd,EAAQiN,OACjD,cAACuF,EAAA,EAAD,8KACA,uBAEA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,sBAAsB3T,UAAWd,EAAQiN,OAClD,qBAAKwH,IAAI,sBAAsB3T,UAAWd,EAAQiN,OAClD,qBAAKwH,IAAI,sBAAsB3T,UAAWd,EAAQiN,OAClD,cAACuF,EAAA,EAAD,4PACA,uBAEA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,2BACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qCACA,qBAAK+P,IAAI,oBAAoB3T,UAAWd,EAAQiN,OAChD,qBAAKwH,IAAI,kBAAkB3T,UAAWd,EAAQiN,OAC9C,cAACuF,EAAA,EAAD,mKACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,2BACA,qBAAK+P,IAAI,wBAAwB3T,UAAWd,EAAQiN,OACpD,cAACuF,EAAA,EAAD,yMACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,uBACA,qBAAK+P,IAAI,uBAAuB3T,UAAWd,EAAQiN,OACnD,cAACuF,EAAA,EAAD,oGACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,qBAAqB3T,UAAWd,EAAQiN,OACjD,cAACuF,EAAA,EAAD,wJACA,uBAEA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,6BACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,wBACA,qBAAK+P,IAAI,wBAAwB3T,UAAWd,EAAQiN,OACpD,cAACuF,EAAA,EAAD,mEACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,mBAAmB3T,UAAWd,EAAQiN,OAC/C,cAACuF,EAAA,EAAD,oFACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,kBACA,qBAAK+P,IAAI,kBAAkB3T,UAAWd,EAAQiN,OAC9C,cAACuF,EAAA,EAAD,uGACA,uBAEA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,oBACA,cAAC8N,EAAA,EAAD,6LACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,sBACA,qBAAK+P,IAAI,kBAAkB3T,UAAWd,EAAQiN,OAC9C,cAACuF,EAAA,EAAD,kJACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,qBAAqB3T,UAAWd,EAAQiN,OACjD,cAACuF,EAAA,EAAD,iFACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yBACA,qBAAK+P,IAAI,yBAAyB3T,UAAWd,EAAQiN,OACrD,cAACuF,EAAA,EAAD,yMACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,oBACA,qBAAK+P,IAAI,oBAAoB3T,UAAWd,EAAQiN,OAChD,cAACuF,EAAA,EAAD,kSE7FR+C,QCPJ,WACI,IAAIC,EAAU,cACd,OACI,gCACI,qBAAKf,IAAI,YAAYzL,MAAO,CAACyM,SAAU,OAAQxP,MAAO,OACtD,cAACuM,EAAA,EAAD,+NACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yCACA,cAAC8N,EAAA,EAAD,2bACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,eAAC8N,EAAA,EAAD,qBAAmB,cAACkD,EAAA,EAAD,CAAMC,KAAI,2BAAsBH,GAAW5R,OAAO,SAASgS,IAAI,WAA/D,6BAAnB,iPACA,wBAAQ5M,MAAO,CAAC/C,MAAO,OAAQkD,OAAQ,SAAUsL,IAAG,wCAAmCe,GAAWK,YAAY,IAAIC,MAAM,2FAA2FC,iBAAe,IAClO,cAACvD,EAAA,EAAD,CAAY9N,QAAQ,KAApB,wBACA,eAAC8N,EAAA,EAAD,uEAEI,+BACI,8CACA,8CACA,gEACA,8DACA,yDACA,+DDdhBwD,MERJ,WACI,OACI,gCACI,cAACxD,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,cAAC8N,EAAA,EAAD,wHACA,cAACjG,EAAA,EAAD,IAEA,cAACiG,EAAA,EAAD,CAAY9N,QAAQ,KAApB,oBACA,qBAAK+P,IAAI,oBAAoBxO,MAAO,MACpC,cAACuM,EAAA,EAAD,oQACA,uBACA,cAACA,EAAA,EAAD,UAAY,4GACZ,cAACjG,EAAA,EAAD,IAEA,cAACiG,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yBACA,qBAAK+P,IAAI,wBAAwBxO,MAAO,MACxC,eAACuM,EAAA,EAAD,8TAA4T,uBAAM,uBAAlU,yMACA,uBACA,cAACA,EAAA,EAAD,UAAY,sEACZ,uBACA,cAACA,EAAA,EAAD,8JFXRyD,MGTJ,WACI,OACI,gCACI,cAACzD,EAAA,EAAD,CAAY9N,QAAQ,KAApB,iCACA,cAAC8N,EAAA,EAAD,6SACA,cAACjG,EAAA,EAAD,IAEA,cAACiG,EAAA,EAAD,CAAY9N,QAAQ,KAApB,0BACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,oBACA,qBAAK+P,IAAI,oBAAoBxO,MAAO,MACpC,cAACuM,EAAA,EAAD,4CACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,uBACA,qBAAK+P,IAAI,uBAAuBxO,MAAO,MACvC,cAACuM,EAAA,EAAD,gcACA,cAACjG,EAAA,EAAD,IAEA,cAACiG,EAAA,EAAD,CAAY9N,QAAQ,KAApB,+BACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,wBACA,qBAAK+P,IAAI,uBAAuBxO,MAAO,MACvC,cAACuM,EAAA,EAAD,6VACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yBACA,qBAAK+P,IAAI,wBAAwBxO,MAAO,MACxC,cAACuM,EAAA,EAAD,oLACA,2BHfR0D,aIVJ,WACI,OACI,gCACI,cAAC1D,EAAA,EAAD,CAAY9N,QAAQ,KAApB,2BACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,iDACA,cAAC8N,EAAA,EAAD,6FACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yCACA,eAAC8N,EAAA,EAAD,uIAAqI,uBAArI,sIACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,+DACA,cAAC8N,EAAA,EAAD,0KACA,uBACA,cAACA,EAAA,EAAD,UAAY,iFACwC,uBADxC,oDAEyC,uBACjD,uBAHQ,uFJFpB2D,MKXJ,WACI,OACI,gCACI,cAAC3D,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,cAAC8N,EAAA,EAAD,sFACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,0BACA,qBAAK+P,IAAI,qBAAqBxO,MAAO,KACrC,cAACuM,EAAA,EAAD,2UACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,mBAAmBxO,MAAO,KACnC,cAACuM,EAAA,EAAD,sCACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,sBACA,qBAAK+P,IAAI,sBAAsBxO,MAAO,KACtC,cAACuM,EAAA,EAAD,2NACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,kBACA,qBAAK+P,IAAI,kBAAkBxO,MAAO,KAClC,cAACuM,EAAA,EAAD,wGACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,qBACA,qBAAK+P,IAAI,qBAAqBxO,MAAO,KACrC,cAACuM,EAAA,EAAD,2JACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,mBAAmBxO,MAAO,KACnC,cAACuM,EAAA,EAAD,kFACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,mBAAmBxO,MAAO,KACnC,cAACuM,EAAA,EAAD,sGACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,mBACA,qBAAK+P,IAAI,qBAAqBxO,MAAO,KACrC,cAACuM,EAAA,EAAD,kHACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,wBACA,qBAAK+P,IAAI,2BAA2BxO,MAAO,KAC3C,qBAAKwO,IAAI,4BAA4BxO,MAAO,KAC5C,cAACuM,EAAA,EAAD,yGL7BR6C,KDZJ,WACI,OACI,gCACI,cAAC7C,EAAA,EAAD,CAAY9N,QAAQ,KAApB,kBACA,cAAC8N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,6BACA,cAAC8N,EAAA,EAAD,yVACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,2BACA,cAAC8N,EAAA,EAAD,kPACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,8BACA,cAAC8N,EAAA,EAAD,mcACA,uBACA,cAACA,EAAA,EAAD,CAAY9N,QAAQ,KAApB,0BACA,cAAC8N,EAAA,EAAD,udORZ,SAAS4D,GAAS5W,GAAQ,IACdyB,EAAqCzB,EAArCyB,SAAU4C,EAA2BrE,EAA3BqE,MAAOwS,EAAoB7W,EAApB6W,MAAUC,EADd,aACwB9W,EADxB,8BAGrB,OACI,6CACI+W,KAAK,WACLC,OAAQ3S,IAAUwS,EAClB5V,GAAE,4BAAuB4V,GACzBlW,kBAAA,uBAAiCkW,IAC7BC,GALR,aAOKzS,IAAUwS,GACP,cAACI,GAAA,EAAD,CAAKpO,EAAG,EAAR,SACKpH,OAarB,IAAMkF,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrCoY,KAAM,CACFC,SAAU,EACV1N,gBAAiB3K,EAAME,QAAQE,WAAWkY,MAC1C9Q,QAAS,QAEb+Q,KAAM,CACFC,SAAU,GACV7Q,MAAO,GACP8Q,YAAY,aAAD,OAAezY,EAAME,QAAQwY,UAE5CC,IAAK,CACDH,SAAU,SAEdI,SAAU,CACNxN,UAAW,cAyDJyN,OArDf,WACI,IAAMnX,EAAUmG,KADI,EAEM3E,IAAMiF,SAAS,GAFrB,oBAEb5C,EAFa,KAENuT,EAFM,KAQpB,OACI,sBAAKtW,UAAWd,EAAQ0W,KAAxB,UACI,eAACW,GAAA,EAAD,CACI3O,YAAY,WACZhE,QAAQ,aACRb,MAAOA,EACPgB,SAVS,SAAClB,EAAO2T,GACzBF,EAASE,IAUD7R,aAAW,wBACXzF,QAAS,CACL0W,KAAM1W,EAAQ6W,MAPtB,UAUI,cAACU,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,YACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,UACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,mBACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,UACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,SACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,UACnC,cAACiR,GAAA,EAAD,CAAKzW,UAAWd,EAAQiX,IAAK3Q,MAAM,qBAEvC,cAAC8P,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASjC,QAAV,MAEJ,cAACa,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASxB,MAAV,MAEJ,cAACI,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASvB,MAAV,MAEJ,cAACG,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASrB,MAAV,MAEJ,cAACC,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASnC,KAAV,MAEJ,cAACe,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAASlC,MAAV,MAEJ,cAACc,GAAD,CAAUpW,QAASA,EAAQkX,SAAUrT,MAAOA,EAAOwS,MAAO,EAA1D,SACI,cAACmB,GAAStB,aAAV,UCvFV/P,GAAYC,aAAW,SAAC9H,GAAD,MAAY,CACrCmZ,OAAQ,CACJrY,QAAS,OAIjB,SAASsY,KACL,IAAM1X,EAAUmG,KADG,EAEK3E,IAAMiF,UAAS,GAFpB,oBAEZ/G,EAFY,KAENiY,EAFM,KAKb9X,EAAc,kBAAM8X,GAAQ,IAGlC,OAFAC,GAAIC,UAFoB,kBAAMF,GAAQ,IAKlC,eAAC,IAAD,CACIjY,KAAMA,EACNO,QAASJ,EACTK,eAAa,EACbC,kBAAgB,qBAChBC,mBAAiB,2BALrB,UAOI,cAACI,EAAA,EAAD,CAAaC,GAAG,qBAAhB,mBACA,cAACE,EAAA,EAAD,CAAeX,QAAS,CAAC0W,KAAM1W,EAAQyX,QAAS7W,UAAQ,EAAxD,SACI,cAAC,GAAD,MAEJ,cAACM,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAQC,QAASvB,EAAaV,MAAM,YAApC,wBAQhB,IAAMyY,GAAM,GACZpV,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC+U,GAAD,OAAiCtV,SAASC,eAAe,UAEtGuV,UC/CTE,GAAgBC,KAEtB,SAASC,KACLN,GAAYG,YAOD,QACXC,iBACAG,gBANJ,WACI,OAAO,cAACzS,EAAA,EAAD,CAAYpE,QAAS4W,GAArB,SAAgC,cAACF,GAAD,OAMvCE,cCLE7R,GAAYC,YAAW,CACzB8R,UAAW,CACPpS,QAAS,QACTS,UAAW,SACX5E,OAAQ,OACR8T,SAAU,KAGd0C,SAAU,CACN5R,UAAW,SACXrH,OAAQ,sBACRD,aAAc,MAkCPmZ,OA9Bf,WACI,IAAMpY,EAAUmG,KAEhB,OACI,gCACI,cAACqM,EAAA,EAAD,CAAY1R,UAAWd,EAAQU,MAAOgE,QAAQ,KAAK2T,cAAY,EAA/D,SAAgE,qBAAKvX,UAAWd,EAAQkY,UAAWzD,IAAI,oBAAoB6D,IAAI,wBAE/H,eAAC9F,EAAA,EAAD,CAAY9N,QAAQ,QAAQ2T,cAAY,EAAxC,oDAC2C,eAAC3C,EAAA,EAAD,CAAMtU,QAASmX,GAAMP,UAArB,4BAA+C,cAAC,GAAMF,cAAP,CAAqBtE,SAAS,kBAGxH,sBAAK1S,UAAWd,EAAQmY,SAAxB,UACI,cAAC,GAAD,IACA,cAAC,GAAD,CAAazQ,SAAUhB,aAAa2C,QAAUwJ,OAAOnM,aAAa2C,UAAmB3C,aAAa2C,QAAUsC,KAAK6M,MAAM7M,KAAKC,SAAW1C,GAAchF,QAAewC,aAAa2C,SAAatB,UAAW,OAEzM,cAACwE,EAAA,EAAD,IACA,uBAEA,cAACpL,EAAA,EAAD,CAAQgC,KAAK,QAAQhE,MAAM,UAAUiC,QAAS,kBAAM2C,GAAOC,KAAK,cAAhE,wBACA,uBACA,cAAC7C,EAAA,EAAD,CAAQgC,KAAK,QAAQhE,MAAM,YAAYiC,QAAS,kBAAM8K,GAAiBA,iBAAiB,CAACD,UAAU,EAAM+B,SAAS,KAAlH,0BAEA,uBAAM,uBAAM,uBAEZ,cAAC,GAAD,W,+KChCV7H,GAAYC,YAAW,CACzBsQ,KAAM,CACFnQ,UAAW,UAGfkS,YAAa,CACTzS,YAAa,IAGjB0S,MAAO,CACHzS,MAAO,IACPtE,OAAQ,QAGZgX,KAAM,CACF1P,gBAAiB,WAGrB2P,UAAW,CACPrS,UAAW,UAGfsS,IAAK,CACDC,eAAgB,eAgHTC,OA5Gf,SAAevZ,GAKX,IAJA,IAAMQ,EAAUmG,KAEZ6S,EAAY,GACZC,EAASlV,GAAOtD,GAAGyY,WAAW1Z,EAAMuI,UAAUoR,MAJhC,WAKTvQ,GACL,IAAIwQ,EAAU,GACVP,GAAM,EACNjQ,KAAKpJ,EAAMuI,UAAUI,UACrBiR,EAAU5Z,EAAMuI,UAAUI,QAAQS,GAAGjC,KACrCkS,EAAM9U,GAAOtD,GAAGyY,WAAW1Z,EAAMuI,UAAUI,QAAQS,GAAGnI,KAE1DuY,EAAUnQ,KACN,cAACwQ,GAAA,EAAD,UACI,eAACC,GAAA,EAAD,CAAWxY,UAAWd,EAAQ4Y,UAA9B,UACKhQ,KAAKpJ,EAAMuI,UAAUI,SAAW3I,EAAMuI,UAAUoR,MAAQ3Z,EAAMuI,UAAUI,QAAQS,GAAGnI,GAChF,cAACgL,GAAA,EAAD,CAAS/K,MAAM,oEAAf,SACI,cAAC,KAAD,CAAW8S,SAAS,cAE1B,KACF,sBAAMxK,MAAOJ,KAAKpJ,EAAMuI,UAAUI,QAAU,CAAChJ,MAAM+J,GAAc1J,EAAMuI,UAAUI,QAAQS,GAAGN,MAAQ,KAApG,SAA2GuQ,EAAM,sBAAM/X,UAAWd,EAAQ6Y,IAAzB,SAA+BO,IAAkBA,IACjKP,EAAM,cAACpN,GAAA,EAAD,CAAS/K,MAAM,YAAf,SACH,cAAC8E,EAAA,EAAD,CAAYrC,KAAK,QAAQ/B,QAAS,kBAAMQ,EAAW,CAAClB,MAAO,iBAAkB,sBAAKsI,MAAO,CAACzC,UAAW,UAAxB,UAAmC,cAAC,GAAD,IAAa,cAAC,GAAD,CAAamB,SAAUlI,EAAMuI,UAAUI,QAAQS,GAAGN,IAAKP,UAAWvI,EAAMuI,iBAArM,SAA2N,cAAC,KAAD,CAAUyL,SAAS,gBACrO,KACZ5K,KAAKpJ,EAAMuI,UAAUI,SAAW8Q,IAAWzZ,EAAMuI,UAAUwR,WAAaV,EAAM,iCAC3E,cAACpN,GAAA,EAAD,CAAS/K,MAAM,6CAAf,SACI,cAAC8E,EAAA,EAAD,CAAYrC,KAAK,QAAQ/B,QAAS,kBAAM2C,GAAOC,KAAK,OAAQxE,EAAMuI,UAAUI,QAAQS,GAAGnI,KAAvF,SAA4F,cAAC,IAAD,CAAW+S,SAAS,gBAElHhU,EAAMuI,UAAUI,QAAQS,GAAG4Q,IAI3B,KAHE,cAAC/N,GAAA,EAAD,CAAS/K,MAAM,0DAA0DU,QAAS,kBAAM2C,GAAOC,KAAK,UAAWxE,EAAMuI,UAAUI,QAAQS,GAAGnI,KAA1I,SACI,cAAC+E,EAAA,EAAD,CAAYrC,KAAK,QAAjB,SAAyB,cAAC,KAAD,CAAgBqQ,SAAS,mBAGpD,SApBH5K,KARdA,EAAI,EAAGA,EAAIpJ,EAAMuI,UAAU8D,QAAQ1D,QAASS,IAAM,EAAlDA,GAkCTpH,IAAMsG,WAAU,WACZoE,GAAiBiJ,YAAY8D,MAG7BzZ,EAAMuI,UAAUwR,UACf,IAAIE,MAAJ,qBAAwBja,EAAMuI,UAAU2R,WAAxC,SAA2DC,OAGhE,IAAIpQ,EAAW,mEA/CG,EAgDc/H,IAAMiF,SAAS8C,GAhD7B,oBAgDbkB,EAhDa,KAgDFC,EAhDE,KAkDlB,OACI,gCACI,cAAClF,EAAA,EAAD,CAAYpE,QAAS,kBAAMgC,OAAOC,SAASC,UAA3C,SACI,cAAC,KAAD,MAEJ,cAAC,GAAM2U,gBAAP,IAEA,sBAAKnX,UAAWd,EAAQ0W,KAAxB,UACI,cAAClE,EAAA,EAAD,CAAY9N,QAAQ,WAAWoB,QAAQ,QAAQuS,cAAY,EAA3D,uBAGA,eAAC7F,EAAA,EAAD,CAAY9N,QAAQ,KAAK2T,cAAY,EAArC,UACI,sBAAMvX,UAAWd,EAAQyY,YAAzB,SACKjZ,EAAMuI,UAAU8D,QAAQoC,OAAS,cAACxC,GAAA,EAAD,CAAS/K,MAAM,mGAAf,SAAkH,cAAC,KAAD,MAA2B,cAAC+K,GAAA,EAAD,CAAS/K,MAAM,oEAAf,SAAmF,cAAC,KAAD,QAErQlB,EAAMuI,UAAUvE,KACjB,cAACiI,GAAA,EAAD,CAAS/K,MAAO+J,EAAhB,SACI,cAACjF,EAAA,EAAD,CAAYpE,QAAS,WACjBgL,KAAK,GAAD,OAAIhJ,OAAOC,SAASuW,SAApB,aAAiCxW,OAAOC,SAAS8V,KAAjD,YAAyD3Z,EAAMuI,UAAUvE,OAC7EkH,EAAa,wBACb5H,YAAW,WACP4H,EAAanB,KACd,MALP,SAMG,cAAC,KAAD,WAIX,cAACpI,EAAA,EAAD,CAAQhC,MAAM,YAAYiC,QAAS,kBAAM8K,GAAiBA,iBAAiB,CAACD,SAAUgN,EAAQjL,SAAS,KAAvG,2BACA,uBAAM,uBACLxO,EAAMuI,UAAUwR,SACb,eAAC/G,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yBAAsClF,EAAMuI,UAAU2R,WAAtD,SAEA,cAACjO,GAAA,EAAD,CAAS/K,MAAOuY,EAAS,0EAA4E,qCAArG,SACI,+BACI,cAAC9X,EAAA,EAAD,CAAQhC,MAAO8Z,EAAS,UAAY,UAAW9V,KAAK,QAAQ/B,QAAS,kBAAM2C,GAAOC,KAAK,eAAegI,UAAWiN,EAAjH,6BAKZ,cAACY,GAAA,EAAD,CAAgBpH,UAAWqH,KAA3B,SACI,eAACC,GAAA,EAAD,WACI,cAACC,GAAA,EAAD,UACI,cAACX,GAAA,EAAD,CAAUvY,UAAWd,EAAQ2Y,KAA7B,SACI,eAACW,GAAA,EAAD,CAAWxY,UAAWd,EAAQ4Y,UAA9B,sBACcpZ,EAAMuI,UAAUI,QAAQjE,OADtC,IAC+C1E,EAAMuI,UAAU8D,QAAQ1D,eAI/E,cAAC8R,GAAA,EAAD,UACKjB,gBC5IX5S,aAAW,SAAC9H,GAAD,MAAY,MAkB1B4b,OAdf,SAAsB1a,GAClB,OACI,gCACI,cAACgT,EAAA,EAAD,CAAY9N,QAAQ,KAApB,8CACClF,EAAM2a,QAAQ/R,KAAI,SAAAgS,GAAM,OACrB,wBACIpR,MAAO,CAACtK,WAAYwK,GAAckR,EAAO9R,MACzClH,QAAS,kBAAM2C,GAAOC,KAAK,WAAYoW,EAAO9R,IAAK9I,EAAMgE,OAF7D,SAGE4W,EAAOzT,c,mBCbnB0T,GAAY,CACd,MAAS,OACT,MAAS,OACT,MAAS,OACT,WAAc,YACd,MAAS,QAEPC,GAAQtY,OAAOuY,KAAKF,IACpBG,GAAkB,CACpB,CAAC,UAAW,WACZ,CAAC,SAAU,WACX,CAAC,SAAU,WACX,CAAC,SAAU,WACX,CAAC,UAAW,WACZ,CAAC,SAAU,WACX,CAAC,SAAU,WACX,CAAC,SAAU,WACX,CAAC,SAAU,WACX,CAAC,YAAa,WACd,CAAC,UAAW,WACZ,CAAC,SAAU,WACX,CAAC,UAAW,WACZ,CAAC,UAAW,YAGD,SAASC,GAAW1Z,EAAM2Z,GACrC,IAAIC,EAAQ5Z,EAAK6Z,MAAM,KACvB,OACI,+BAAOD,EAAMvS,KAAI,SAACyS,EAAMxE,GACpB,IAD8B,EAC1ByE,EAAiB,GAATzE,EAAa,GAAK,IAEtB0E,EAAUF,EAAK/W,QAAQ,MAAM,IAAIkX,cAEjCC,GAAY,EACZC,EAAiB,UANK,eAOTZ,IAPS,IAO1B,2BAAwB,CAAC,IAAhB7b,EAAe,QACpB,GAAI0c,GAAU1c,GAAMqL,eAAeiR,GAAU,CACzCE,EAAYxc,EAD6B,qBAE3B+b,IAF2B,IAEzC,2BAA+B,CAAC,IAAvB5R,EAAsB,QAC3B,GAAIA,EAAE,GAAGwS,KAAKL,GAAU,CACpBG,EAAiBtS,EAAE,GACnB,QALiC,8BAQzC,QAhBkB,8BAoB1B,GAAIqS,EACA,OAAQ,cAACxP,GAAA,EAAD,CAAS4P,gBAAiB,EAAG3a,MAAO,iCACxC,oBAAIsI,MAAO,CAACzC,UAAW,UAAvB,SAAmC8T,GAAUY,KAC7C,qBAAKxG,IAAG,WAAMwG,EAAN,YAAmBF,EAAnB,YAA8BI,GAAUF,GAAWF,IAAY9U,MAAO,GAAI+C,MAAO,CAAC/J,aAAa,QAClGqc,YAAa,CAACtS,MAAO,CAACuS,OAAQ,MAH/B,SAIJ,iCAAOT,EAAM,cAACpF,EAAA,EAAD,CAAM1M,MAAO,CAAC7J,MAAO+b,GAArB,SAAuCL,SAI5D,GAAI,SAASO,KAAKL,GAAU,CACxB,IAAIzS,EAAMuK,OAAOkI,EAAQ5W,MAAM,IAE/B,GADA8D,QAAQC,IAAIwS,GACY,MAApBA,EAAYpS,GACZ,OAAO,uBAAMU,MAAO,CAAC7J,MAAO+J,GAAcZ,IAAnC,UAA2CwS,EAAOJ,EAAYpS,MAI7E,IAAK,IAAIM,KAAK8R,EACV,GAAsB,MAAlBA,EAAY9R,IAAc8R,EAAY9R,GAAGoS,eAAiBD,EAC1D,OAAO,uBAAM/R,MAAO,CAAC7J,MAAO+J,GAAcN,IAAnC,UAAyCkS,EAAOJ,EAAY9R,MAI/E,MAAM,GAAN,OAAUkS,GAAV,OAAkBD,Q,wFC/DxB1U,GAAYC,YAAW,CACzBsQ,KAAM,CACFhY,WAAY,UACZ8c,UAAW,uBAGflO,MAAO,CACHnE,OAAQ,OACRsS,UAAW,SACXlV,UAAW,SACXmV,WAAY,UAGhBzO,KAAM,CACF9D,OAAQ,QAGZwS,uBAAwB,CACpBpV,UAAW,UAGfqV,cAAe,CACX3c,aAAc,EACd4c,aAAc,EACd/V,QAAS,eACT3G,MAAO,QACP,SAAU,CACNqU,SAAU,GACVsI,YAAa,GACbD,aAAc,GACd9E,YAAa,sBACb/Q,YAAa,IAIrB+V,aAAc,CACVjW,QAAS,OACT0O,eAAgB,gBAChB,SAAU,CACNjO,UAAW,SACX,QAAS,CACL4C,OAAQ,UAKpB6S,KAAM,CACF5c,QAAS,YACTsK,UAAW,SACXuS,UAAW,UACXhW,MAAO,OACPiW,UAAW,cAGfC,SAAU,CACNlW,MAAO,OACPyD,UAAW,SACX,QAAS,CACL0S,aAAc,sBACdtW,QAAS,OACT0O,eAAgB,gBAChBrN,WAAY,SACZhI,MAAO,QACPgK,OAAQ,OACRqK,SAAU,OACV6I,OAAQ,YAIhB5X,UAAW,CACPwB,MAAO,UAiPAqW,OA7Of,SAAoB9c,GAChB,IADuB,EACjBQ,EAAUmG,KACVoW,EAAU/a,IAAMgb,YAChBC,EAAYjb,IAAMgb,YAHD,EAKOhb,IAAMiF,SAAS,WALtB,oBAKhBX,EALgB,KAKP4W,EALO,OAMGlb,IAAMiF,SAAS,IANlB,oBAMhB6G,EANgB,KAMTmE,EANS,OAOmBjQ,IAAMiF,SAAS8G,MAAM/N,EAAMuI,UAAU8D,QAAQgF,UAAU4C,MAAK,IAP/E,oBAOhBkJ,EAPgB,KAODC,EAPC,OAQmBpb,IAAMiF,SAAS,IARlC,oBAQhBmV,EARgB,KAQDiB,EARC,OASarb,IAAMiF,SAAS,SAT5B,oBAShBqW,EATgB,KASJC,EATI,OAUWvb,IAAMiF,SAAS,GAV1B,oBAUhBuW,EAVgB,KAULC,EAVK,OAWCzb,IAAMiF,SAAS,MAXhB,oBAWhByW,EAXgB,KAWVC,EAXU,OAYe3b,IAAMiF,SAAS,IAZ9B,oBAYhB2W,EAZgB,KAYHC,EAZG,OAaG7b,IAAMiF,UAAS,GAblB,oBAahB6W,EAbgB,KAaTC,EAbS,OAcS/b,IAAMiF,SAAS,IAdxB,oBAchB+W,EAdgB,KAcNC,GAdM,QAeiBjc,IAAMiF,SAAS,IAfhC,sBAehBiX,GAfgB,MAeFC,GAfE,MAgBjBC,GAAc,WAChB7Z,GAAOC,KAAK,MAAO0Z,IACnBC,GAAgB,KAlBG,GAoBCnc,IAAMiF,SAAS8G,MAAM/N,EAAMuI,UAAUI,QAAQjE,QAAQuP,KAAK,OApB3D,sBAoBlBoK,GApBkB,MAoBXC,GApBW,MAqBnBC,GAASxQ,MAAM/N,EAAMuI,UAAUI,QAAQjE,QAAQuP,KAAK,MACpDiH,GAAcnN,MAAMrE,GAAchF,QAAQuP,KAAK,MAtB5B,gBAuBTjU,EAAMuI,UAAUI,SAvBP,IAuBvB,6BAAuC,CAAC,IAA/BS,GAA8B,QACnC8R,GAAY9R,GAAEN,KAAOM,GAAEjC,MAxBJ,kCA4GvB,OAjFAnF,IAAMsG,WAAU,WAsDZ,OAnDA/D,GAAOwE,GAAG,QAAQ,SAAAyV,GACdnB,EAAiBmB,GACjBtB,EAAW,WAEf3Y,GAAOwE,GAAG,SAAS,SAAAoJ,GACfF,EAASE,GACTiL,EAAiBrP,MAAM/N,EAAMuI,UAAU8D,QAAQgF,UAAU4C,MAAK,IAC9DiJ,EAAW,aAEf3Y,GAAOwE,GAAG,QAAQ,SAAC0E,EAAMgR,GACrBlB,EAAc9P,GACdgQ,EAAagB,GACbvB,EAAW,WAEf3Y,GAAOwE,GAAG,eAAe,SAAA2V,GACrBf,EAAQe,MAEZna,GAAOwE,GAAG,WAAW,SAAA2V,GACjB9a,OAAO+a,WAAY,EACnBzB,EAAW,QACXS,EAAQe,MAEZna,GAAOwE,GAAG,QAAQ,SAAC8N,EAAO6H,GACtBH,GAAO1H,GAAS6H,EAChBJ,GAAS9T,KAAKM,MAAMN,KAAKC,UAAU8T,SAEvCha,GAAOwE,GAAG,gBAAgB,SAAA7H,GACtB2c,EAAe3c,GACfgc,EAAW,mBAEf3Y,GAAOwE,GAAG,OAAO,SAAA6V,GACb5e,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAzC,GAAC,OAAIA,EAAEC,KAAO8V,KAAMA,MAAO,EACxD1B,EAAW,WAEf3Y,GAAOwE,GAAG,QAAQ,SAAA8V,GACdV,GAAgB,IAChBJ,EAASc,GACL7e,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAzC,GAAC,OAAIA,EAAE+V,MAAQra,GAAOtD,GAAGyY,WAAW7Q,EAAE5H,OACnE8c,GAAS,GACFc,GACPzc,EAAW,CACPlB,MAAO,SACPM,YAAa,iEAIzB+C,GAAOwE,GAAG,WAAW,SAAA+V,GACjBrW,QAAQC,IAAIoW,GACZb,IAAY,SAAAc,GAAY,6BAAQA,GAAR,CAAsBD,UAG3C,WACHva,GAAOyE,IAAI,QACXzE,GAAOyE,IAAI,SACXzE,GAAOyE,IAAI,QACXzE,GAAOyE,IAAI,eACXzE,GAAOyE,IAAI,WACXzE,GAAOyE,IAAI,QACXzE,GAAOyE,IAAI,gBACXzE,GAAOyE,IAAI,OACXzE,GAAOyE,IAAI,WACXzE,GAAOyE,IAAI,YAEhB,IAEHhH,IAAMsG,WAAU,WACZ,GAAe,QAAXhC,EACA,GAAI1C,OAAO+a,UACP/a,OAAO+a,WAAY,EACnB1B,EAAU+B,QAAQC,qBACf,CACH,IAAIC,EAAcnC,EAAQiC,QAAQvd,SAASsb,EAAQiC,QAAQvd,SAASiD,OAAS,GACzEqY,EAAQiC,QAAQG,aAAepC,EAAQiC,QAAQI,aAAerC,EAAQiC,QAAQK,UAAYtC,EAAQiC,QAAQM,UAAYJ,EAAYE,aAAe,IACjJnC,EAAU+B,QAAQC,qBAM9B,qBAAK/J,MAAO1U,EAAQ0W,KAAM1N,MAAO,CAACG,OAAQ3J,EAAM2J,OAAQ8S,UAAW,oBAAnE,SACM,WACE,OAAQnW,GACJ,IAAK,SACD,IAAIiZ,EAAsBpC,EAAcrQ,QAAO,SAAAW,GAAI,OAAIA,KAAM/I,OACzD8a,EAAcD,EAAsBvf,EAAMuI,UAAU8D,QAAQkF,WAAagO,EAAsBvf,EAAMuI,UAAU8D,QAAQqF,UAC3H,OAAQ,gCACR,qBAAKwD,MAAO1U,EAAQsN,MAApB,SACKA,EAAMlF,KAAI,SAAC6E,EAAMoJ,GAAP,OACP,cAAC5K,GAAA,EAAD,CAAS/K,MAAO,qBAAK+T,IAAG,iBAAYxH,EAAZ,QAAwBhH,MAAO,MAAvD,SACI,cAAC9E,EAAA,EAAD,CAAQC,QAAS,kBAAMwb,EAAiBD,EAAcvU,KAAI,SAAC6E,EAAMrE,GAAP,OAAayN,GAASzN,GAAKqE,EAAOA,OAA5F,SACI,qBAAKyH,MAAO1U,EAAQiN,KAAMwH,IAAG,iBAAYxH,EAAZ,QAAwBjE,MAAO,CAACiW,QAAStC,EAActG,GAAS,EAAI,eAKjH,qBAAKrN,MAAO,CAACzC,UAAW,UAAxB,SACI,eAACpF,EAAA,EAAD,CACIhC,MAAM,UACN6J,MAAO,CAACiW,QAASD,EAAc,GAAM,GACrChT,SAAUgT,EACV5d,QAAS,kBAAM2C,GAAOC,KAAK,OAAQ2Y,EAAcvU,KAAI,SAAC6E,EAAMoJ,GAAP,MAAiB,CAACA,EAAOpJ,MAAOX,QAAO,SAAAnH,GAAC,OAAIA,EAAE,MAAIiD,KAAI,SAAAjD,GAAC,OAAIA,EAAE,QAJtH,kBAMU4Z,EANV,IAMgCvf,EAAMuI,UAAU8D,QAAQqF,kBAKhE,IAAK,OAAQ,OAAQ,qBAAKpQ,UAAWd,EAAQ2b,uBAAxB,SAChBC,EAAcxT,KAAI,SAAAC,GACf,IAAI6W,EAAS1f,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAqU,GAAE,OAAIA,EAAG7W,KAAOD,EAAE0K,KAE5D,OAAO,uBAAMjS,UAAWd,EAAQ4b,cAAe5S,MAAO,CAACtK,WAAYwK,GAAcb,EAAE0K,IAA5E,UACH,sBAAM/J,MAAO,CAAC8P,eAAe,GAAD,OAAKoG,EAAOd,KAAO,eAAiB,IAApC,OAAyCra,GAAOtD,GAAGyY,WAAWgG,EAAOze,IAAM,aAAe,KAAtH,SAA8Hye,EAAOvY,OACpI,CAAC,cAAC,KAAD,IAAmB,cAAC,KAAD,IAAe,cAAC,KAAD,KAAe0B,EAAE+W,WAKjE,IAAK,OAAQ,OAAQ,sBAAKte,UAAWd,EAAQ+b,aAAxB,UACjB,iCAAM,qBAAKtH,IAAG,iBAAyB,GAAbuI,EAAiB,QAAU,OAAvC,UAAuD,uBAArE,YAAqFA,KACrF,iCAAM,qBAAKvI,IAAG,iBAAYqI,EAAZ,UAAgC,uBAA9C,aACA,iCAAM,qBAAKrI,IAAG,iBAAoB,MAARyI,EAAe,QAAUA,EAArC,UAAmD,uBAAjE,aAGJ,IAAK,OAAQ,OAAQ,sBAAKlU,MAAO,CAACiT,UAAW,UAAWnW,QAAS,QAA5C,UACjB,sBAAKlD,IAAK2Z,EAASzb,UAAWd,EAAQgc,KAAtC,UACKwB,EAASpV,KAAI,SAAAiX,GACV,GAAIA,EAAIvV,eAAe,KAAM,CACzB,IAAI3K,EACJ,OAAQkgB,EAAIC,GACR,IAAK,IAAKngB,EAAQ,UAAU,MAC5B,IAAK,IAAKA,EAAQ,UAAU,MAC5B,QAASA,EAAQ,UAErB,OAAO,cAACqT,EAAA,EAAD,CAAYxJ,MAAO,CAAC7J,SAApB,SACFsb,GAAW4E,EAAIE,EAAG7E,MAGvB,OAAO,eAAClI,EAAA,EAAD,WACH,uBAAMxJ,MAAO,CAAC7J,MAAO,WAArB,cAAkC,sBAAM6J,MAAO,CAAC7J,MAAO+J,GAAcmW,EAAIhX,IAAvC,SAA6C7I,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAzC,GAAC,OAAIA,EAAEC,KAAO+W,EAAIhX,KAAG1B,OAAjI,OACC,IACA8T,GAAW4E,EAAIG,EAAG9E,UAI/B,eAACnW,EAAA,EAAD,CAAazD,UAAWd,EAAQyE,UAAWC,QAAQ,SAAnD,UACI,cAACC,EAAA,EAAD,CAAYL,QAAQ,eAApB,qBAIA,cAACM,EAAA,EAAD,CACInE,GAAG,eACHhC,KAAK,OACLoF,MAAO6Z,GACP7Y,SAAU,SAAAM,GAAC,OAAIwY,GAAgBxY,EAAEvB,OAAOC,QACxCiB,aAAa,MACbC,WAAY,CACRE,UAAW,GACXC,UAAW,SAAAC,GAAmB,SAATA,EAAEC,KAAgBwY,OAE3C5R,SAAUsR,EACVjY,aACI,cAACC,EAAA,EAAD,CAAgBC,SAAS,MAAzB,SACI,cAACC,EAAA,EAAD,CACIC,aAAW,OACXrE,QAASwc,GACTlY,KAAK,MAHT,SAKI,cAAC,KAAD,aAMpB,sBAAM9C,IAAK6Z,OAEf,sBAAK3b,UAAWd,EAAQmc,SAAxB,UACI,qBAAKnT,MAAO,CAAC7J,MAAO,QAASqU,SAAU,GAAI6I,OAAQ,OAAQlT,OAAQ,IAAnE,SACI,uBAAMH,MAAO,CAACzC,UAAW,SAAUN,MAAO,QAA1C,yBAAwE,MAARiX,EAAe,WAAf,UAA+BA,EAAK,GAAGuC,eAAvC,OAAuDvC,EAAK/Y,MAAM,SAErI3E,EAAMuI,UAAUI,QAAQC,KAAI,SAAA8W,GACzB,OAAO,cAACzT,GAAA,EAAD,CAAS/K,MAAK,WAAMwe,EAAO5W,KAA3B,SACH,sBAAKlH,QAAS,kBAAM2C,GAAOC,KAAK,OAAQkb,EAAO5W,MAA/C,UACI,qBAAKU,MAAO,CAACtK,WAAYwK,GAAcgW,EAAO5W,KAAMrC,MAAO,QAA3D,SACA,sBAAM+C,MAAO,CAAC8P,eAAe,GAAD,OAAKoG,EAAOd,KAAO,eAAiB,GAApC,YAA0Cra,GAAOtD,GAAGyY,WAAWgG,EAAOze,IAAM,YAAc,KAAtH,SAA8Hye,EAAOvY,SAErI,sBAAMqC,MAAO,CAAC0W,WAAY,sBAAuBlM,SAAU,EAAGpU,QAAS,EAAGV,WAAoC,OAAtBmf,GAAMqB,EAAO5W,MAAuC,OAAtBuV,GAAMqB,EAAO5W,MAAiB,EAAQ,QAAUY,GAAc2U,GAAMqB,EAAO5W,OAAjM,SAAgO,MAArBuV,GAAMqB,EAAO5W,MAAqC,GAArBuV,GAAMqB,EAAO5W,KAAiB4W,EAAOd,OAA8B,IAAtBP,GAAMqB,EAAO5W,KAAiB,cAAC,KAAD,CAAWU,MAAO,CAAC7J,MAAO,WAAe,cAAC,KAAD,CAAe6J,MAAO,CAAC7J,MAAO,WAAgB,cAAC,KAAD,CAAW6J,MAAO,CAAC7J,OAA6B,IAAtB0e,GAAMqB,EAAO5W,KAAgB,QAAU,qBAIvd,sBAAMU,MAAO,CAAC/C,MAAO,OAAQH,QAAS,OAAQ0O,eAAgB,UAA9D,SAAyE,cAAC/I,GAAA,EAAD,CAAS/K,MAAM,kBAAf,SAAiC,cAACS,EAAA,EAAD,CAAQC,QAAS,kBAAM2C,GAAOC,KAAK,QAAQ,IAAQU,QAAQ,YAAYvB,KAAK,QAAQwc,kBAAgB,EAApG,+BAIlH,IAAK,eAAgB,OAAO,gCACxB,cAACnN,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SAA0B0Y,IACzB5d,EAAMuI,UAAUI,QAAQC,KAAI,SAAA8W,GACzB,IAAIA,EAAOd,KACX,OAAO,wBAAQpV,MAAO,CAACtK,WAAYwK,GAAcgW,EAAO5W,MAAOlH,QAAS,kBAAM2C,GAAOC,KAAK,eAAgBkb,EAAO5W,MAA1G,SAAiH4W,EAAOvY,cAtH7I,M,OChMd,SAASiZ,GAASpgB,GACd,OACI,gCACI,sBAAKwJ,MAAO,CAACzC,UAAW,UAAxB,UACI,qBAAKkO,IAAG,iBAAYjV,EAAMuI,UAAUwO,KAA5B,QAAwCtQ,MAAO,MACvD,cAACuM,EAAA,EAAD,CAAY9N,QAAQ,KAAKsE,MAAO,CAAC7J,MAAO+J,GAAc1J,EAAMuI,UAAU8X,GAAGvX,MAAzE,SAAiF9I,EAAMuI,UAAU8X,GAAGlZ,UAExG,cAAC6L,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SAA2B,WACvB,OAAQlF,EAAMuI,UAAUwO,MACpB,IAAK,SACD,OAAQ/W,EAAMuI,UAAU8D,QAAQiG,MAC5B,KAAK,EACL,KAAK,EACD,MAAM,uFAAN,OAA8H,GAAhCtS,EAAMuI,UAAU8D,QAAQiG,KAAY,SAAY,GAA9I,+BACJ,KAAK,EACD,MAAO,kEACX,KAAK,EACD,IAAIgO,EAAUtgB,EAAMuI,UAAUI,QAAQjE,OAAS,EAC/C,MAAM,aAAN,OAAoB4b,EAAQ,EAA5B,+IACJ,KAAK,EACD,MAAO,iEAGnB,IAAK,aACD,OAAQtgB,EAAMuI,UAAU8D,QAAQiG,MAC5B,KAAK,EACD,OAAO,iCAAM,sBAAM9I,MAAO,CAAC7J,MAAO+J,GAAc1J,EAAMuI,UAAUgY,SAASzX,MAA5D,SAAoE9I,EAAMuI,UAAUgY,SAASpZ,OAAnG,wDACX,KAAK,EACD,MAAO,8EACX,KAAK,EACD,MAAO,0DAGnB,IAAK,aACD,MAAO,mJAEX,IAAK,YACD,OAAO,iCAAM,sBAAMqC,MAAO,CAAC7J,MAAO+J,GAAc1J,EAAMuI,UAAUgY,SAASzX,MAA5D,SAAoE9I,EAAMuI,UAAUgY,SAASpZ,OAAnG,0HAEX,IAAK,YACD,OAAO,8BACFnH,EAAMuI,UAAUiY,MAAM5X,KAAI,SAAAC,GACvB,GAAc,aAAVA,EAAEkO,KAAqB,MAAO,GAClC,IAAI2I,EAAS1f,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAqU,GAAE,OAAIA,EAAG7W,KAAOD,EAAEC,OAE5D,OAAO,uBAAMU,MAAO,CAAC7J,MAAO+J,GAAcgW,EAAO5W,KAAMxC,QAAS,eAAgBE,YAAa,IAAtF,UAA4FkZ,EAAOvY,KAAnG,KAA0G,qBAAK8N,IAAG,iBAAYpM,EAAEkO,KAAd,QAA0BtQ,MAAO,KAAM,gCAtCzJ,KA2C3B,cAACuM,EAAA,EAAD,gEAWGyN,OANf,SAAsBlY,GAClBnG,EAAW,CACPlB,MAAO,kBACR,cAACkf,GAAD,CAAU7X,UAAWA,M,8DCjDtBmY,GAAmB,OACnB/Z,GAAYC,YAAW,CACzB+Z,SAAU,CACNra,QAAS,OACTG,MAAO,OACPkD,OAAQ,GAERxH,OAAQ,OACRwF,WAAY,SACZqN,eAAgB,gBAChBjP,SAAU,SACVgO,IAAK,EACLtK,gBAAiB,UACjBmT,aAAc,sBACdb,OAAQ,IACR,QAAS,CACL5E,SAAU,IAIlByJ,cAAe,CACX7Z,UAAW,UAGf8Z,gBAAiB,CACbva,QAAS,OACTqB,WAAY,MACZqN,eAAgB,UAOpB8L,eAAgB,CACZrE,UAAU,uBAAD,OAAyBiE,GAAzB,KACT/W,OAAQ,QACR5C,UAAW,SACXga,WAAY,EACZhb,SAAU,YAGdib,MAAO,CACHrX,OAAQ,OACRlD,MAAO,OACPwa,UAAW,UACXlb,SAAU,WACVgO,IAAK,EACLmN,KAAM,GAGV5X,QAAS,CACLvD,SAAU,WACVO,QAAS,OACT0G,cAAe,SACfyS,QAAS,EACThZ,MAAO,GACPsV,OAAQ,OA0GDoF,OAtGf,SAAenhB,GACX,IAAMQ,EAAUmG,KADE,GAED3G,EAAM2I,QAAQ2C,MAAK,SAAAoU,GAAM,OAAI1f,EAAMohB,KAAK1H,WAAWgG,EAAOze,OAErDe,IAAMiF,SAASjH,EAAMuI,UAAU8Y,MAJnC,oBAIXA,EAJW,KAINC,EAJM,OAKItf,IAAMiF,SAASjH,EAAMuI,UAAUgZ,MALnC,oBAKXC,EALW,KAKNC,EALM,KAkBlB,OAXAzf,IAAMsG,WAAU,WAKZ,OAJAmY,GAAazgB,EAAMuI,WACnBhE,GAAOwE,GAAG,OAAO,SAAA2Y,GAAM,OAAIJ,EAAOI,MAClCnd,GAAOwE,GAAG,QAAQ,SAAA4Y,GAAM,OAAIF,EAAOE,MAE5B,WACHpd,GAAOyE,IAAI,OACXzE,GAAOyE,IAAI,UAEhB,IAGC,gCACI,sBAAK1H,UAAWd,EAAQmgB,SAAxB,UACI,cAAC1U,GAAA,EAAD,CAAS/K,MAAM,gFAAf,SACI,gCACI,qBAAKI,UAAWd,EAAQogB,cAAxB,SACI,cAAC5N,EAAA,EAAD,CAAY9N,QAAQ,YAApB,mCAIJ,sBAAK5D,UAAWd,EAAQqgB,gBAAxB,UACI,cAAC7N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SACI,sBAAMjE,GAAG,iBAAT,iBAEJ,eAAC+R,EAAA,EAAD,CAAY9N,QAAQ,KAApB,cACK,sBAAMjE,GAAG,kBAAT,kBAEL,eAAC+R,EAAA,EAAD,eACK,sBAAM/R,GAAG,iBAAT,0BAMjB,cAACgL,GAAA,EAAD,CAAS/K,MAAM,uHAAf,SACA,gCACI,qBAAKI,UAAWd,EAAQogB,cAAxB,SACI,cAAC5N,EAAA,EAAD,CAAY9N,QAAQ,YAApB,uBAIJ,sBAAK5D,UAAWd,EAAQqgB,gBAAxB,UACI,cAAC7N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SACI,sBAAMjE,GAAG,SAAT,iBAEJ,eAAC+R,EAAA,EAAD,CAAY9N,QAAQ,KAApB,cACK,sBAAMjE,GAAG,YAAT,0BAMb,cAACgL,GAAA,EAAD,CAAS/K,MAAM,kBAAf,SACI,gCACI,qBAAKI,UAAWd,EAAQogB,cAAxB,SACI,cAAC5N,EAAA,EAAD,CAAY9N,QAAQ,YAApB,oBAIJ,qBAAK5D,UAAWd,EAAQqgB,gBAAxB,SACI,cAAC7N,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SACI,sBAAMjE,GAAG,aAAT,2BAOpB,sBAAKK,UAAWd,EAAQ8I,QAAxB,UACI,cAAC,GAAMmP,gBAAP,IACA,cAACzS,EAAA,EAAD,CAAYpE,QAAS,kBAAM6e,GAAazgB,EAAMuI,YAA9C,SAA0D,cAAC,KAAD,MAC1D,cAACvC,EAAA,EAAD,CAAYpE,QAAS,kBAAM8K,GAAiBA,iBAAiB,CAACD,UAAU,EAAO+B,SAAS,EAAM8G,QAAQ,EAAMjJ,QAASrM,EAAMuI,UAAU8D,WAArI,SAAgJ,cAAC,KAAD,MAChJ,cAACrG,EAAA,EAAD,CAAYpE,QAAS,kBAAMQ,EAAW,CAClClB,MAAO,YACPM,YAAa,2EACd,cAACwR,EAAA,EAAD,CAAY9N,QAAQ,KAApB,SAA0BlF,EAAMuI,UAAUvE,SAH7C,SAGkE,cAAC,KAAD,SAGtE,sBAAK1C,UAAWd,EAAQsgB,eAAxB,UACI,wBAAQ7f,GAAG,QAAQuI,MAAO,GACvBlI,UAAWd,EAAQwgB,QACtB,cAAC/U,GAAA,EAAD,CAAS/K,MAAO,uBAAMsI,MAAO,CAACwK,SAAU,GAAI+M,WAAY,KAAxC,UACXS,EAAI,GAAG,EADI,KACCA,EAAI,GAAG,EADR,MACc,CAAC,IAAI,KAAK,IAAK,KAAM,IAAK,KAAM,IAAK,MAAMH,GADzD,KACiE,mDAAWA,GAD5E,OAAhB,SAGI,wBAAQpgB,GAAG,WAAWuI,MAAO,GAC1BlI,UAAWd,EAAQwgB,aAI9B,cAAC,GAAD,CAAYrX,OAAQ+W,GAAkBnY,UAAWvI,EAAMuI,gB,qBCjK7DqZ,GAAO,CACT,SAAY,EAAC,EAAM,mDACnB,KAAQ,EAAC,EAAM,+CACf,KAAQ,EAAC,EAAO,kBAChB,OAAU,EAAC,EAAO,6DAGhBjb,GAAYC,YAAW,CACzBsQ,KAAM,CACFnQ,UAAW,UAGfqS,UAAW,CACPrS,UAAW,UAGf8a,eAAgB,CACZvb,QAAS,OACTyO,SAAU,OACVC,eAAgB,SAChB,QAAS,CACL8M,WAAY,GACZtb,YAAa,KAIrBub,UAAW,CACPtb,MAAO,KAGXub,aAAc,CACVrY,OAAQ,IAGZ0P,IAAK,CACD1Z,MAAO,OAGXsiB,YAAa,KAsDFC,OAlDf,SAAiBliB,GACb,IAAMQ,EAAUmG,KAEf,IAAIsT,MAAM,iBAAkBE,OAE7B,IAAIgI,EAAMP,GAAK5hB,EAAMoiB,QAAQC,OAE7B,OACI,8BACI,sBAAK/gB,UAAWd,EAAQ0W,KAAxB,UACI,cAAClR,EAAA,EAAD,CAAYpE,QAAS,kBAAM8K,GAAiBA,iBAAiB,CAACD,UAAU,EAAO+B,SAAS,EAAM8G,QAAQ,EAAMjJ,QAASrM,EAAMuI,UAAU8D,WAArI,SACI,cAAC,KAAD,MAEJ,cAACrG,EAAA,EAAD,CAAYpE,QAAS,kBAAMgC,OAAOC,SAASC,UAA3C,SACI,cAAC,KAAD,MAEJ,cAAC,GAAM2U,gBAAP,IACA,eAACzF,EAAA,EAAD,CAAY9N,QAAQ,KAApB,UACI,uBAAMsE,MAAO,CAAC7J,MAAOwiB,EAAI,GAAK,UAAY,WAA1C,UAAuDA,EAAI,GAAK,SAAW,cAA3E,OADJ,WAGA,cAACnP,EAAA,EAAD,CAAY9N,QAAQ,KAAK2T,cAAY,EAArC,SACKsJ,EAAI,KAGT,qBAAK3Y,MAAO,CAAClD,QAAS,OAAQyO,SAAU,OAAQC,eAAgB,UAAhE,SACKhV,EAAMoiB,QAAQ5B,MAAM5X,KAAI,SAAA8W,GACrB,IAAI7W,EAAI7I,EAAMuI,UAAUI,QAAQ2C,MAAK,SAAAqU,GAAE,OAAIA,EAAG7W,KAAO4W,EAAO5W,OAC5D,OACI,uBAAMU,MAAO,CAACrH,OAAQ,IAAtB,UACI,qBAAK8S,IAAG,iBAAYyK,EAAO3I,KAAnB,QAA+BtQ,MAAO,MAAO,uBACrD,sBAAM+C,MAAO,CAACwK,SAAU,GAAIjN,UAAW,SAAUpH,MAAO+J,GAAcb,EAAEC,KAAMwQ,eAAe,GAAD,OAAKzQ,EAAE+V,KAAO,eAAiB,GAA/B,YAAqC5e,EAAMohB,KAAK1H,WAAW7Q,EAAE5H,IAAM,YAAa,KAA5K,SAAoL4H,EAAE1B,eAMtM,uBACA,cAACxF,EAAA,EAAD,CAAQhC,MAAM,UAAUgE,KAAK,QAAQ6F,MAAO,CAACrH,OAAQ,UAAWP,QAAS,kBAAM2C,GAAOC,KAAK,SAAUxE,EAAMsiB,OAAQtiB,EAAMuI,UAAU8D,UAAnI,wBAEA,cAACU,EAAA,EAAD,IAEA,cAACiG,EAAA,EAAD,CAAY9N,QAAQ,KAApB,yBAGA,qBAAK+P,IAAKjV,EAAMuiB,WAAY/Y,MAAO,CAACG,OAAQ,OAAQsM,SAAU,OAAQgL,UAAW,mBCxFjG,ICWeuB,IDpBTC,GAAS,CACX5U,MAAQ,GACR0T,KAAMxT,MAAM,IAAIkG,KAAK,MAAMrL,KAAI,SAACjD,EAAGyD,GAC/B,IAAIsZ,EAAM,IAAIC,MAEd,OADAD,EAAIzN,IAAJ,gBAAmB7L,EAAnB,QACOsZ,MAIf,QAAc,CAAC,UAAW,QAAS,WAAY,OAAQ,UAAW,QAAS,QAAS,UAAW,gBAAiB,iBAAkB,SAAlI,kBAA4I,CAAvI,IAAItZ,GAAC,OACF6L,GAAG,iBAAa7L,GAAb,QACPqZ,GAAO5U,MAAMzE,IAAK,IAAIuZ,MACtBF,GAAO5U,MAAMzE,IAAG6L,IAAMA,GAG1BwN,GAAOlB,KAAKtM,IAAM,YAEHwN,IEGXla,GACA6Y,GAGAwB,GAOAC,GACAC,GACAC,GACAC,GFjBWP,MEPTQ,GAAU,IAEVC,GAAa,GAcfC,IAZe,IAAIlJ,MAAM,cACL,IAAIA,MAAM,mBACb,IAAIA,MAAM,gBACR,IAAIA,MAAM,kBASb,IAChBmJ,GAAW,KACXC,GAAY,KACZC,GAAa,GAMbC,IAAY,EAEhB,SAASC,KACLV,GAAIW,YAAc,EAClBX,GAAIY,UAAU,EAAG,EAAGb,GAAOpc,MAAOoc,GAAOlZ,QAEzCmZ,GAAIa,UAAY,QAChB,IAAK,IAAIC,EAAI,EAAGA,EAAIrb,GAAU8D,QAAQuD,UAAU,GAAIgU,IAChDd,GAAIe,SAASX,GAAY,IAAuBU,EAhCnC,EAgCkDV,GAAa,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAhClH,KAkCjB,IAAK,IAAIkU,EAAI,EAAGA,EAAIvb,GAAU8D,QAAQuD,UAAU,GAAIkU,IAChDhB,GAAIe,SAAS,IAAuBC,EAnCvB,EAmCsCZ,GAAYA,GAnClD,EAmC6E,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAnChI,GAsCjBkT,GAAIa,UAAY,UAChBb,GAAIe,SAAS,EAAG,EAAGX,GAAY,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAvCjE,EAuCiFsT,IAElGJ,GAAIa,UAAY,UAChBb,GAAIe,SAAS,IAAuBtb,GAAU8D,QAAQuD,UAAU,GA1C/C,EA0C+DsT,GAAY,EAAGA,GAAY,IAAuB3a,GAAU8D,QAAQuD,UAAU,GA1C7I,EA0C6JsT,IAE9KJ,GAAIa,UAAY,UAChBb,GAAIiB,YACJjB,GAAIkB,OAAO,EAAG,GACdlB,GAAImB,OAAOf,GAAYA,IACvBJ,GAAImB,OAAO,IAAuB1b,GAAU8D,QAAQuD,UAAU,GAhD7C,EAgD6DsT,GAAYA,IAC1FJ,GAAImB,OAAO,IAAuB1b,GAAU8D,QAAQuD,UAAU,GAjD7C,EAiD6DsT,GAAc,GAC5FJ,GAAI7O,OAEJ6O,GAAIa,UAAY,UAChBb,GAAIiB,YACJjB,GAAIkB,OAAO,EAAG,IAAuBzb,GAAU8D,QAAQuD,UAAU,GAtDhD,EAsDgEsT,IACjFJ,GAAImB,OAAO,IAAuB1b,GAAU8D,QAAQuD,UAAU,GAvD7C,EAuD6DsT,GAAc,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAvD9H,EAuD8IsT,IAC/JJ,GAAImB,OAAO,IAAuB1b,GAAU8D,QAAQuD,UAAU,GAxD7C,EAwD6DsT,GAAY,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAxD5H,EAwD4IsT,IAC7JJ,GAAImB,OAAOf,GAAY,IAAuB3a,GAAU8D,QAAQuD,UAAU,GAzDzD,EAyDyEsT,IAC1FJ,GAAI7O,OAGJ,IAAK,IAAI6P,EAAI,EAAGA,EAAIvb,GAAU8D,QAAQuD,UAAU,GAAIkU,IAChD,IAAK,IAAIF,EAAI,EAAGA,EAAIrb,GAAU8D,QAAQuD,UAAU,GAAIgU,IAAK,CACrD,IAAIlB,EAAMD,GAAO5U,MAAMtF,GAAUyY,MAAM8C,GAAGF,IACtClB,EAAIwB,UACJpB,GAAIqB,UAAUzB,EAAK,IAAuBkB,EAAEV,GAAY,IAAuBY,EAAEZ,GAAYD,GAASA,KAItH,SAASmB,KAA2B,IAAfC,EAAc,wDAC/B,GAAMd,IAAac,EAAnB,CAEArB,GAAOU,UAAU,EAAG,EAAGX,GAAUtc,MAAOsc,GAAUpZ,QAClD,IAAI2a,EAAMC,KAAKD,MAGXE,EAAO,GACPC,GAAW,EACftB,GAAcuB,SAAQ,SAAClX,EAAMqJ,GACrByN,EAAM9W,EAAKmX,OAASnX,EAAKoX,MAAMJ,EAAKnb,KAAKwN,GACzCrJ,EAAKqX,MACLJ,GAAW,EACXjX,EAAKqX,KAAM,GAGf7B,GAAOS,YAAc,EAAItX,KAAKkC,IAAI,GAAIiW,EAAM9W,EAAKmX,OAASnX,EAAKoX,MAC3DnC,GAAO5U,MAAML,EAAKsX,QAAQZ,UAC1BlB,GAAOmB,UAAU1B,GAAO5U,MAAML,EAAKsX,QAAS,IAAuBtX,EAAK3J,SAAS,GAAGqf,GAAY,IAAuB1V,EAAK3J,SAAS,GAAGqf,GAAYD,GAASA,OAEjKwB,GAAUjB,KACdgB,EAAKO,UACLP,EAAKE,SAAQ,SAAAtb,GAAC,OAAI+Z,GAAc6B,OAAO5b,EAAG,MAG1B,MAAZga,KACA7a,GAAUgZ,KAAO6B,GAAS6B,KAAKrc,KAAI,SAACvG,EAAGwU,GAAJ,OAAcxU,GAAI+gB,GAAS8B,GAAGrO,GAAOxU,GAAG8J,KAAKkC,IAAI,GAAIiW,EAAMlB,GAASuB,OAASvB,GAASwB,SACrHN,EAAMlB,GAASuB,MAAQvB,GAASwB,OAAMxB,GAAW,OAExC,MAAbC,KACA9a,GAAU8Y,KAAQgC,GAAU4B,KAAQ5B,GAAU8B,KAAOhZ,KAAKkC,IAAI,GAAIiW,EAAMjB,GAAUsB,OAAStB,GAAUuB,MAAU,GAAK,EAChHN,EAAMjB,GAAUsB,MAAQtB,GAAUuB,OAAMvB,GAAY,OAE5DL,GAAOS,YAAc,EACrB,IAAI2B,EAAU3C,GAAOlB,MAAMpV,KAAK+D,MAAsB,IAAhB3H,GAAU8Y,KAAW,IAAI,IAC3D+D,EAAQlB,UACRlB,GAAOmB,UAAUiB,EAAS,IAAuB7c,GAAUgZ,KAAK,GAAG2B,GAAY,IAAuB3a,GAAUgZ,KAAK,GAAG2B,GAAYD,GAASA,IAGjJD,GAAOjc,UAAY,SACnBic,GAAOqC,aAAe,SACtBrC,GAAOsC,KAAP,UAAiBrC,IAAjB,iBACA,IAAIsC,EAAM,GACVjC,GAAWoB,SAAQ,SAACc,EAAO3O,GACnByN,EAAMkB,EAAMb,OAASa,EAAMZ,MAAMJ,EAAKnb,KAAKwN,GAC/C,IAAI4O,EAAWtZ,KAAKkC,IAAI,GAAIiW,EAAMkB,EAAMb,OAASa,EAAMZ,MAEvD5B,GAAOS,YAActX,KAAKuZ,IAAID,EAAStZ,KAAKwZ,IAC5C3C,GAAOW,UAAY6B,EAAM7lB,MACzBqjB,GAAO4C,SAASJ,EAAMjkB,KAAM,IAAuBikB,EAAMK,GAAG,GAAG3C,GAAYD,IAAY,IAAuBuC,EAAMK,GAAG,GAAG3C,GAAYD,IAAYuC,EAAM7b,OAAO8b,MAEnKF,EAAIR,UACJQ,EAAIb,SAAQ,SAAAtb,GAAC,OAAIka,GAAW0B,OAAO5b,EAAG,MAEtC0c,sBAAsB1B,KAiD1B,SAAS2B,GAAWliB,EAAU2J,GAAyB,IAAnBmX,EAAkB,uDAAZJ,KAAKD,MAC3CnB,GAAc9Z,KAAK,CACfxF,SAAUA,EACVihB,OAAQvc,GAAUyY,MAAMnd,EAAS,IAAIA,EAAS,IAC9C8gB,MAAOA,EACPC,KAAM,IACNC,KAAK,IAETtc,GAAUyY,MAAMnd,EAAS,IAAIA,EAAS,IAAM2J,EAGhD,SAASwY,GAASzkB,EAAM5B,GACpB2jB,GAAWja,KAAK,CACZ9H,OACA5B,QACAkmB,GAAG,aAAKtd,GAAUgZ,MAClB5X,OAAQsZ,IACR0B,MAAOJ,KAAKD,MACZM,KAAM,MAId,SAASqB,GAASjX,GACA,GAAVA,IACAgX,GAAS,GAAD,OAAIhX,EAAS,EAAI,IAAM,KAAvB,OAA6B7C,KAAK+Z,IAAIlX,IAAWA,EAAS,EAAI,UAAY,YAClF4T,IAAM5T,GACGzG,GAAU8D,QAAQ4C,QACvB2T,GAAKra,GAAU8D,QAAQ4C,OAC3BrM,SAASC,eAAe,UAAUsjB,UAAYvD,IClMtD,IAAIre,GAAS6hB,IAAeC,EAAgB,CACxCC,WAAY,CAAC,eAEbC,IAAgB,EAWpB,SAASC,GAAsB9iB,GAC3BJ,YAAW,WACHiB,GAAOkiB,eACPzjB,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,EAAD,CAAeO,MAAOA,EAAMgjB,gBAAgC9jB,SAASC,eAAe,SAChJ0B,GAAOoiB,gBAEZ,KAfP3jB,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,EAAD,OAAgCP,SAASC,eAAe,SAEpH0B,GAAOwE,GAAG,WAAW,WACZwd,KACDA,IAAgB,EAChBvjB,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,GAAD,OAA0BP,SAASC,eAAe,aAatH0B,GAAOwE,GAAG,gBAAiByd,IAC3BjiB,GAAOwE,GAAG,kBAAmByd,IAC7BjiB,GAAOwE,GAAG,aAAcyd,IAExBjiB,GAAOwE,GAAG,OAAO,WAA4C,IAA3CrF,EAA0C,uDAApC,gBAAiBxC,EAAmB,uDAAb,SAC3CkB,EAAW,CACPM,MAAO,MACPxB,MAAOA,EACPM,YAAakC,OAIrBa,GAAOwE,GAAG,YAAV,sBAAuB,4BAAA1G,EAAA,sEACAD,EAAW,CAC1BlB,MAAO,+BACPM,YAAa,gDACbM,WAAY,oCACZC,aAAc,WACVsB,EAAOhD,cACPkE,GAAOC,KAAK,cAAZ,2BAA+B8H,IAA/B,IAAoDmC,QAAQ,QAPjD,OACfpL,EADe,mDAYvBkB,GAAOwE,GAAG,UAAU,SAAA6d,GAChBxkB,EAAW,CACPtB,UAAU,EACVI,MAAO,UACPM,YAAY,GAAD,OAAKolB,EAAL,+BACX9kB,WAAY,YACZC,aAAc,kBAAM6B,OAAOC,SAASC,eAI5CS,GAAOwE,GAAG,cAAc,WACpBzF,YAAW,WACPlB,EAAW,CACPlB,MAAO,gBACPM,YAAa,sGAGlB,QAGP+C,GAAOwE,GAAG,aAAa,eAGvBxE,GAAOwE,GAAG,eAAe,SAAAR,GAChBA,EAAUiG,SACXxL,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,GAAD,CAAOoF,UAAWA,OAA+B3F,SAASC,eAAe,SACzI6J,GAAiB6I,cAAchN,EAAU8D,YAG7C9H,GAAOwE,GAAG,cAAc,SAAAR,GAAS,OD4Cdse,EC5CqCte,ED4ClBue,EC5C6BviB,GAAOtD,GD6CtEmgB,GAAO0F,EACPve,GAAYse,EACC,OACb7jB,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,GAAD,CAAOoF,UAAWA,GAAWI,QAASke,EAAkBle,QAASyY,KAAMA,QAA0Bxe,SAASC,eAAe,SAAS,WAC1LggB,GAASjgB,SAASC,eAAe,SACjCigB,GAAMD,GAAOkE,WAAW,MACxBhE,GAAYngB,SAASC,eAAe,YACpCmgB,GAASD,GAAUgE,WAAW,MAC9BlE,GAAOpc,MAAQ,IAAuB8B,GAAU8D,QAAQuD,UAAU,GAvIrD,EAuIqEsT,GAClFL,GAAOlZ,OAAS,IAAuBpB,GAAU8D,QAAQuD,UAAU,GAxItD,EAwIsEsT,GACnFH,GAAUtc,MAAQ,IAAuB8B,GAAU8D,QAAQuD,UAAU,GAzIxD,EAyIwEsT,GACrFH,GAAUpZ,OAAS,IAAuBpB,GAAU8D,QAAQuD,UAAU,GA1IzD,EA0IyEsT,GAEtFtgB,SAASC,eAAe,mBAAmBsjB,UAAY5d,GAAU8D,QAAQqE,gBACzE9N,SAASC,eAAe,kBAAkBsjB,UAAY5d,GAAU8D,QAAQwB,MAAMgD,SAC9E+R,GAAKra,GAAU8D,QAAQwC,QACvBjM,SAASC,eAAe,UAAUsjB,UAAYvD,GAC9ChgB,SAASC,eAAe,aAAasjB,UAAY5d,GAAU8D,QAAQ4C,MAEnEuU,KACAD,IAAY,EACZa,KAEC,IAAInK,MAAM,mBAAoBE,UAxBvC,IAAmB0M,EAAmBC,KC3CtCviB,GAAOwE,GAAG,kBAAkB,SAAC4R,EAAS3W,GAAV,OAAmBhB,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,GAAD,CAAcwX,QAASA,EAAS3W,KAAMA,OAA0BpB,SAASC,eAAe,YACnM0B,GAAOwE,GAAG,QAAQ,SAAAlF,GAAQ,ODsE1B,SAAcA,GACVuf,GAAW,CACP6B,KAAM1c,GAAUgZ,KAChB2D,GAAIrhB,EACJ8gB,MAAOJ,KAAKD,MACZM,KAAM,KC3EgBoC,CAAcnjB,MAC5CU,GAAOwE,GAAG,OAAO,SAAAsY,GAAG,OD8EN6D,EC9EwB7D,OD+ElCgC,GAAY,CACR4B,KAAM1c,GAAU8Y,IAChB8D,MAAO,EAAIhZ,KAAK+Z,IAAI/Z,KAAK+Z,IAAIhB,EAAK3c,GAAU8Y,KAAO,MAAS6D,EAAK3c,GAAU8Y,IAAM,GAAK,EAAK,GAAK,EAAI,GACpGsD,MAAOJ,KAAKD,MACZM,KAAM,MALd,IAAcM,KC7Ed3gB,GAAOwE,GAAG,UAAU,SAAClF,EAAU2J,GAAX,OAAoBwZ,GAAoBnjB,EAAU2J,MACtEjJ,GAAOwE,GAAG,cAAc,SAAClF,EAAU2J,GAAX,OAAoBwZ,GAAoBnjB,EAAU2J,MAC1EjJ,GAAOwE,GAAG,UAAU,SAAAke,GAAM,OAAID,IAAmBC,MACjD1iB,GAAOwE,GAAG,QAAQ,SAAAme,GAAO,OAAIF,GAAkBE,MAC/C3iB,GAAOwE,GAAG,YDkHV,WACIid,GAAS,KAAM,WACfpjB,SAASC,eAAe,kBAAkBsjB,UAAY9S,OAAOzQ,SAASC,eAAe,kBAAkBsjB,WAAW,KCnHtH5hB,GAAOwE,GAAG,WAAW,SAAAwK,GAAC,ODsHtB,SAAiBA,GACb3Q,SAASC,eAAe,cAAcsjB,UAAY5S,ECvH5ByT,CAAiBzT,MAC3ChP,GAAOwE,GAAG,OAAO,SAAAwK,GAAC,ODyHLzK,ECzHsByK,OD0H/BhL,GAAUI,QAAQ2C,MAAK,SAAAzC,GAAC,OAAIA,EAAEC,KAAOA,KAAK8V,MAAO,GADrD,IAAa9V,KCxHbvE,GAAOwE,GAAG,YAAY,SAACqZ,EAASE,GAAV,OD4HtB,SAAkBF,EAASE,GACvBiB,IAAY,EAEZJ,GAAgB,GAChB5a,GAAUyY,MAAM0D,SAAQ,SAACpR,EAAKwQ,GAAN,OAAYxQ,EAAIoR,SAAQ,SAAClX,EAAMoW,GACvC,WAARpW,IACAjF,GAAUyY,MAAM8C,GAAGF,GAAKxB,EAAQpB,MAAM8C,GAAGF,GACzCmC,GAAW,CAACjC,EAAGF,GAAI,QAASW,KAAKD,MAAQ,IACzC/b,GAAUyY,MAAM8C,GAAGF,GAAK,SAExBxB,EAAQpB,MAAM8C,GAAGF,IAAMxB,EAAQ+E,cAAcrD,GAAGF,IAChDmC,GAAW,CAACjC,EAAGF,GAAIxB,EAAQ+E,cAAcrD,GAAGF,GAAIW,KAAKD,MAAQ,UAGrEd,KACAY,IAAY,GACZ3b,QAAQC,IAAIqa,GAAUqE,aACtBtE,GAAIqB,UAAUpB,GAAW,EAAG,GAE5B/f,IAASC,OAAO,eAACC,EAAA,EAAD,CAAepE,MAAOA,EAAtB,UAA6B,cAACqE,EAAA,EAAD,IAAe,cAAC,GAAD,CAASie,KAAMA,GAAMgB,QAASA,EAAS7Z,UAAWA,GAAW+Z,OAAQA,EAAQC,WAAYM,GAAOuE,iBAAiCxkB,SAASC,eAAe,SAErN0F,GAAY,KCjJ2Bye,CAAkB5E,EAASE,MACtE/d,GAAOwE,GAAG,UAAU,SAAA/E,GAAI,OAAIJ,OAAOC,SAASsS,KAAhB,YAA4BnS,MAEzCO,W","file":"static/js/main.353cdb39.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'light',\n\n        background: {\n            default: '#feffc7',\n        },\n\n        primary: {\n            main: '#d49a3d',\n        },\n    },\n\n    overrides: {\n        MuiButton: {\n            textPrimary: {\n                background: 'linear-gradient(45deg, #6b65cd 0%, #00d4ff 100%)',\n                borderRadius: 3,\n                border: 0,\n                color: 'white !important',\n                padding: '0 30px',\n                boxShadow: '0 3px 5px 2px #00d4ff4D',\n            },\n\n            textSecondary: {\n                background: 'linear-gradient(45deg, #00ffaf 0%, #3956c7 100%)',\n                borderRadius: 3,\n                border: 0,\n                color: 'white !important',\n                padding: '0 30px',\n                boxShadow: '0 3px 5px 2px #00ffaf4D',\n            }\n        },\n    },\n});\n\nexport default theme;","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport MUIDialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nconst useStyles = theme => ({\n    text: {\n        margin: 0,\n    },\n});\n\nclass Dialog extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: false,\n        };\n        this.handleOpen = this.handleOpen.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n    }\n\n    handleOpen() {\n        this.setState({open: true});\n    };\n\n    handleClose() {\n        this.setState({open: false});\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div>\n                <MUIDialog\n                    open={this.state.open}\n                    onClose={this.handleClose}\n                    disablePortal\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                    disableBackdropClick={this.props.required}\n                    disableEscapeKeyDown={this.props.required}\n                >\n                    <DialogTitle id=\"alert-dialog-title\">{this.props.title}</DialogTitle>\n                    <DialogContent dividers>\n                        <DialogContentText className={classes.text} id=\"alert-dialog-description\">\n                            {this.props.description}\n                        </DialogContentText>\n                        {this.props.children}\n                    </DialogContent>\n                    <DialogActions>\n                        {this.props.required ? null : (\n                            <Button onClick={this.handleClose} color=\"secondary\">\n                                {this.props.closeText ? this.props.closeText : 'Close'}\n                            </Button>\n                        )}\n                        {this.props.buttonText ? (\n                            <Button onClick={this.props.buttonAction} color=\"primary\">\n                                {this.props.buttonText}\n                            </Button>\n                        ) : null}\n                    </DialogActions>\n                </MUIDialog>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(useStyles)(Dialog);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Dialog from './';\n\nasync function showDialog(props = {}, children = null) {\n    return new Promise(async res => {\n        props = Object.assign({\n            title: 'Dialog title',\n            required: false,\n        }, props);\n    \n        let dialog;\n        let id = `dialog${props.layer ? props.layer : 0}`;\n        let element = document.getElementById(id);\n        if (element == null) {\n            element = document.createElement('div');\n            element.id = id;\n            document.getElementById('dialog').appendChild(element);\n        }\n        ReactDOM.render((\n            <ThemeProvider theme={theme}>\n                <CssBaseline />\n                <Dialog {...props} ref={element => dialog = element}>\n                    {children}\n                </Dialog>\n            </ThemeProvider>\n        ), element);\n        \n        if (!dialog) //if it didnt work,\n            setTimeout(async () => res(await showDialog(props, children)), 100); //try it again with a delay (yes i know i shouldnt but shut up it works)\n        else {\n            dialog.handleOpen();\n            res(dialog);\n        }\n    });\n}\n\nexport default showDialog;","import React from 'react';\nimport './centred.css';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction Connecting() {\n    return (\n        <div className=\"centred\">\n            <CircularProgress />\n            <h3>Attempting to connect to the Clueless Captains server...</h3>\n        </div>\n    );\n}\n\nexport default Connecting;","import React from 'react';\nimport './centred.css';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport Button from '@material-ui/core/Button';\n\nfunction ConnectFailed(props) {\n    return (\n        <div className=\"centred\">\n            <ClearIcon />\n            <h3>Failed to connect to the Clueless Captains server.</h3>\n            {props.error ? <p>Error: \"{props.error}\"</p> : null}\n            <h4>Are you offline? If not, the Clueless Captains server might be down.</h4>\n            <Button size=\"large\" color=\"primary\" onClick={() => window.location.reload(false)}>Retry</Button>\n        </div>\n    );\n}\n\nexport default ConnectFailed;","import React from 'react';\nimport socket from '../socket/';\nimport clsx from 'clsx';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport FilledInput from '@material-ui/core/FilledInput';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\n\nconst useStyles = theme => ({\n    margin: {\n        margin: theme.spacing(1),\n        marginBottom: 0,\n    },\n    joinLabel: {\n        display: 'inline-block',\n        marginTop: 22,\n        marginRight: 4,\n    },\n    textField: {\n        width: '18ch',\n    },\n    textInput: {\n        textTransform: 'uppercase',\n    },\n});\n\nclass CodeInput extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            code: '',\n        };\n        this.changeInput = this.changeInput.bind(this);\n        this.tryCode = this.tryCode.bind(this);\n    }\n\n    changeInput(event) {\n        let code = event.target.value; //get the code entered from the input element\n        code = code.replace(' ', ''); //remove spaces, if any\n        this.setState({code}); //store the code in the state, so that it can be shown on the input element and accessed when the join button is clicked\n    }\n\n    tryCode() {\n        socket.emit('joinMatch', this.state.code);\n    }\n\n    componentDidMount() {\n        /*if (window.location.search.startsWith('?$')) {\n            let p = window.location.search.slice('?$'.length);\n        } else */if (window.location.search.length > 1) {\n            this.setState({code: window.location.search.slice(1)}, () => this.tryCode());\n            window.history.pushState('', '', '/');\n        }\n    }\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div>\n                <label {...{}/*className={classes.joinLabel}*/} htmlFor=\"roomCodeInput\">Or, join by code:</label>\n                <br />\n\n                <FormControl className={clsx(classes.margin, classes.textField)} variant=\"filled\">\n                    <InputLabel htmlFor=\"roomCodeInput\">Room code</InputLabel>\n                    <FilledInput\n                        id=\"roomCodeInput\"\n                        type=\"text\"\n                        value={this.state.code}\n                        onChange={this.changeInput}\n                        autoComplete=\"off\"\n                        inputProps={{\n                            className: classes.textInput,\n                            maxLength: 6,\n                            onKeyDown: e => {if (e.key == 'Enter') this.tryCode()},\n                        }}\n                        endAdornment={\n                            <InputAdornment position=\"end\">\n                                <IconButton\n                                    aria-label=\"Join\"\n                                    onClick={this.tryCode}\n                                    edge=\"end\"\n                                >\n                                    <ArrowForwardIcon />\n                                </IconButton>\n                            </InputAdornment>\n                        }\n                    />\n                </FormControl>\n            </div>\n        );\n    }\n}\n\nexport default withStyles(useStyles)(CodeInput);","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport socket from '../socket';\n\nconst useStyles = makeStyles((theme) => ({\n    margin: {\n        margin: theme.spacing(1),\n    },\n    input: {\n        width: 170,\n    },\n    label: {\n        textAlign: 'center',\n    },\n}));\n\nfunction NameInput() {\n    const classes = useStyles();\n    const [name, setName] = React.useState(localStorage.name ? localStorage.name : '');\n    const changeName = (newName, first = false) => {\n        if (!first)\n            setName(newName);\n        localStorage.name = newName;\n        socket.emit('changeName', newName);\n    }\n    changeName(name, true);\n\n    const handleChange = event => changeName(event.target.value)\n\n    return (\n        <div className={classes.margin}>\n            <Grid container justify=\"center\" spacing={1} alignItems=\"flex-end\">\n                <Grid item>\n                    <AccountCircle />\n                </Grid>\n                <Grid item>\n                    <TextField\n                        id=\"nameInput\"\n                        label=\"Your name\"\n                        value={name}\n                        onChange={handleChange}\n                        autoComplete=\"off\"\n                        inputProps={{\n                            className: classes.input,\n                            maxLength: 6,\n                            onKeyDown: e => {if (e.key == 'Enter') document.activeElement.blur()},\n                        }}\n                        InputLabelProps={{\n                            className: classes.label,\n                        }}\n                    />\n                </Grid>\n            </Grid>\n        </div>\n    );\n}\n\nexport default NameInput","import React from 'react';\nimport { ButtonGroup, Button } from '@material-ui/core';\nimport playerColours from '../Match/playerColours.json';\nimport socket from '../socket';\n\nfunction saveColor(num) {\n}\n\nfunction ColorPicker(props) {\n    const [selected, setSelected] = React.useState(props.selected);\n    const [taken, setTaken] = React.useState([]);\n\n    React.useEffect(() => {\n        socket.emit('changeColor', selected);\n    });\n\n    if (props.matchInfo != null) {\n        React.useEffect(() => {\n            let showTaken = matchInfo => {\n                console.log(':O');\n                setTaken(matchInfo.players.map(p => p.num));\n            };\n            socket.on('matchUpdate', showTaken);\n            showTaken(props.matchInfo);\n            return () => socket.off('matchUpdate', showTaken);\n        }, []);\n    }\n\n    return (\n        <ButtonGroup orientation=\"vertical\">\n            {(() => {\n                let buttonGroups = [];\n                for (let i = 0; i < 16; i+=4) {\n                    buttonGroups.push(<ButtonGroup>{(() => {\n                        let buttons = [];\n                        for (let k = i; k < i+4; k++) {\n                            buttons.push(\n                                <Button\n                                    style={{color: 'white', backgroundColor: playerColours[k], height:'2.5em', width: 0}}\n                                    onClick={() => {\n                                        if (!taken.includes(k)) {\n                                            localStorage.cccolor = String(k);\n                                            setSelected(k);\n                                        }\n                                    }}\n                                >{selected == k ? '✓' : (taken.includes(k) ? '✕' : ' ')}</Button>\n                            );\n                        }\n                        return buttons;\n                    })()}</ButtonGroup>);\n                }\n                return buttonGroups;\n            })()}\n        </ButtonGroup>\n    );\n}\n\nexport default ColorPicker;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Container, Draggable } from 'react-smooth-dnd';\nimport arrayMove from 'array-move';\nimport { IconButton, List, ListItem, ListItemIcon, ListItemText, ListItemSecondaryAction, ButtonGroup, Button, Divider, Tooltip, Typography, TextField } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport showDialog from '../Dialog/show';\nimport copy from 'clipboard-copy';\nimport defaultPresets from './defaultPresets.json';\nimport defaultMatchOptions from './defaultMatchOptions.json';\n\nconst copyHelp = 'Copy the preset code of the selected preset to the clipboard';\nconst saveHelp = 'Save the current match options to the selected preset';\nconst useStyles = makeStyles((theme) => ({\n    list: {\n        height: 300,\n        width: '100%',\n        overflowY: 'scroll',\n        border: '1px solid #00000030',\n        borderRadius: 5,\n    },\n    actions: {\n        width: '100%',\n        display: 'flex',\n        '& > *': {\n            flex: 1,\n        },\n    },\n}));\n\nfunction PresetMenu(props) {\n    const classes = useStyles();\n\n    if (!localStorage.hasOwnProperty('ccpresets'))\n        localStorage.ccpresets = JSON.stringify(defaultPresets);\n\n    const [enteredPresetCode, setEnteredPresetCode] = React.useState('');\n    const [selected, setSelected] = React.useState(localStorage.ccpreset == 'null' ? null : localStorage.ccpreset);\n    const [items, setItems] = React.useState(JSON.parse(localStorage.ccpresets));\n    const [copyTitle, setCopyTitle] = React.useState(copyHelp);\n    const [saveTitle, setSaveTitle] = React.useState(saveHelp);\n\n    const onDrop = ({ removedIndex, addedIndex }) => {\n        localStorage.ccpresets = JSON.stringify(arrayMove(items, removedIndex, addedIndex));\n        loadPresets();\n    };\n\n    let loadPresets = () => setItems(JSON.parse(localStorage.ccpresets));\n\n    React.useEffect(() => {\n        if (!items.find(item => item.id == selected)) {\n            setSelected(null);\n            localStorage.ccpreset = null;\n        }\n    }, []);\n\n    return (\n        <div>\n            <List className={classes.list}>\n                <Container dragHandleSelector=\".drag-handle\" lockAxis=\"y\" onDrop={onDrop}>\n                    {items.map(({ id, name }) => (\n                        <Draggable key={id}>\n                            <ListItem button className=\"drag-handle\" onClick={() => setSelected(selected == id ? null : id)} selected={selected == id}>\n                                <ListItemText primary={name} />\n                            </ListItem>\n                        </Draggable>\n                    ))}\n                </Container>\n            </List>\n            <ButtonGroup variant=\"contained\" color=\"primary\" className={classes.actions}>\n                <Tooltip title=\"Create a new empty preset\">\n                    <Button onClick={async () => {\n                        let dialog = await showDialog({\n                            title: 'Naming new preset...',\n                            description: 'What should the new preset be called?',\n                            buttonText: 'Create',\n                            layer: 1,\n                            buttonAction: () => {\n                                let presets = JSON.parse(localStorage.ccpresets);\n                                presets.push({\n                                    id: String(Math.random()).slice(2),\n                                    name: document.getElementById('presetName').value,\n                                    options: defaultMatchOptions,\n                                });\n                                localStorage.ccpresets = JSON.stringify(presets);\n                                loadPresets();\n                                dialog.handleClose();\n                            },\n                        }, <TextField\n                            label=\"Preset name\"\n                            id=\"presetName\"\n                            defaultValue=\"\"\n                            variant=\"outlined\"\n                        />);\n                    }}>New</Button>\n                </Tooltip>\n                <Tooltip title=\"Use the match options saved in this preset\">\n                    <Button disabled={!props.editable || selected == null} onClick={() => {\n                        props.showMatchOptions({...props, options: items.find(item => item.id == selected).options});\n                        localStorage.ccpreset = selected;\n                    }}>Load</Button>\n                </Tooltip>\n                <Tooltip title={saveTitle}>\n                    <Button disabled={selected == null} onClick={() => {\n                        let presets = JSON.parse(localStorage.ccpresets);\n                        presets.find(preset => preset.id == selected).options = props.options;\n                        localStorage.ccpresets = JSON.stringify(presets);\n                        loadPresets();\n                        setSaveTitle('Saved preset!');\n                        setTimeout(() => {\n                            setSaveTitle(saveHelp);\n                        }, 3000);\n                    }}>Save</Button>\n                </Tooltip>\n                <Tooltip title={copyTitle}>\n                    <Button disabled={selected == null} onClick={() => {\n                        copy(btoa(JSON.stringify(items.find(item => item.id == selected).options)));\n                        setCopyTitle('Copied preset code to clipboard!');\n                        setTimeout(() => {\n                            setCopyTitle(copyHelp);\n                        }, 3000);\n                    }}>Export</Button>\n                </Tooltip>\n                <Tooltip title=\"Delete the selected preset\">\n                    <Button disabled={selected == null} onClick={async () => {\n                        let dialog = await showDialog({\n                            title: 'Really delete preset?',\n                            description: 'Are you sure you want to delete this preset?',\n                            buttonText: 'Delete',\n                            closeText: 'Cancel',\n                            layer: 1,\n                            buttonAction: () => {\n                                localStorage.ccpresets = JSON.stringify(JSON.parse(localStorage.ccpresets).filter(preset => preset.id != selected));\n                                loadPresets();\n                                if (localStorage.ccpreset == selected)\n                                    localStorage.ccpreset = null;\n                                setSelected(null);\n                                dialog.handleClose();\n                            },\n                        });\n                    }}>Delete</Button>\n                </Tooltip>\n            </ButtonGroup>\n\n            <Divider style={{marginTop: 32, marginBottom: 24}} />\n\n            {/*<Typography variant=\"h6\">Preset code loader</Typography>*/}\n            <div style={{display: 'flex', flexDirection: 'row'}}>\n                <TextField\n                    label=\"Preset code loader\"\n                    defaultValue=\"\"\n                    value={enteredPresetCode}\n                    onChange={e => setEnteredPresetCode(e.target.value)}\n                    helperText=\"Paste your preset code here and click Load to load it\"\n                    variant=\"outlined\"\n                    disabled={!props.editable}\n                />\n                <Button color={props.editable ? 'primary' : 'default'} disabled={!props.editable} onClick={() => {\n                    try {\n                        props.showMatchOptions({...props, options: {...props.options, ...JSON.parse(atob(enteredPresetCode))}});\n                    } catch(e) {\n                        alert(e);\n                    }\n                }}>Load</Button>\n            </div>\n        </div>\n    );\n}\n\nexport default PresetMenu;","import React from 'react';\nimport { Typography, Divider, FormControl, Select, MenuItem, InputLabel, FormLabel, Slider, Tooltip, IconButton, TextField, Grid, Switch, Button, ButtonGroup, FormControlLabel, Checkbox, RadioGroup, Radio, FormHelperText } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PublicIcon from '@material-ui/icons/Public';\nimport LockIcon from '@material-ui/icons/Lock';\nimport LinkIcon from '@material-ui/icons/Link';\nimport showDialog from '../Dialog/show';\nimport PresetMenu from './PresetMenu';\nimport socket from '../socket';\nimport defaultMatchOptions from './defaultMatchOptions.json';\nimport { TextFieldsOutlined } from '@material-ui/icons';\nconst allowedPlayers = [1, 8];\nconst maxGamesAllowed = [1, 4];\n\nconst useStyles = makeStyles((theme) => ({\n    formControl: {\n        margin: theme.spacing(1),\n    },\n    select: {\n        width: 200,\n    },\n    smallSelect: {\n        width: 50,\n    },\n    tile: {\n        width: 50,\n        borderRadius: 5,\n    },\n    card: {\n        width: 70,\n        borderRadius: 3,\n    },\n}));\n\nconst tilesAvailable = [ //[name:string, at least 1 required:boolean]\n    ['treasure', true],\n    ['rock', false],\n    ['iceberg', false],\n    ['waves', false],\n    ['storm', false],\n    ['alcohol', false],\n    ['whirlpoolleft', false],\n    ['whirlpoolright', false],\n];\nconst cardsAvailable = [ //[name:string, non-removable:boolean]\n    ['n1', true],\n    ['n2', true],\n    ['n3', true],\n    ['n4', true],\n    ['ne1', true],\n    ['ne2', true],\n    ['ne3', true],\n    ['ne4', true],\n    ['e1', true],\n    ['e2', true],\n    ['e3', true],\n    ['e4', true],\n    ['se1', true],\n    ['se2', true],\n    ['se3', true],\n    ['se4', true],\n    ['s1', true],\n    ['s2', true],\n    ['s3', true],\n    ['s4', true],\n    ['sw1', true],\n    ['sw2', true],\n    ['sw3', true],\n    ['sw4', true],\n    ['w1', true],\n    ['w2', true],\n    ['w3', true],\n    ['w4', true],\n    ['nw1', true],\n    ['nw2', true],\n    ['nw3', true],\n    ['nw4', true],\n    ['forward1', true],\n    ['forward2', true],\n    ['forward3', true],\n    ['forward4', true],\n    ['turnl1', true],\n    ['turnl2', true],\n    ['turnl3', true],\n    ['turnr1', true],\n    ['turnr2', true],\n    ['turnr3', true],\n    ['turnr4', true],\n    ['seasickness', true],\n    ['persist', true],\n    ['relocate', true],\n    ['chaos', true],\n    ['bravery', true],\n    ['compass0', true],\n    ['compass1', true],\n    ['compass2', true],\n    ['compass3', true],\n    ['compass4', true],\n    ['compass5', true],\n    ['compass6', true],\n    ['compass7', true],\n    ['hammer', true],\n    ['nail', true],\n    ['hammernail', false],\n    ['lookout', true],\n    ['reinforce', true],\n    ['matchstick', true],\n    ['block', true],\n    ['mute', true],\n    ['brig', true],\n    ['captain', true],\n    ['investigate', false],\n    ['mutiny', false],\n]\n\nlet optionsToLoad = false;\nif (localStorage.ccpresets && localStorage.ccpreset) {\n    let preset = JSON.parse(localStorage.ccpresets).find(preset => preset.id == localStorage.ccpreset);\n    if (preset)\n        optionsToLoad = preset.options;\n}\nconsole.log(optionsToLoad);\n\nvar options = {\n    ...defaultMatchOptions,\n    ...optionsToLoad ? optionsToLoad : {},\n    tiles: {...defaultMatchOptions.tiles, ...optionsToLoad ? optionsToLoad.tiles : {},},\n    cards: {...defaultMatchOptions.cards, ...optionsToLoad ? optionsToLoad.cards : {},},\n};\n\nfor (let i in options) {\n    if (typeof options[i] == 'object' && !Array.isArray(options[i]))\n        options[i] = {\n            ...localStorage.MatchOptions ? JSON.parse(localStorage.MatchOptions)[i] : {},\n            ...options[i]\n        }\n}\n\nfunction NumberTweaker(props) {\n    return (\n        <ButtonGroup size=\"small\">\n            {props.bigChange ? <Button onClick={() => props.fn(-10)} disabled={props.disabled || props.state == props.min}>- -</Button> : null}\n            <Button onClick={() => props.fn(-1)} disabled={props.disabled || props.state == props.min}>-</Button>\n            <Button disabled>{props.state}</Button>\n            <Button onClick={() => props.fn(+1)} disabled={props.disabled || props.state == props.max}>+</Button>\n            {props.bigChange ? <Button onClick={() => props.fn(+10)} disabled={props.disabled || props.state == props.max}>++</Button> : null}\n        </ButtonGroup>\n    );\n}\n\nfunction MatchOptions(props) {\n    const classes = useStyles();\n\n    if (props.options)\n        options = props.options;\n\n    const sendUpdate = () => {\n        if (props.editable && props.started)\n            socket.emit('updateOptions', options);\n    }\n    const [publicity, setPublicity] = React.useState(options.public);\n    const handlePublicityChange = event => {\n        options.public = !publicity;\n        setPublicity(!publicity);\n        sendUpdate();\n    };\n    const [players, setPlayers] = React.useState(options.players);\n    const changePlayers = change => {\n        options.players += change;\n        if (options.players < allowedPlayers[0]) options.players = allowedPlayers[0];\n        if (options.players > allowedPlayers[1]) options.players = allowedPlayers[1];\n        setPlayers(options.players);\n        resetCards();\n        sendUpdate();\n    };\n    const [startHP, setStartHP] = React.useState(options.startHP);\n    const changeStartHP = change => {\n        options.startHP += change;\n        if (options.startHP < 1) options.startHP = 1;\n        if (options.startHP > 999) options.startHP = 999;\n        if (options.startHP > options.maxHP) changeMaxHP(options.startHP - options.maxHP);\n        setStartHP(options.startHP);\n        sendUpdate();\n    };\n    const [maxHP, setMaxHP] = React.useState(options.maxHP);\n    const changeMaxHP = change => {\n        options.maxHP += change;\n        if (options.maxHP < 1) options.maxHP = 1;\n        if (options.maxHP > 999) options.maxHP = 999;\n        if (options.startHP > options.maxHP) changeStartHP(options.maxHP - options.startHP);\n        setMaxHP(options.maxHP);\n        sendUpdate();\n    };\n    const [rockDamage, setRockDamage] = React.useState(options.rockDamage);\n    const changeRockDamage = (event, value) => {\n        value = Number(value);\n        options.rockDamage = value;\n        setRockDamage(value);\n        sendUpdate();\n    };\n    const [iceDamage, setIceDamage] = React.useState(options.iceDamage);\n    const changeIceDamage = (event, value) => {\n        value = Number(value);\n        options.iceDamage = value;\n        setIceDamage(value);\n        sendUpdate();\n    };\n    const [leaveDamage, setLeaveDamage] = React.useState(options.leaveDamage);\n    const changeLeaveDamage = (event, value) => {\n        value = Number(value);\n        options.leaveDamage = value;\n        setLeaveDamage(value);\n        sendUpdate();\n    };\n    const [treasureHeal, setTreasureHeal] = React.useState(options.treasureHeal);\n    const changeTreasureHeal = (event, value) => {\n        value = Number(value);\n        options.treasureHeal = value;\n        setTreasureHeal(value);\n        sendUpdate();\n    };\n    const [boardSize, setBoardSize] = React.useState([...options.boardSize]);\n    const changeBoardSize = (value, axis) => {\n        options.boardSize[axis] = value;\n        setBoardSize([...options.boardSize]);\n        resetTiles();\n        for (let i in options.startPos)\n            if (options.startPos[i] != null)\n                options.startPos[i] = Math.round((options.boardSize[i]-1)/2);\n        setStartPos([...options.startPos]);\n        sendUpdate();\n    };\n    const [startPos, setStartPos] = React.useState([...options.startPos]);\n    const changeStartPos = (value, axis) => {\n        options.startPos[axis] = value;\n        setStartPos([...options.startPos]);\n        sendUpdate();\n    };\n    const [startDir, setStartDir] = React.useState(options.startDir);\n    const handleStartDirChange = event => {\n        options.startDir = event.target.value;\n        setStartDir(event.target.value);\n        sendUpdate();\n    };\n    const [revealTiles, setRevealTiles] = React.useState(options.revealTiles);\n    const handleRevealTilesChange = event => {\n        options.revealTiles = !revealTiles;\n        setRevealTiles(!revealTiles);\n        sendUpdate();\n    };\n    const [tiles, setTiles] = React.useState(options.tiles);\n    const changeTiles = (change, tile) => {\n        options.tiles[tile] += change;\n        setTiles({...tiles, [tile]: options.tiles[tile]});\n        if (options.treasuresNeeded > options.tiles.treasure) changeTreasuresNeeded(options.treasuresNeeded - options.tiles.treasure);\n        sendUpdate();\n    };\n    const [treasuresNeeded, setTreasuresNeeded] = React.useState(options.treasuresNeeded);\n    const changeTreasuresNeeded = change => {\n        options.treasuresNeeded += change;\n        if (options.treasuresNeeded < 1) options.treasuresNeeded = 1;\n        if (options.treasuresNeeded > options.tiles.treasure) options.treasuresNeeded = options.tiles.treasure;\n        if (options.treasuresNeeded > options.tiles.treasure) changeTreasuresNeeded(options.treasuresNeeded - options.tiles.treasure);\n        setTreasuresNeeded(options.treasuresNeeded);\n        sendUpdate();\n    };\n    const resetTiles = () => {\n        let newTiles = {...tiles, ...(options.boardSize[0]**options.boardSize[1] > Object.values(defaultMatchOptions.tiles).reduce((a,b)=>a+b) ? defaultMatchOptions.tiles : Object.fromEntries(Object.entries(defaultMatchOptions.tiles).map(e => [e[0], tilesAvailable.find(t => t[0] == e[0])[1] ? 1 : 0])))};\n        setTiles(newTiles);\n        options.tiles = {...newTiles};\n    };\n    const [handSize, setHandSize] = React.useState(options.handSize);\n    const changeHandSize = (event, value) => {\n        value = Number(value);\n        options.handSize = value;\n        setHandSize(value);\n        if (options.minPlayed > value)\n            changeMinPlayed({target: {value}});\n        if (options.maxPlayed > value)\n            changeMaxPlayed({target: {value}});\n        resetCards();\n        sendUpdate();\n    };\n    const [minPlayed, setMinPlayed] = React.useState(options.minPlayed);\n    const changeMinPlayed = event => {\n        options.minPlayed = event.target.value;\n        setMinPlayed(event.target.value);\n        sendUpdate();\n    };\n    const [maxPlayed, setMaxPlayed] = React.useState(options.maxPlayed);\n    const changeMaxPlayed = event => {\n        options.maxPlayed = event.target.value;\n        setMaxPlayed(event.target.value);\n        if (options.minPlayed > options.maxPlayed)\n            changeMinPlayed({target: {value: event.target.value}});\n        sendUpdate();\n    };\n    const [topPlayed, setTopPlayed] = React.useState(options.topPlayed);\n    const changeTopPlayed = (event, value) => {\n        value = Number(value);\n        options.topPlayed = value;\n        setTopPlayed(value);\n        resetCards();\n        sendUpdate();\n    };\n    const [evilsSeeCards, setEvilsSeeCards] = React.useState(options.evilsSeeCards);\n    const evilsSeeCardsChange = event => {\n        options.evilsSeeCards = !evilsSeeCards;\n        setEvilsSeeCards(!evilsSeeCards);\n        sendUpdate();\n    };\n    const [cards, setCards] = React.useState(options.cards);\n    const changeCards = (change, card) => {\n        options.cards[card] += change;\n        setCards({...cards, [card]: options.cards[card]});\n        sendUpdate();\n    };\n    const resetCards = () => {\n        if (cardsAvailable.filter(card => card[1]).map(card => options.cards[card[0]]).reduce((a,b)=>a+b) <= options.players*options.handSize+options.topPlayed) {\n            let newCards = {...cards, ...defaultMatchOptions.cards};\n            setCards(newCards);\n            options.cards = {...newCards};\n        }\n    };\n    const [votingAnonymity, setVotingAnonymity] = React.useState(options.votingAnonymity);\n    const handleVotingAnonymityChange = event => {\n        options.votingAnonymity = event.target.value;\n        setVotingAnonymity(event.target.value);\n        sendUpdate();\n    };\n    const [mode, setMode] = React.useState(options.mode);\n    const handleModeChange = event => {\n        options.mode = event.target.value;\n        setMode(event.target.value);\n        sendUpdate();\n    };\n    const [nameConvention, setNameConvention] = React.useState(options.names);\n    const handleNameConventionChange = event => {\n        options.names = event.target.value;\n        setNameConvention(event.target.value);\n        sendUpdate();\n    };\n    \n    let updateOptions = () => {\n        setPublicity(options.public);\n        setPlayers(options.players);\n        setStartHP(options.startHP);\n        setMaxHP(options.maxHP);\n        setRockDamage(options.rockDamage);\n        setIceDamage(options.iceDamage);\n        setLeaveDamage(options.leaveDamage);\n        setTreasureHeal(options.treasureHeal);\n        setBoardSize(options.boardSize);\n        setStartPos(options.startPos);\n        setStartDir(options.startDir);\n        setRevealTiles(options.revealTiles);\n        setTiles({...tiles, ...options.tiles});\n        setTreasuresNeeded(options.treasuresNeeded);\n        setTopPlayed(options.topPlayed);\n        setHandSize(options.handSize);\n        setMinPlayed(options.minPlayed);\n        setMaxPlayed(options.maxPlayed);\n        setCards({...cards, ...options.cards});\n        setVotingAnonymity(options.votingAnonymity);\n        setMode(options.mode);\n        setNameConvention(options.names);\n    };\n    React.useEffect(() => {\n        sendUpdate();\n        window.addEventListener('matchOptionsChanged', updateOptions);\n        return () => window.removeEventListener('matchOptionsChanged', updateOptions);\n    }, []);\n\n    let nrCards = cardsAvailable.filter(card => card[1]).map(card => cards[card[0]]).reduce((a,b)=>a+b);\n\n    return (\n        <div>\n            <Button color=\"secondary\" onClick={async () => {\n                dialog = await showDialog({\n                    title: 'Option presets',\n                    buttonText: 'Back',\n                    buttonAction: () => showMatchOptions(props),\n                }, <PresetMenu {...props} showMatchOptions={showMatchOptions} options={options} />);\n            }}>Presets</Button>\n            {/*<Button color={props.editable ? 'primary' : 'default'} size=\"small\" disabled={!props.editable} onClick={() => {\n                options = {...options, ...defaultMatchOptions};\n                updateOptions();\n                sendUpdate();\n            }}>Reset to defaults</Button>\n            <Button color=\"secondary\" size=\"small\" onClick={() => {\n                presetLoader(props);\n            }}>Save/Load preset</Button>\n            <Button color=\"primary\" size=\"small\" onClick={() => {\n                localStorage.MatchOptions = JSON.stringify(options);\n            }}>Save these options</Button>*/}\n            <Divider style={{marginTop: 16}} />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Privacy</FormLabel>\n                <Typography component=\"div\">\n                    <Grid component=\"label\" container alignItems=\"center\" spacing={1}>\n                        <Grid item><LockIcon /></Grid>\n                        <Grid item>\n                            <Switch color=\"primary\" checked={publicity} onChange={handlePublicityChange} disabled={!props.editable} />\n                        </Grid>\n                        <Grid item><PublicIcon /></Grid>\n                    </Grid>\n                </Typography>\n\n                {props.started ? <Button color={props.editable ? 'primary' : 'disabled'} size=\"small\" onClick={() => socket.emit('newRoomCode')} disabled={!props.editable}>New room code</Button> : null}\n            </FormControl>\n\n            <Divider />\n            \n            <FormControl className={classes.formControl}>\n                <FormLabel style={{marginBottom: 5}}>Max players</FormLabel>\n                <NumberTweaker fn={changePlayers} min={allowedPlayers[0]} max={allowedPlayers[1]} state={players} disabled={props.started} bigChange />\n            </FormControl>\n            <Typography>Changing this may also reset the amounts of each type of cards. This cannot be changed in the lobby.</Typography>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel style={{marginBottom: 5}}>Starting ship HP</FormLabel>\n                <NumberTweaker fn={changeStartHP} min={1} max={999} state={startHP} disabled={!props.editable} bigChange />\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel style={{marginBottom: 5}}>Maximum ship HP</FormLabel>\n                <NumberTweaker fn={changeMaxHP} min={1} max={999} state={maxHP} disabled={!props.editable} bigChange />\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>HP lost per rock hit</FormLabel>\n                <RadioGroup value={rockDamage} onChange={changeRockDamage} row>\n                    {[1, 2, 3, 4].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>HP lost per iceberg hit</FormLabel>\n                <RadioGroup value={iceDamage} onChange={changeIceDamage} row>\n                    {[1, 2, 3, 4].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>HP lost when ship tries to move out of the board</FormLabel>\n                <RadioGroup value={leaveDamage} onChange={changeLeaveDamage} row>\n                    {[0, 1, 2, 3].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>HP healed per treasure found</FormLabel>\n                <RadioGroup value={treasureHeal} onChange={changeTreasureHeal} row>\n                    {[0, 1, 2, 3].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Board Size</FormLabel>\n            </FormControl>\n            <br />\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={boardSize[1]}\n                    onChange={e => changeBoardSize(e.target.value, 1)}\n                    displayEmpty\n                    className={classes.smallSelect}\n                    disabled={!props.editable}\n                >\n                    {[2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Width</FormHelperText>\n            </FormControl>\n            <span style={{\n                position: 'relative',\n                top: 10,\n                fontSize: 35,\n            }}>x</span>\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={boardSize[0]}\n                    onChange={e => changeBoardSize(e.target.value, 0)}\n                    displayEmpty\n                    className={classes.smallSelect}\n                    disabled={!props.editable}\n                >\n                    {[2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15].map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Height</FormHelperText>\n            </FormControl>\n            <span style={{\n                position: 'relative',\n                top: 14,\n                fontSize: 16,\n            }}>= {boardSize[1] * boardSize[0]} tiles</span>\n            <Typography>Changing this may also reset the amounts of each type of tile and the ship's starting location.</Typography>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Ship starting location</FormLabel>\n            </FormControl>\n            <br />\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={startPos[1]}\n                    onChange={e => changeStartPos(e.target.value, 1)}\n                    displayEmpty\n                    className={classes.smallSelect}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={null}>Random</MenuItem>\n                    {Array(boardSize[1]).fill(null).map((i, e) => e).map(n => <MenuItem key={n} value={n}>{n+1}</MenuItem>)}\n                </Select>\n                <FormHelperText>X</FormHelperText>\n            </FormControl>\n            <span style={{\n                position: 'relative',\n                top: 0,\n                fontSize: 35,\n            }}>, </span>\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={startPos[0]}\n                    onChange={e => changeStartPos(e.target.value, 0)}\n                    displayEmpty\n                    className={classes.smallSelect}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={null}>Random</MenuItem>\n                    {Array(boardSize[0]).fill(null).map((i, e) => e).map(n => <MenuItem key={n} value={n}>{n+1}</MenuItem>)}\n                </Select>\n                <FormHelperText>Y</FormHelperText>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Ship starting direction</FormLabel>\n                <Select\n                    value={startDir}\n                    onChange={handleStartDirChange}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={0}>Random (Any)</MenuItem>\n                    <MenuItem value={1}>Random (Straight)</MenuItem>\n                    <MenuItem value={2}>Random (Diagonal)</MenuItem>\n                    <MenuItem value={3}>N</MenuItem>\n                    <MenuItem value={4}>NE</MenuItem>\n                    <MenuItem value={5}>E</MenuItem>\n                    <MenuItem value={6}>SE</MenuItem>\n                    <MenuItem value={7}>S</MenuItem>\n                    <MenuItem value={8}>SW</MenuItem>\n                    <MenuItem value={9}>W</MenuItem>\n                    <MenuItem value={10}>NW</MenuItem>\n                </Select>\n                <FormHelperText>{(() => ({\n                    0: 'Ship can start facing any direction',\n                    1: 'Ship can start facing any of the following directions: N, E, S, W',\n                    2: 'Ship can start facing any of the following directions: NE, SE, SW, NW',\n                    3: '↑',\n                    4: '↗',\n                    5: '→',\n                    6: '↘',\n                    7: '↓',\n                    8: '↙',\n                    9: '←',\n                    10: '↖',\n                }[startDir]))()}</FormHelperText>\n            </FormControl>\n\n            <Divider />\n\n            <FormControlLabel\n                control={<Checkbox color=\"primary\" checked={revealTiles} onChange={handleRevealTilesChange} disabled={!props.editable} />}\n                label=\"Play with all tiles revealed?\"\n                labelPlacement=\"start\"\n            />\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Tiles</FormLabel>\n                <div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'space-evenly'}}>\n                    {\n                        tilesAvailable.map(tile => <span style={{marginRight: 5, textAlign: 'center'}}>\n                            <img src={`/tiles/${tile[0]}.png`} class={classes.tile} />\n                            <br />\n                            <NumberTweaker fn={change => changeTiles(change, tile[0])} min={tile[1] ? 1 : 0} max={(boardSize[0]*boardSize[1])-(Object.values(tiles).reduce((a,b)=>a+b)-tiles[tile[0]])-1} state={tiles[tile[0]]} disabled={!props.editable} />\n                        </span>)\n                    }\n                </div>\n                <Typography>There will be {(boardSize[0]*boardSize[1])-Object.values(tiles).reduce((a,b)=>a+b)} water tile(s).</Typography>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel style={{marginBottom: 5}}>Treasures needed for pirates to win</FormLabel>\n                <NumberTweaker fn={changeTreasuresNeeded} min={1} max={tiles.treasure} state={treasuresNeeded} disabled={!props.editable} bigChange />\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Cards played from the top of the deck each turn</FormLabel>\n                <RadioGroup value={topPlayed} onChange={changeTopPlayed} row>\n                    {[0, 1, 2, 3].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n                <Typography>Changing this may also reset the amounts of each type of cards.</Typography>\n            </FormControl>\n\n            {topPlayed > 0 ? <div>\n                <Divider />\n\n                <FormControlLabel\n                    control={<Checkbox color=\"primary\" checked={evilsSeeCards} onChange={evilsSeeCardsChange} disabled={!props.editable} />}\n                    label=\"Tell sea monsters which cards were played from the top of the deck?\"\n                    labelPlacement=\"start\"\n                />\n            </div> : null}\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Cards drawn per hand</FormLabel>\n                <RadioGroup value={handSize} onChange={changeHandSize} row>\n                    {[1, 2, 3, 4, 5].map(n => <FormControlLabel value={n} key={n} control={<Radio color=\"primary\" disabled={!props.editable} />} label={n} />)}\n                </RadioGroup>\n                <Typography>Changing this may also reset the amounts of each type of cards. A deck with at least {players*handSize+topPlayed} non-removable cards is required (also changes based on max players and \"Cards played from the top of the deck each turn\").</Typography>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Minimum and maximum cards played per player per turn</FormLabel>\n            </FormControl>\n            <br />\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={minPlayed}\n                    onChange={changeMinPlayed}\n                    displayEmpty\n                    className={classes.smallSselect}\n                    disabled={!props.editable}\n                >\n                    {[0, 1, 2, 3, 4, 5].filter(n => n <= handSize && n <= maxPlayed).map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Min</FormHelperText>\n            </FormControl>\n            <span style={{\n                position: 'relative',\n                top: 10,\n                fontSize: 35,\n            }}>/</span>\n            <FormControl className={classes.formControl}>\n                <Select\n                    value={maxPlayed}\n                    onChange={changeMaxPlayed}\n                    displayEmpty\n                    className={classes.smallSselect}\n                    disabled={!props.editable}\n                >\n                    {[1, 2, 3, 4, 5].filter(n => n <= handSize).map(n => <MenuItem key={n} value={n}>{n}</MenuItem>)}\n                </Select>\n                <FormHelperText>Max</FormHelperText>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Cards</FormLabel>\n                <div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'space-evenly'}}>\n                    {\n                        cardsAvailable.map(card => <span style={{marginRight: 5, textAlign: 'center'}}>\n                            <img src={`/cards/${card[0]}.png`} class={classes.card} />\n                            <br />\n                            <NumberTweaker fn={change => changeCards(change, card[0])} min={card[1] ? (nrCards <= players*handSize+topPlayed ? cards[card[0]] : 0) : 0} max={99} state={cards[card[0]]} disabled={!props.editable} />\n                        </span>)\n                    }\n                </div>\n                <Typography>There are {Object.values(cards).reduce((a,b)=>a+b)} cards in this deck ({nrCards} non-removable).</Typography>\n            </FormControl>\n            \n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Voting anonymity</FormLabel>\n                <Select\n                    value={votingAnonymity}\n                    onChange={handleVotingAnonymityChange}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={0}>Open</MenuItem>\n                    <MenuItem value={1}>Reveal</MenuItem>\n                    <MenuItem value={2}>Anonymous</MenuItem>\n                </Select>\n                <FormHelperText>{(() => ({\n                    0: 'Players\\' votes are always visible to everyone',\n                    1: 'Players\\' votes are only visible after everyone has voted and they are no longer allowed to change their vote',\n                    2: 'Players\\' votes are never shown',\n                }[votingAnonymity]))()}</FormHelperText>\n            </FormControl>\n            \n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Mode</FormLabel>\n                <Select\n                    value={mode}\n                    onChange={handleModeChange}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={0}>Sea Sight</MenuItem>\n                    <MenuItem value={1}>Sea Blindness</MenuItem>\n                    <MenuItem value={2}>Single Monster</MenuItem>\n                    <MenuItem value={3}>Allied Traitor</MenuItem>\n                    <MenuItem value={4}>Open Seas</MenuItem>\n                </Select>\n                <FormHelperText>{(() => ({\n                    0: 'Two Sea Monsters who know each other. 5+ players needed or mode is set to Single Monster.',\n                    1: 'Two Sea Monsters who don\\'t know who each other are. 5+ players needed or mode is set to Single Monster.',\n                    2: 'There\\'s only one sea monster in this mode. 3+ players needed or mode is set to Open Seas.',\n                    3: 'Play with Allied Traitor rules (see rulebook). 5+ players needed or mode is set to Single Monster.',\n                    4: 'Pirates only! No Sea Monsters in this mode! Any number of players allowed.',\n                }[mode]))()}</FormHelperText>\n            </FormControl>\n\n            <Divider />\n\n            <FormControl className={classes.formControl}>\n                <FormLabel>Naming convention</FormLabel>\n                <Select\n                    value={nameConvention}\n                    onChange={handleNameConventionChange}\n                    disabled={!props.editable}\n                >\n                    <MenuItem value={0}>Normal</MenuItem>\n                    <MenuItem value={1}>Random</MenuItem>\n                </Select>\n                <FormHelperText>{(() => ({\n                    0: 'Players use their chosen name and colour',\n                    1: 'Each player gets a random pirate name and random colour',\n                }[nameConvention]))()}</FormHelperText>\n            </FormControl>\n        </div>\n    );\n}\n\nfunction changeOptions(newOptions) {\n    options = newOptions;\n    window.dispatchEvent(new Event('matchOptionsChanged'));\n}\n\nfunction hostChanged(amNowHost) {\n    if (dialog.state.open && dialog.editable != amNowHost)\n        showMatchOptions({editable: amNowHost, started: true});\n}\n\nvar dialog = {\n    state: {\n        open: false,\n    }\n};\n\nasync function showMatchOptions(props) {\n    let elem;\n\n    dialog = await showDialog({\n        ...(props.started ? {\n            title: 'Match options',\n            description: `Current options${props.ingame ? '' : ' (editable by the host)'}:`,\n        } : {\n            title: 'Create Match',\n            description: 'Match options:',\n            buttonText: 'Create',\n            buttonAction: () => {\n                dialog.handleClose();\n                socket.emit('createMatch', options);\n            }\n        }),\n    }, <MatchOptions {...props} />);\n    dialog.editable = props.editable;\n}\n\n/*function PresetLoader(props) {\n    let [enteredOptions, setEnteredOptions] = React.useState('');\n    let copyHelp = 'Copy the options code for your currently chosen match options.';\n    let [copyTitle, setCopyTitle] = React.useState(copyHelp);\n\n    return (<div>\n        <TextField\n            label=\"Options code\"\n            defaultValue=\"\"\n            value={enteredOptions}\n            onChange={e => setEnteredOptions(e.target.value)}\n            helperText=\"Paste your options code here and click Load to load it\"\n            variant=\"outlined\"\n            disabled={!props.editable}\n        />\n        <Button color={props.editable ? 'primary' : 'default'} disabled={!props.editable} onClick={() => {\n            try {\n                options = {...options, ...JSON.parse(atob(enteredOptions))};\n                showMatchOptions(props);\n            } catch(e) {\n                alert(e);\n            }\n        }}>Load</Button>\n\n        <Divider />\n        <Tooltip title={copyTitle}>\n            <IconButton onClick={() => {\n                copy(btoa(JSON.stringify(options)));\n                setCopyTitle('Copied to clipboard!');\n                setTimeout(() => {\n                    setCopyTitle(copyHelp);\n                }, 3000);\n            }}><LinkIcon /></IconButton>\n        </Tooltip>\n    </div>);\n}\n\nasync function presetLoader(props) {\n    dialog = await showDialog({\n        title: 'Preset loader/saver',\n        buttonText: 'Match options',\n        buttonAction: () => showMatchOptions(props),\n    }, <PresetLoader {...props} />);\n}*/\n\nexport default {\n    showMatchOptions,\n    changeOptions,\n    hostChanged,\n};","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    card: {\n        width: 125,\n        marginRight: 5,\n    },\n}));\n\nfunction Cards() {\n    const classes = useStyles();\n    return (\n        <div>\n            <Typography variant=\"h4\">Cards</Typography>\n            <Typography variant=\"h5\">Movement</Typography>\n            <img src=\"/cards/n1.png\" className={classes.card} />\n            <img src=\"/cards/w2.png\" className={classes.card} />\n            <img src=\"/cards/se3.png\" className={classes.card} />\n            <Typography>These cards allow you to move the ship a specified amount in a specified direction. The direction is the letter and border colour, and the amount is the number displayed.</Typography>\n            <br />\n            <Typography variant=\"h5\">Direction movement cards</Typography>\n            <img src=\"/cards/turnl2.png\" className={classes.card} />\n            <img src=\"/cards/turnr4.png\" className={classes.card} />\n            <img src=\"/cards/forward2.png\" className={classes.card} />\n            <Typography>Turning cards turn the ship a specified amount, and forward cards move the ship in whatever direction the ship is facing. The ship is a lot harder to control using these.</Typography>\n            <br />\n            <Typography variant=\"h5\">Special movement cards</Typography>\n            <Typography variant=\"h6\">Relocate</Typography>\n            <img src=\"/cards/relocate.png\" className={classes.card} />\n            <Typography>The ship moves back to where it started this match.</Typography>\n            <br />\n            <Typography variant=\"h6\">Persist</Typography>\n            <img src=\"/cards/persist.png\" className={classes.card} />\n            <Typography>The action of the last (not including turning or special) movement card to be played is performed again. If no other movement cards have been played this turn, the last movement card from previous turns is played.</Typography>\n            <br />\n            <Typography variant=\"h6\">Chaos</Typography>\n            <img src=\"/cards/chaos.png\" className={classes.card} />\n            <Typography>The ship moves to a random location without turning.</Typography>\n            <br />\n            <Typography variant=\"h6\">Bravery</Typography>\n            <img src=\"/cards/bravery.png\" className={classes.card} />\n            <Typography>The ship keeps going forward in the direction it's facing until it gets to the edge of the board, then it will take damage for trying to move out of the board.</Typography>\n            <br />\n\n            <Typography variant=\"h5\">Compass</Typography>\n            <img src=\"/cards/compass0.png\" className={classes.card} />\n            <img src=\"/cards/compass1.png\" className={classes.card} />\n            <img src=\"/cards/compass3.png\" className={classes.card} />\n            <Typography>When a compass card is played, all tiles that the card specifies (with grey squares) are flipped over to be seen. Tiles with effects (e.g. treasure, rock) don't do anything when revealed - the ship must move over them for that to happen.</Typography>\n            <br />\n\n            <Typography variant=\"h5\">Healing cards</Typography>\n            <Typography variant=\"h6\">Hammer card & Nail card</Typography>\n            <img src=\"/cards/hammer.png\" className={classes.card} />\n            <img src=\"/cards/nail.png\" className={classes.card} />\n            <Typography>If both a hammer card and a nail card are played in the same turn, the ship is healed for 1HP. The ship cannot be healed twice in one turn this way.</Typography>\n            <br />\n            <Typography variant=\"h6\">Hammer & nail</Typography>\n            <img src=\"/cards/hammernail.png\" className={classes.card} />\n            <Typography>The ship is immediately healed for 1HP. This card is permanently discarded after being played, whether it heals the ship or not (i.e. the ship's HP is full and cannot be healed further).</Typography>\n            <br />\n            <Typography variant=\"h6\">Reinforce</Typography>\n            <img src=\"/cards/reinforce.png\" className={classes.card} />\n            <Typography>After this card is played, the ship cannot take any damage until this turn has ended.</Typography>\n            <br />\n            <Typography variant=\"h6\">Lookout</Typography>\n            <img src=\"/cards/lookout.png\" className={classes.card} />\n            <Typography>After this card is played, if the ship would take damage during the same turn, that damage is blocked, then the effect of this card ends.</Typography>\n            <br />\n\n            <Typography variant=\"h5\">Detriment Cards</Typography>\n            <Typography variant=\"h6\">Matchstick</Typography>\n            <img src=\"/cards/matchstick.png\" className={classes.card} />\n            <Typography>The ship takes 1 damage upon this card being played.</Typography>\n            <br />\n            <Typography variant=\"h6\">Block</Typography>\n            <img src=\"/cards/block.png\" className={classes.card} />\n            <Typography>The card played after this card (same turn only) will have no effect.</Typography>\n            <br />\n            <Typography variant=\"h6\">Mute</Typography>\n            <img src=\"/cards/mute.png\" className={classes.card} />\n            <Typography>When this card is played, no one can talk during that turn's discussion or voting phase.</Typography>\n            <br />\n\n            <Typography variant=\"h5\">Voting</Typography>\n            <Typography>Voting cards call for an action to be voted on. If multiple voting cards are played in the same turn, only one is used. The card used is the one lowest on the following list.</Typography>\n            <br />\n            <Typography variant=\"h6\">The Brig</Typography>\n            <img src=\"/cards/brig.png\" className={classes.card} />\n            <Typography>If someone gets enough votes, they will not be able to play cards for the next two turns. They will still be able to talk and vote.</Typography>\n            <br />\n            <Typography variant=\"h6\">Captain</Typography>\n            <img src=\"/cards/captain.png\" className={classes.card} />\n            <Typography>If someone gets enough votes, only they will play cards next turn.</Typography>\n            <br />\n            <Typography variant=\"h6\">Investigate</Typography>\n            <img src=\"/cards/investigate.png\" className={classes.card} />\n            <Typography>If someone gets enough votes, they can choose another player to find out the team (pirate or sea monster) of. This card is permanently discarded if a player is successfully investigated.</Typography>\n            <br />\n            <Typography variant=\"h6\">Mutiny</Typography>\n            <img src=\"/cards/mutiny.png\" className={classes.card} />\n            <Typography>If someone gets enough votes, they're forced off the ship and cannot play cards, talk, vote, or receive votes for the rest of the game. If this player was on the sea monsters' team, the pirates win. This card is permanently discarded if a player is successfully mutinied.</Typography>\n        </div>\n    );\n};\n\nexport default Cards;","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\nfunction Turn() {\n    return (\n        <div>\n            <Typography variant=\"h4\">Turn</Typography>\n            <Typography variant=\"h5\">Selection phase</Typography>\n            <Typography>First, the cards in the draw pile are counted, and if there aren't enough to deal everyone a hand, the discard pile is shuffled in with the draw pile. Then, 3 cards are dealt to each player. They each select one to play. Everyone's selected cards are then collected and shuffled. Talking is not allowed during the selection phase.</Typography>\n            <br />\n            <Typography variant=\"h5\">Playing phase</Typography>\n            <Typography>In the playing phase, the selected cards (which have been shuffled, so no one knows who played which) are revealed one by one, performing the action on the played card each time. Talking is not allowed during the playing phase.</Typography>\n            <br />\n            <Typography variant=\"h5\">Discussion phase</Typography>\n            <Typography>During the discussion phase, players may claim which card they played and which they had in their hand as well as discuss anything else important. Ask anyone any question you want, but the answer may not always be the truth. When ready to move on to the next turn, players can click ready. Everyone needs to click ready for the turn to end. If a voting card was played in the playing phase, this phase is replaced with the voting phase.</Typography>\n            <br />\n            <Typography variant=\"h5\">Voting phase</Typography>\n            <Typography>This phase only happens if a voting card was played in the playing phase. Players may discuss the same as they would during the discussion, but instead of readying up, they must vote for the action on the card. Votes are not revealed until everyone has made their vote. There must be at least [number of alive players - number of sea monsters] of identical votes, or nothing will happen, and the next phase starts as normal. You may vote for yourself.</Typography>\n        </div>\n    );\n};\n\nexport default Turn;","import Cards from './Cards.js';\nimport Premise from './Premise';\nimport Roles from './Roles';\nimport Mode2 from './Mode2';\nimport SpecialCases from './SpecialCases';\nimport Tiles from './Tiles';\nimport Turn from './Turn';\n\nexport default {\n    Cards,\n    Premise,\n    Roles,\n    Mode2,\n    SpecialCases,\n    Tiles,\n    Turn,\n};","import React from 'react';\nimport { Typography, Link } from '@material-ui/core';\n\nfunction Premise() {\n    let videoID = 'ScMzIvxBSi4';\n    return (\n        <div>\n            <img src=\"/icon.png\" style={{maxWidth: '100%', width: 300}} />\n            <Typography>Clueless Captains is a game about going on a pirate adventure to try and find the hidden treasures. You can play with between 2 and 8 people but for the best experience we reccommend anything between 3 and 5.</Typography>\n            <br />\n            <Typography variant=\"h5\">The gist of what's going on</Typography>\n            <Typography>In Clueless Captains, all players simultaneously control a ship on a grid. You're trying to find all the treasure in this area, but some of your crew may be attempting to sabotage this mission by sinking your ship. The ship starts with a set amount of HP which is lost when it takes damage from rocks or other sources. HP can be regained from finding treasure (if this option is enabled). When the ship's HP becomes 0, it sinks.</Typography>\n            <br />\n            <Typography variant=\"h5\">Video</Typography>\n            <Typography>Here's <Link href={`https://youtu.be/${videoID}`} target=\"_blank\" rel=\"noopener\">a YouTube video</Link> showing the game in action. Most of the rules are explained here, but you won't know every nook and cranny of the game. This is enough knowledge, though, as you can come back and read the rules of the game at any point during a match.</Typography>\n            <iframe style={{width: '100%', height: '250px'}} src={`https://www.youtube.com/embed/${videoID}`} frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen></iframe>\n            <Typography variant=\"h6\">Timestamps</Typography>\n            <Typography>\n                The timestamp of each important point in the video above.\n                <ul>\n                    <li>0:00 - Intro</li>\n                    <li>0:01 - Roles</li>\n                    <li>1:00 - Selection phase & Cards</li>\n                    <li>1:01 - Playing phase & Tiles</li>\n                    <li>1:02 - Discussion phase</li>\n                    <li>1:03 - Voting phase</li>\n                </ul>\n            </Typography>\n        </div>\n    );\n};\n\nexport default Premise;","import React from 'react';\nimport { Typography, Divider } from '@material-ui/core';\n\nfunction Roles() {\n    return (\n        <div>\n            <Typography variant=\"h4\">Roles</Typography>\n            <Typography>All crewmates are given one of two roles at the start of the game. This role decides their win condition.</Typography>\n            <Divider />\n\n            <Typography variant=\"h5\">Pirate</Typography>\n            <img src=\"/roles/pirate.png\" width={100} />\n            <Typography>The pirates discovered an area with tons of (seemingly) abandoned booty just waiting to be plundered! They're here, and they won't stop until they take it all (or die trying)! Pirates should almost always be telling the truth to their crewmates.</Typography>\n            <br />\n            <Typography><u>Pirates win if all the treasures are found or if a Sea monster is killed.</u></Typography>\n            <Divider />\n\n            <Typography variant=\"h5\">Sea monster</Typography>\n            <img src=\"/roles/seamonster.png\" width={100} />\n            <Typography>The sea monsters discovered filthy pirates heading into their territory, and pirates could only be there for one reason - treasure. This treasure means everything to them, so they've disguised themselves as pirates and infiltrated the ship. They'll do anything they can to foil the pirates' foolish plan.<br /><br />Sea monsters are heavily outnumbered by Pirates, and may lose (by getting killed) if their identity is revealed, so they'll have to blend in with the pirates by lying about which cards they play.</Typography>\n            <br />\n            <Typography><u>Sea monsters win if the ship sinks.</u></Typography>\n            <br />\n            <Typography>In 1-2 player games, there are no sea monsters. In 3-5 player games, there is 1 sea monster. In 6-8 player games, there are 2 sea monsters.</Typography>\n        </div>\n    );\n};\n\nexport default Roles;","import React from 'react';\nimport { Typography, Divider } from '@material-ui/core';\n\nfunction Mode2() {\n    return (\n        <div>\n            <Typography variant=\"h4\">Allied Traitor Mode</Typography>\n            <Typography>Allied Traitor is an alternate gamemode which is available with 6-8 players. It adds some new roles and changes the way the game is played. If the \"Play Allied Traitor when available\" match option is enabled and there aren't enough players, the Sea Blindness mode will be used instead.</Typography>\n            <Divider />\n\n            <Typography variant=\"h5\">Pirate Roles</Typography>\n            <Typography variant=\"h6\">Pirate</Typography>\n            <img src=\"/roles/pirate.png\" width={100} />\n            <Typography>same as the normal pirate lol</Typography>\n            <br />\n            <Typography variant=\"h6\">Biologist</Typography>\n            <img src=\"/roles/biologist.png\" width={100} />\n            <Typography>There is 1 biologist in a game. This royal biologist wins with the pirates. The biologist knows the role of every player, but the pirates hold a grudge against the royals, so the pirates can't find out who the biologist is, and neither can the Sea Master, because they will out the biologist to the pirates. Therefore, the biologist must use the information they have to help them win the game, while laying low about their identity.</Typography>\n            <Divider />\n\n            <Typography variant=\"h5\">Sea Monster Roles</Typography>\n            <Typography variant=\"h6\">Sea Master</Typography>\n            <img src=\"/roles/seamaster.png\" width={100} />\n            <Typography>There is 1 Sea Master in a game. The Sea Master always knows who the Sea Servant is. After the pirates win (if a sea monster is mutinied or all treasures are found), the sea monsters still have a chance! The Sea Master chooses a player who they think was the biologist. If they're correct, the Sea Monsters win instead of the pirates.</Typography>\n            <br />\n            <Typography variant=\"h6\">Sea Servant</Typography>\n            <img src=\"/roles/seaservant.png\" width={100} />\n            <Typography>There is 1 Sea Servant in a game. They're forgetful, and have no idea who the Sea Master disguised themself as - the Sea Servant does not know who the Sea Master is.</Typography>\n            <br />\n        </div>\n    );\n};\n\nexport default Mode2;","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\nfunction SpecialCases() {\n    return (\n        <div>\n            <Typography variant=\"h4\">Special cases</Typography>\n            <Typography variant=\"h6\">Ship tries to move out of the board</Typography>\n            <Typography>The ship loses a configurable amount of HP (default 1), and stays where it is.</Typography>\n            <br />\n            <Typography variant=\"h6\">Captain + Brig interactions</Typography>\n            <Typography>If a captain is voted for, everyone else who is in the brig will have their jail time extended by one turn to compensate.<br />If a player in the brig is voted as captain, they will be freed from the brig and will be able to play cards until jailed again.</Typography>\n            <br />\n            <Typography variant=\"h6\">Finding all treasure and sinking on the same turn</Typography>\n            <Typography>In this game it is impossible to draw. If you find the last treasure and sink on the same turn, whichever one happened first dictates the outcome, example:</Typography>\n            <br />\n            <Typography><i>\n                Card one moves you on to the last treasure tile,<br />\n                Card two bumps you into a rock, sinking the ship.<br />\n                <br />\n                In this case the pirates would win as they got the treasure before sinking.\n            </i></Typography>\n\n        </div>\n    );\n};\n\nexport default SpecialCases;","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\nfunction Tiles() {\n    return (\n        <div>\n            <Typography variant=\"h4\">Tiles</Typography>\n            <Typography>The game board is a grid made up of tiles. Here is what each tile does.</Typography>\n            <br />\n            <Typography variant=\"h5\">Undiscovered</Typography>\n            <img src=\"/tiles/unknown.png\" width={80} />\n            <Typography>This tile could be anything! Reveal what's hiding underneath by moving over it with the ship or using a compass card next to it. Every tile except the ship's starting tile begins covered by an Undiscovered tile (unless you're playing with the \"Play with all tiles revealed\" option, then no tiles are undiscovered).</Typography>\n            <br />\n            <Typography variant=\"h5\">Water</Typography>\n            <img src=\"/tiles/water.png\" width={80} />\n            <Typography>These tiles do nothing.</Typography>\n            <br />\n            <Typography variant=\"h5\">Treasure</Typography>\n            <img src=\"/tiles/treasure.png\" width={80} />\n            <Typography>Move onto a treasure tile to collect it, turning the tile into a water tile. If the pirates collect all of these, they win. You can change the match options so that these restore your HP upon collections.</Typography>\n            <br />\n            <Typography variant=\"h5\">Rock</Typography>\n            <img src=\"/tiles/rock.png\" width={80} />\n            <Typography>Rock tiles deal 1 damage (configurable amount) to the ship each time you cross over them.</Typography>\n            <br />\n            <Typography variant=\"h5\">Iceberg</Typography>\n            <img src=\"/tiles/iceberg.png\" width={80} />\n            <Typography>Same effect as the rock tile, except it breaks and turns into a water tile upon being touched by the ship (after dealing damage, of course).</Typography>\n            <br />\n            <Typography variant=\"h5\">Waves</Typography>\n            <img src=\"/tiles/waves.png\" width={80} />\n            <Typography>Wave tiles push the ship 1 extra tile in the direction it's facing.</Typography>\n            <br />\n            <Typography variant=\"h5\">Storm</Typography>\n            <img src=\"/tiles/storm.png\" width={80} />\n            <Typography>Storm tiles turn the ship to face a random direction then teleport it to a random tile.</Typography>\n            <br />\n            <Typography variant=\"h5\">Booze</Typography>\n            <img src=\"/tiles/alcohol.png\" width={80} />\n            <Typography>Booze tiles turn the ship to face a random direction then push it forward 1 tile in that direction.</Typography>\n            <br />\n            <Typography variant=\"h5\">Whirlpools</Typography>\n            <img src=\"/tiles/whirlpoolleft.png\" width={80} />\n            <img src=\"/tiles/whirlpoolright.png\" width={80} />\n            <Typography>Upon touching a whirlpool tile, the ship turns 90° the way the whirlpool is facing.</Typography>\n        </div>\n    );\n};\n\nexport default Tiles;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport sections from './sections';\n\nfunction TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`vertical-tabpanel-${index}`}\n            aria-labelledby={`vertical-tab-${index}`}\n            {...other}\n        >\n            {value === index && (\n                <Box p={3}>\n                    {children}\n                </Box>\n            )}\n        </div>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        backgroundColor: theme.palette.background.paper,\n        display: 'flex',\n    },\n    tabs: {\n        minWidth: 90,\n        width: 90,\n        borderRight: `1px solid ${theme.palette.divider}`,\n    },\n    tab: {\n        minWidth: 'unset',\n    },\n    tabPanel: {\n        overflowY: 'scroll',\n    },\n}));\n\nfunction DialogCentre() {\n    const classes = useStyles();\n    const [value, setValue] = React.useState(0);\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <div className={classes.root}>\n            <Tabs\n                orientation=\"vertical\"\n                variant=\"scrollable\"\n                value={value}\n                onChange={handleChange}\n                aria-label=\"Vertical tabs example\"\n                classes={{\n                    root: classes.tabs,\n                }}\n            >\n                <Tab className={classes.tab} label=\"Premise\" />\n                <Tab className={classes.tab} label=\"Roles\" />\n                <Tab className={classes.tab} label=\"Allied Traitor\" />\n                <Tab className={classes.tab} label=\"Tiles\" />\n                <Tab className={classes.tab} label=\"Turn\" />\n                <Tab className={classes.tab} label=\"Cards\" />\n                <Tab className={classes.tab} label=\"Special cases\" />\n            </Tabs>\n            <TabPanel classes={classes.tabPanel} value={value} index={0}>\n                <sections.Premise />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={1}>\n                <sections.Roles />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={2}>\n                <sections.Mode2 />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={3}>\n                <sections.Tiles />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={4}>\n                <sections.Turn />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={5}>\n                <sections.Cards />\n            </TabPanel>\n            <TabPanel classes={classes.tabPanel} value={value} index={6}>\n                <sections.SpecialCases />\n            </TabPanel>\n        </div>\n    );\n};\n\nexport default DialogCentre;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogCentre from './DialogCentre.js';\n\nconst useStyles = makeStyles((theme) => ({\n    centre: {\n        padding: 0\n    }\n}));\n\nfunction RulesDialog() {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n    exp.openRules = handleClickOpen;\n\n    return (\n        <Dialog\n            open={open}\n            onClose={handleClose}\n            disablePortal\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n            <DialogTitle id=\"alert-dialog-title\">Rules</DialogTitle>\n            <DialogContent classes={{root: classes.centre}} dividers>\n                <DialogCentre />\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} color=\"secondary\">\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nconst exp = {};\nReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><RulesDialog /></ThemeProvider>, document.getElementById('rules'));\n\nexport default exp;","import React from 'react';\nimport { IconButton } from '@material-ui/core';\nimport BookIcon from '@material-ui/icons/Book';\nimport RulesDialog from './RulesDialog';\n\nconst ShowRulesIcon = BookIcon;\n\nfunction showRules() {\n    RulesDialog.openRules();\n}\n\nfunction ShowRulesButton() {\n    return <IconButton onClick={showRules}><ShowRulesIcon /></IconButton>;\n}\n\nexport default {\n    ShowRulesIcon,\n    ShowRulesButton,\n    showRules\n};","import React from 'react';\nimport { Typography, Button, Divider, Link } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CodeInput from './CodeInput';\nimport NameInput from './NameInput';\nimport ColorPicker from '../Lobby/ColorPicker';\nimport socket from '../socket';\nimport showMatchOptions from './showMatchOptions';\nimport showDialog from '../Dialog/show';\nimport playerColours from '../Match/playerColours.json';\nimport rules from '../Rules';\nimport { PinDropSharp } from '@material-ui/icons';\n\nconst useStyles = makeStyles({\n    logoImage: {\n        display: 'block',\n        textAlign: 'center',\n        margin: 'auto',\n        maxWidth: 350,\n    },\n\n    controls: {\n        textAlign: 'center',\n        border: '1px solid #0000001f',\n        borderRadius: 10,\n    },\n});\n\nfunction Home() {\n    const classes = useStyles();\n\n    return (\n        <div>\n            <Typography className={classes.title} variant=\"h3\" gutterBottom><img className={classes.logoImage} src=\"/iconanimated.png\" alt=\"Clueless Captains\" /></Typography>\n\n            <Typography variant=\"body1\" gutterBottom>\n                Embark on a pirate adventure together. <Link onClick={rules.showRules}>Read the rules <rules.ShowRulesIcon fontSize=\"inherit\" /></Link>\n            </Typography>\n\n            <div className={classes.controls}>\n                <NameInput />\n                <ColorPicker selected={localStorage.cccolor ? Number(localStorage.cccolor) : (() => {localStorage.cccolor = Math.floor(Math.random() * playerColours.length);return localStorage.cccolor})()} matchInfo={null} />\n\n                <Divider />\n                <br />\n\n                <Button size=\"large\" color=\"primary\" onClick={() => socket.emit('findMatch')}>Find Match</Button>\n                <br />\n                <Button size=\"small\" color=\"secondary\" onClick={() => showMatchOptions.showMatchOptions({editable: true, started: false})}>Create Match</Button>\n\n                <br /><br /><br />\n\n                <CodeInput />\n            </div>\n        </div>\n    );\n}\n\nexport default Home;","import React from 'react';\nimport { Typography, Divider, Button, ButtonGroup, Tooltip, IconButton, Paper, TableContainer, Table, TableHead, TableBody, TableRow, TableCell, Popover } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MeetingRoomIcon from '@material-ui/icons/MeetingRoom';\nimport PublicIcon from '@material-ui/icons/Public';\nimport LockIcon from '@material-ui/icons/Lock';\nimport StarsIcon from '@material-ui/icons/Stars';\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport LinkIcon from '@material-ui/icons/Link';\nimport EditIcon from '@material-ui/icons/Edit';\nimport socket from '../socket';\nimport copy from 'clipboard-copy';\nimport playerColours from '../Match/playerColours.json';\nimport NameInput from '../Home/NameInput';\nimport ColorPicker from './ColorPicker';\nimport showDialog from '../Dialog/show';\nimport showMatchOptions from '../Home/showMatchOptions';\nimport rules from '../Rules';\n\nconst useStyles = makeStyles({\n    root: {\n        textAlign: 'center',\n    },\n\n    privacyIcon: {\n        marginRight: 10\n    },\n\n    table: {\n        width: 400,\n        margin: 'auto',\n    },\n\n    head: {\n        backgroundColor: '#ececec',\n    },\n\n    tableCell: {\n        textAlign: 'center',\n    },\n\n    you: {\n        textDecoration: 'underline',\n    },\n});\n\nfunction Lobby(props) {\n    const classes = useStyles();\n\n    let tableBody = [];\n    let amHost = socket.id.startsWith(props.matchInfo.host);\n    for (let i = 0; i < props.matchInfo.options.players; i++) {\n        let content = '';\n        let you = false;\n        if (i in props.matchInfo.players) {\n            content = props.matchInfo.players[i].name;\n            you = socket.id.startsWith(props.matchInfo.players[i].id);\n        }\n        tableBody.push(\n            <TableRow key={i}>\n                <TableCell className={classes.tableCell}>\n                    {i in props.matchInfo.players && props.matchInfo.host == props.matchInfo.players[i].id ?\n                        <Tooltip title=\"This player is the host. They have the ability to start the game.\">\n                            <StarsIcon fontSize=\"inherit\" />\n                        </Tooltip>\n                    : null}\n                    <span style={i in props.matchInfo.players ? {color:playerColours[props.matchInfo.players[i].num]} : null}>{you ? <span className={classes.you}>{content}</span> : content}</span>\n                    {you ? <Tooltip title=\"Customise\">\n                        <IconButton size=\"small\" onClick={() => showDialog({title: 'Customisation'}, <div style={{textAlign: 'center'}}><NameInput /><ColorPicker selected={props.matchInfo.players[i].num} matchInfo={props.matchInfo} /></div>)}><EditIcon fontSize=\"inherit\" /></IconButton>\n                    </Tooltip> : null}\n                    {i in props.matchInfo.players && amHost && !props.matchInfo.starting && !you ? <span>\n                        <Tooltip title=\"Kick - remove this player from this lobby.\">\n                            <IconButton size=\"small\" onClick={() => socket.emit('kick', props.matchInfo.players[i].id)}><ClearIcon fontSize=\"inherit\" /></IconButton>\n                        </Tooltip>\n                        {!props.matchInfo.players[i].bot ? \n                            <Tooltip title=\"Promote - transfer your host privileges to this player.\" onClick={() => socket.emit('promote', props.matchInfo.players[i].id)}>\n                                <IconButton size=\"small\"><StarBorderIcon fontSize=\"inherit\" /></IconButton>\n                            </Tooltip>\n                        : null}\n                    </span> : null}\n                </TableCell>\n            </TableRow>\n        );\n    }\n\n    React.useEffect(() => {\n        showMatchOptions.hostChanged(amHost);\n    });\n\n    if (props.matchInfo.starting) {\n        (new Audio(`/countdown/${props.matchInfo.startTimer}.mp3`)).play();\n    }\n\n    let copyHelp = 'Copy a link others can use to join this lobby to your clipboard.';\n    let [copyTitle, setCopyTitle] = React.useState(copyHelp);\n\n    return (\n        <div>\n            <IconButton onClick={() => window.location.reload()}>\n                <MeetingRoomIcon />\n            </IconButton>\n            <rules.ShowRulesButton />\n\n            <div className={classes.root}>\n                <Typography variant=\"overline\" display=\"block\" gutterBottom>\n                    Room code\n                </Typography>\n                <Typography variant=\"h3\" gutterBottom>\n                    <span className={classes.privacyIcon}>\n                        {props.matchInfo.options.public ? <Tooltip title=\"This is a public match. Anyone can join this match from the 'Find Match' button on the homepage.\"><PublicIcon /></Tooltip> : <Tooltip title=\"This is a private match. Only people with the room code can join.\"><LockIcon /></Tooltip>}\n                    </span>\n                    {props.matchInfo.code}\n                    <Tooltip title={copyTitle}>\n                        <IconButton onClick={() => {\n                            copy(`${window.location.protocol}//${window.location.host}?${props.matchInfo.code}`);\n                            setCopyTitle('Copied to clipboard!');\n                            setTimeout(() => {\n                                setCopyTitle(copyHelp);\n                            }, 3000);\n                        }}><LinkIcon /></IconButton>\n                    </Tooltip>\n                </Typography>\n\n                <Button color=\"secondary\" onClick={() => showMatchOptions.showMatchOptions({editable: amHost, started: true})}>Match options</Button>\n                <br /><br />\n                {props.matchInfo.starting ?\n                    <Typography variant=\"h4\">Starting in {props.matchInfo.startTimer}...</Typography>\n                :\n                    <Tooltip title={amHost ? 'Begin a timer to start the match. No more players will be able to join.' : 'Only the host can start the match.'}>\n                        <span>\n                            <Button color={amHost ? 'primary' : 'default'} size=\"large\" onClick={() => socket.emit('startMatch')} disabled={!amHost}>Start Match</Button>\n                        </span>\n                    </Tooltip>\n                }\n\n                <TableContainer component={Paper}>\n                    <Table>\n                        <TableHead>\n                            <TableRow className={classes.head}>\n                                <TableCell className={classes.tableCell}>\n                                    Players: {props.matchInfo.players.length}/{props.matchInfo.options.players}\n                                </TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {tableBody}\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n            </div>\n        </div>\n    );\n}\n\nexport default Lobby;","import React from 'react';\nimport { Typography, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport socket from '../socket';\nimport playerColours from '../Match/playerColours.json';\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\nfunction ComeBackMenu(props) {\n    return (\n        <div>\n            <Typography variant=\"h3\">Who will you rejoin the game as?</Typography>\n            {props.choices.map(choice =>\n                <button\n                    style={{background: playerColours[choice.num]}}\n                    onClick={() => socket.emit('comeback', choice.num, props.code)}\n                >{choice.name}</button>\n            )}\n        </div>\n    );\n}\n\nexport default ComeBackMenu;","import React from 'react';\nimport publicDir from '../public.json';\nimport { Tooltip, Link } from '@material-ui/core';\nimport playerColours from './playerColours.json';\n\nconst typeNames = {\n    'cards': 'Card',\n    'roles': 'Role',\n    'tiles': 'Tile',\n    'directions': 'Direction',\n    'terms': 'Term'\n};\nconst types = Object.keys(typeNames);\nconst colourOverrides = [\n    [/^north$/, '#fe0000'],\n    [/^n\\d+$/, '#fe0000'],\n    [/^east$/, '#02fe01'],\n    [/^e\\d+$/, '#02fe01'],\n    [/^south$/, '#bbb500'],\n    [/^s\\d+$/, '#bbb500'],\n    [/^west$/, '#0100fc'],\n    [/^w\\d+$/, '#0100fc'],\n    [/pirate/, '#00ff00'],\n    [/biologist/, '#00ff00'],\n    [/monster/, '#ff0000'],\n    [/master/, '#ff0000'],\n    [/servant/, '#ff0000'],\n    [/compass/, '#5b5b5b'],\n];\n\nexport default function formatText(text, playerNames) {\n    let words = text.split(' ');\n    return (\n        <span>{words.map((word, index) => {\n            let space = index == 0 ? '' : ' ';\n            //if (word.startsWith('#')) {\n                let hashtag = word.replace(/\\W/g,'').toLowerCase();\n\n                let typeFound = false;\n                let colourOverride = '#03a1fc';\n                for (let type of types) {\n                    if (publicDir[type].hasOwnProperty(hashtag)) {\n                        typeFound = type;\n                        for (let i of colourOverrides) {\n                            if (i[0].test(hashtag)) {\n                                colourOverride = i[1];\n                                break;\n                            }\n                        }\n                        break;\n                    }\n                }\n\n                if (typeFound)\n                    return (<Tooltip enterTouchDelay={0} title={<span>\n                        <h4 style={{textAlign: 'center'}}>{typeNames[typeFound]}</h4>\n                        <img src={`/${typeFound}/${hashtag}.${publicDir[typeFound][hashtag]}`} width={80} style={{borderRadius:4}} />\n                    </span>} PopperProps={{style: {zIndex: 100000}}}>\n                        <span>{space}<Link style={{color: colourOverride}}>{word}</Link></span>\n                    </Tooltip>);\n                \n\n                if (/^p\\d+$/.test(hashtag)) {\n                    let num = Number(hashtag.slice(1));\n                    console.log(playerNames);\n                    if (playerNames[num] != null) {\n                        return <span style={{color: playerColours[num]}}>{space}{playerNames[num]}</span>;\n                    }\n                }\n\n                for (let i in playerNames) {\n                    if (playerNames[i] != null && playerNames[i].toLowerCase() == hashtag) {\n                        return <span style={{color: playerColours[i]}}>{space}{playerNames[i]}</span>;\n                    }\n                }\n            //}\n            return `${space}${word}`;\n        })}</span>\n    );\n}","import React from 'react';\nimport { Typography, Divider, Tooltip, Button, FormControl, FilledInput, IconButton, InputAdornment, InputLabel } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport showDialog from '../Dialog/show';\nimport socket from '../socket';\nimport playerColours from './playerColours.json';\nimport formatText from './formatText';\n\nimport ChatIcon from '@material-ui/icons/Chat';\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n\nconst useStyles = makeStyles({\n    root: {\n        background: '#f7f0d5',\n        borderTop: '1px solid #0000001f',\n    },\n\n    cards: {\n        height: '100%',\n        overflowX: 'scroll',\n        textAlign: 'center',\n        whiteSpace: 'nowrap',\n    },\n\n    card: {\n        height: '18vh'\n    },\n\n    playingStatusContainer: {\n        textAlign: 'center',\n    },\n\n    playingStatus: {\n        borderRadius: 5,\n        paddingRight: 5,\n        display: 'inline-block',\n        color: 'white',\n        '& span': {\n            fontSize: 32,\n            paddingLeft: 10,\n            paddingRight: 10,\n            borderRight: '1px solid #0000001f',\n            marginRight: 5,\n        },\n    },\n\n    playingCards: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        '& span': {\n            textAlign: 'center',\n            '& img': {\n                height: '24vh',\n            },\n        },\n    },\n\n    chat: {\n        padding: '10px 15px',\n        overflowY: 'scroll',\n        maxHeight: 'inherit',\n        width: '100%',\n        wordBreak: 'break-word',\n    },\n\n    voteArea: {\n        width: '15em',\n        overflowY: 'scroll',\n        '& div': {\n            borderBottom: '1px solid #0000001f',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            color: 'white',\n            height: '40px',\n            fontSize: '20px',\n            cursor: 'pointer',\n        },\n    },\n\n    textField: {\n        width: '100%',\n    },\n});\n\nfunction Controller(props) {\n    const classes = useStyles();\n    const chatRef = React.createRef();\n    const bottomRef = React.createRef();\n\n    const [display, setDisplay] = React.useState('discuss');\n    const [cards, setCards] = React.useState([]);\n    const [cardsSelected, setCardsSelected] = React.useState(Array(props.matchInfo.options.handSize).fill(false));\n    const [playingStatus, setPlayingStatus] = React.useState([]);\n    const [playedCard, setPlayedCard] = React.useState('blank');\n    const [cardsLeft, setCardsLeft] = React.useState(1);\n    const [vote, setVote] = React.useState(null);\n    const [chooseTitle, setChooseTitle] = React.useState('');\n    const [muted, setMuted] = React.useState(false);\n    const [messages, setMessages] = React.useState([]);\n    const [messageTyped, setMessageTyped] = React.useState('');\n    const sendMessage = () => {\n        socket.emit('msg', messageTyped);\n        setMessageTyped('');\n    };\n    let [votes, setVotes] = React.useState(Array(props.matchInfo.players.length).fill(null));\n    let votesA = Array(props.matchInfo.players.length).fill(null);\n    let playerNames = Array(playerColours.length).fill(null);\n    for (let i of props.matchInfo.players) {\n        playerNames[i.num] = i.name;\n    }\n\n    React.useEffect(() => {\n        //chatRef.current.scrollTop = chatRef.current.scrollHeight - chatRef.current.clientHeight - chatRef.current.clientTop;\n\n        socket.on('wait', newPlayingStatus => {\n            setPlayingStatus(newPlayingStatus)\n            setDisplay('wait');\n        });\n        socket.on('cards', newCards => {\n            setCards(newCards);\n            setCardsSelected(Array(props.matchInfo.options.handSize).fill(false));\n            setDisplay('select');\n        });\n        socket.on('play', (card, newCardsLeft) => {\n            setPlayedCard(card);\n            setCardsLeft(newCardsLeft);\n            setDisplay('play');\n        });\n        socket.on('currentVote', newVote => {\n            setVote(newVote);\n        });\n        socket.on('discuss', newVote => {\n            window.chatStart = true;\n            setDisplay('chat');\n            setVote(newVote);\n        });\n        socket.on('vote', (index, newVote) => {\n            votesA[index] = newVote;\n            setVotes(JSON.parse(JSON.stringify(votesA)));\n        });\n        socket.on('choosePlayer', title => {\n            setChooseTitle(title);\n            setDisplay('choosePlayer');\n        });\n        socket.on('die', dead => {\n            props.matchInfo.players.find(p => p.num == dead).dead = true;\n            setDisplay('chat');\n        });\n        socket.on('mute', newMuted => {\n            setMessageTyped('');\n            setMuted(newMuted);\n            if (props.matchInfo.players.find(p => p.dead && socket.id.startsWith(p.id))) {\n                setMuted(true);\n            } else if (newMuted) {\n                showDialog({\n                    title: 'Muted!',\n                    description: 'Someone played a mute card, so no one can talk this turn.'\n                });\n            }\n        });\n        socket.on('message', message => {\n            console.log(message);\n            setMessages(prevMessages => [...prevMessages, message])\n        });\n\n        return () => {\n            socket.off('wait');\n            socket.off('cards');\n            socket.off('play');\n            socket.off('currentVote');\n            socket.off('discuss');\n            socket.off('vote');\n            socket.off('choosePlayer');\n            socket.off('die');\n            socket.off('message');\n            socket.off('muted');\n        };\n    }, []);\n\n    React.useEffect(() => {\n        if (display == 'chat') {\n            if (window.chatStart) {\n                window.chatStart = false;\n                bottomRef.current.scrollIntoView();\n            } else {\n                let lastMessage = chatRef.current.children[chatRef.current.children.length - 1];\n                if (chatRef.current.scrollHeight - chatRef.current.clientHeight - chatRef.current.clientTop - chatRef.current.scrollTop < lastMessage.clientHeight + 35)\n                    bottomRef.current.scrollIntoView();\n            }\n        }\n    });\n\n    return (\n        <div class={classes.root} style={{height: props.height, maxHeight: 'calc(30vh - 1px)'}}>\n            {(() => {\n                switch (display) {\n                    case 'select':\n                        let cardsSelectedAmount = cardsSelected.filter(card => card).length;\n                        let sendBlocked = cardsSelectedAmount < props.matchInfo.options.minPlayed || cardsSelectedAmount > props.matchInfo.options.maxPlayed;\n                        return (<div>\n                        <div class={classes.cards}>\n                            {cards.map((card, index) => (\n                                <Tooltip title={<img src={`/cards/${card}.png`} width={200} />}>\n                                    <Button onClick={() => setCardsSelected(cardsSelected.map((card, i) => index == i ? !card : card))}>\n                                        <img class={classes.card} src={`/cards/${card}.png`} style={{opacity: cardsSelected[index] ? 1 : 0.5}} />\n                                    </Button>\n                                </Tooltip>\n                            ))}\n                        </div>\n                        <div style={{textAlign: 'center'}}>\n                            <Button\n                                color=\"primary\"\n                                style={{opacity: sendBlocked ? 0.5 : 1}}\n                                disabled={sendBlocked}\n                                onClick={() => socket.emit('play', cardsSelected.map((card, index) => [index, card]).filter(e => e[1]).map(e => e[0]))}\n                            >\n                                Play {cardsSelectedAmount}/{props.matchInfo.options.maxPlayed}\n                            </Button>\n                        </div>\n                    </div>);\n                    \n                    case 'wait': return (<div className={classes.playingStatusContainer}>\n                        {playingStatus.map(p => {\n                            let player = props.matchInfo.players.find(pl => pl.num == p.n);\n                            //if (player.dead) return <s>{player.name}</s>\n                            return <span className={classes.playingStatus} style={{background: playerColours[p.n]}}>\n                                <span style={{textDecoration: `${player.dead ? 'line-through' : ''}${socket.id.startsWith(player.id) ? ' underline' : ''}`}}>{player.name}</span>\n                                {[<MoreHorizIcon />, <CheckIcon />, <CloseIcon />][p.s]}\n                            </span>;\n                        })}\n                    </div>);\n\n                    case 'play': return (<div className={classes.playingCards}>\n                        <span><img src={`/cards/${cardsLeft == 0 ? 'blank' : 'back'}.png`} /><br />To play: {cardsLeft}</span>\n                        <span><img src={`/cards/${playedCard}.png`} /><br />Playing</span>\n                        <span><img src={`/cards/${vote == null ? 'blank' : vote}.png`} /><br />Vote</span>\n                    </div>);\n\n                    case 'chat': return (<div style={{maxHeight: 'inherit', display: 'flex'}}>\n                        <div ref={chatRef} className={classes.chat}>\n                            {messages.map(msg => {\n                                if (msg.hasOwnProperty('l')) {\n                                    let color;\n                                    switch (msg.o) {\n                                        case 's': color = '#ff4f4f';break;\n                                        case 'i': color = '#6bc4ff';break;\n                                        default: color = '#858585';break;\n                                    };\n                                    return <Typography style={{color}}>\n                                        {formatText(msg.l, playerNames)}\n                                    </Typography>;\n                                } else {\n                                    return <Typography>\n                                        <span style={{color: '#777777'}}>[<span style={{color: playerColours[msg.p]}}>{props.matchInfo.players.find(p => p.num == msg.p).name}</span>]</span>\n                                        {' '}\n                                        {formatText(msg.m, playerNames)}\n                                    </Typography>;\n                                }\n                            })}\n                            <FormControl className={classes.textField} variant=\"filled\">\n                                <InputLabel htmlFor=\"messageInput\">\n                                    Message\n                                </InputLabel>\n            \n                                <FilledInput\n                                    id=\"messageInput\"\n                                    type=\"text\"\n                                    value={messageTyped}\n                                    onChange={e => setMessageTyped(e.target.value)}\n                                    autoComplete=\"off\"\n                                    inputProps={{\n                                        maxLength: 99,\n                                        onKeyDown: e => {if (e.key == 'Enter') sendMessage()},\n                                    }}\n                                    disabled={muted}\n                                    endAdornment={\n                                        <InputAdornment position=\"end\">\n                                            <IconButton\n                                                aria-label=\"Join\"\n                                                onClick={sendMessage}\n                                                edge=\"end\"\n                                            >\n                                                <ChatIcon />\n                                            </IconButton>\n                                        </InputAdornment>\n                                    }\n                                />\n                            </FormControl>\n                            <span ref={bottomRef} />\n                        </div>\n                        <div className={classes.voteArea}>\n                            <div style={{color: 'black', fontSize: 13, cursor: 'auto', height: 25}}>\n                                <span style={{textAlign: 'center', width: '100%'}}>Voting for: {vote == null ? 'Turn end' : `${vote[0].toUpperCase()}${vote.slice(1)}`}</span>\n                            </div>\n                            {props.matchInfo.players.map(player => {\n                                return <Tooltip title={`p${player.num}`}>\n                                    <div onClick={() => socket.emit('vote', player.num)}>\n                                        <div style={{background: playerColours[player.num], width: '100%'}}>\n                                        <span style={{textDecoration: `${player.dead ? 'line-through' : ''} ${socket.id.startsWith(player.id) ? 'underline' : ''}`}}>{player.name}</span>\n                                        </div>\n                                        <span style={{borderLeft: '1px solid #0000001f', fontSize: 0, padding: 8, background: ((votes[player.num] === null || votes[player.num] === null == true) ? 'white' : playerColours[votes[player.num]])}}>{votes[player.num] == null || votes[player.num] == false ? (player.dead || votes[player.num] === false ? <CloseIcon style={{color: 'black'}} /> : <MoreHorizIcon style={{color: 'black'}} />) : <CheckIcon style={{color: votes[player.num] === true ? 'black' : 'white'}} />}</span>\n                                    </div>\n                                </Tooltip>;\n                            })}\n                            <span style={{width: '100%', display: 'flex', justifyContent: 'center'}}><Tooltip title=\"Vote for no one\"><Button onClick={() => socket.emit('vote', false)} variant=\"contained\" size=\"small\" disableElevation>Abstain</Button></Tooltip></span>\n                        </div>\n                    </div>);\n\n                    case 'choosePlayer': return <div>\n                        <Typography variant=\"h4\">{chooseTitle}</Typography>\n                        {props.matchInfo.players.map(player => {\n                            if (player.dead) return;\n                            return <button style={{background: playerColours[player.num]}} onClick={() => socket.emit('choosePlayer', player.num)}>{player.name}</button>\n                        })}\n                    </div>;\n                }\n            })()}\n        </div>\n    );\n}\n\nexport default Controller;","import React from 'react';\nimport { Typography, Divider, Tooltip, IconButton } from '@material-ui/core';\nimport showDialog from '../Dialog/show';\nimport playerColours from './playerColours.json';\n\nfunction RoleInfo(props) {\n    return (\n        <div>\n            <div style={{textAlign: 'center'}}>\n                <img src={`/roles/${props.matchInfo.role}.png`} width={100} />\n                <Typography variant=\"h5\" style={{color: playerColours[props.matchInfo.me.num]}}>{props.matchInfo.me.name}</Typography>\n            </div>\n            <Typography variant=\"h6\">{(() => {\n                switch (props.matchInfo.role) {\n                    case 'pirate':\n                        switch (props.matchInfo.options.mode) {\n                            case 0:\n                            case 1:\n                                return `There are 2 sea monsters in this match, everyone else is a pirate. The sea monsters ${props.matchInfo.options.mode == 1 ? 'don\\'t ' : ''}know who their teammate is.`;\n                            case 2:\n                                return 'There\\'s 1 sea monster in this match, everyone else is a pirate.';\n                            case 3:\n                                let pirates = props.matchInfo.players.length - 2;\n                                return `There are ${pirates-1} other pirates on your team, one of whom is a biologist who knows the identity of the sea monsters. There's 1 Sea Master and 1 Sea Servant.`;\n                            case 4:\n                                return 'Everyone is a pirate in this match! There are no sea monsters.';\n                        }\n                    \n                    case 'seamonster':\n                        switch (props.matchInfo.options.mode) {\n                            case 0:\n                                return <span><span style={{color: playerColours[props.matchInfo.teammate.num]}}>{props.matchInfo.teammate.name}</span> is also a sea monster, everyone else is a pirate.</span>;\n                            case 1:\n                                return 'There\\'s 1 other sea monster who is on your team, everyone else is a pirate.';\n                            case 2:\n                                return 'You\\'re the only sea monster. Everyone else is a pirate.';\n                        }\n                    \n                    case 'seaservant':\n                        return 'The Sea Master knows who you are and is with you. Everyone else is a pirate, 1 of whom is a biologist, who knows who you and the Sea Master are.';\n                    \n                    case 'seamaster':\n                        return <span><span style={{color: playerColours[props.matchInfo.teammate.num]}}>{props.matchInfo.teammate.name}</span> is the sea servant, everyone else is a pirate, 1 of whom is a biologist, who knows who you and the Sea Servant are.</span>;\n                    \n                    case 'biologist':\n                        return <div>\n                            {props.matchInfo.roles.map(p => {\n                                if (p.role == 'biologist') return '';\n                                let player = props.matchInfo.players.find(pl => pl.num == p.num);\n\n                                return <span style={{color: playerColours[player.num], display: 'inline-block', marginRight: 15}}>{player.name}: <img src={`/roles/${p.role}.png`} width={50} /><br /></span>;\n                            })}\n                        </div>;\n                }\n            })()}</Typography>\n            <Typography>Check the rulebook to see what you have to do.</Typography>\n        </div>\n    );\n}\n\nfunction showRoleInfo(matchInfo) {\n    showDialog({\n        title: 'Your role info',\n    }, <RoleInfo matchInfo={matchInfo} />);\n}\n\nexport default showRoleInfo;","import React from 'react';\nimport { Typography, Divider, Tooltip, IconButton } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Controller from './Controller';\nimport './index.css';\nimport showMatchOptions from '../Home/showMatchOptions';\nimport showRoleInfo from './showRoleInfo';\nimport showDialog from '../Dialog/show';\nimport rules from '../Rules';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CodeIcon from '@material-ui/icons/Code';\nimport socket from '../socket';\n\nconst controllerHeight = '30vh';\nconst useStyles = makeStyles({\n    gameInfo: {\n        display: 'flex',\n        width: '100%',\n        height: 83,\n        //marginBottom: 20,\n        margin: 'auto',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        position: 'sticky',\n        top: 0,\n        backgroundColor: '#ffea8c',\n        borderBottom: '1px solid #0000001f',\n        zIndex: 100,\n        '& div': {\n            flexGrow: 1,\n        },\n    },\n\n    gameInfoTitle: {\n        textAlign: 'center',\n    },\n\n    gameInfoContent: {\n        display: 'flex',\n        alignItems: 'end',\n        justifyContent: 'center',\n        /*textAlign: 'center',\n        '& *': {\n            display: 'inline',\n        },*/\n    },\n\n    boardContainer: {\n        maxHeight: `calc(100vh - 83px - ${controllerHeight})`,\n        height: '100vh',\n        textAlign: 'center',\n        lineHeight: 0,\n        position: 'relative'\n    },\n\n    board: {\n        height: '100%',\n        width: '100%',\n        objectFit: 'contain',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n    },\n\n    buttons: {\n        position: 'absolute',\n        display: 'flex',\n        flexDirection: 'column',\n        opacity: 1,\n        width: 48,\n        zIndex: 100,\n    },\n});\n\nfunction Match(props) {\n    const classes = useStyles();\n    let selfPlayer = props.players.find(player => props.myId.startsWith(player.id));\n\n    const [dir, setDir] = React.useState(props.matchInfo.dir);\n    const [pos, setPos] = React.useState(props.matchInfo.ship);\n\n    React.useEffect(() => {\n        showRoleInfo(props.matchInfo);\n        socket.on('dir', newDir => setDir(newDir));\n        socket.on('move', newPos => setPos(newPos));\n\n        return () => {\n            socket.off('dir');\n            socket.off('pos');\n        };\n    }, []);\n\n    return (\n        <div>\n            <div className={classes.gameInfo}>\n                <Tooltip title=\"treasures collected / treasures needed (for pirates to win) / total treasures\">\n                    <div>\n                        <div className={classes.gameInfoTitle}>\n                            <Typography variant=\"subtitle1\">\n                                Treasures collected\n                            </Typography>\n                        </div>\n                        <div className={classes.gameInfoContent}>\n                            <Typography variant=\"h3\">\n                                <span id=\"treasuresFound\">0</span>\n                            </Typography>\n                            <Typography variant=\"h5\">\n                                /<span id=\"treasuresNeeded\">?</span>\n                            </Typography>\n                            <Typography>\n                                /<span id=\"treasuresTotal\">?</span>\n                            </Typography>\n                        </div>\n                    </div>\n                </Tooltip>\n\n                <Tooltip title=\"Ship HP / Maximum ship HP. If this reaches 0, the ship sinks, which means the Sea Monsters win and the pirates lose.\">\n                <div>\n                    <div className={classes.gameInfoTitle}>\n                        <Typography variant=\"subtitle1\">\n                            Ship HP\n                        </Typography>\n                    </div>\n                    <div className={classes.gameInfoContent}>\n                        <Typography variant=\"h3\">\n                            <span id=\"shipHP\">?</span>\n                        </Typography>\n                        <Typography variant=\"h5\">\n                            /<span id=\"maxShipHP\">?</span>\n                        </Typography>\n                    </div>\n                </div>\n                </Tooltip>\n\n                <Tooltip title=\"turn number lol\">\n                    <div>\n                        <div className={classes.gameInfoTitle}>\n                            <Typography variant=\"subtitle1\">\n                                Turn\n                            </Typography>\n                        </div>\n                        <div className={classes.gameInfoContent}>\n                            <Typography variant=\"h3\">\n                                <span id=\"turnNumber\">?</span>\n                            </Typography>\n                        </div>\n                    </div>\n                </Tooltip>\n            </div>\n\n            <div className={classes.buttons}>\n                <rules.ShowRulesButton />\n                <IconButton onClick={() => showRoleInfo(props.matchInfo)}><DescriptionIcon /></IconButton>\n                <IconButton onClick={() => showMatchOptions.showMatchOptions({editable: false, started: true, ingame: true, options: props.matchInfo.options})}><SettingsIcon /></IconButton>\n                <IconButton onClick={() => showDialog({\n                    title: \"Room Code\",\n                    description: \"Players can use this code to rejoin the match if they get disconnected:\",\n                }, <Typography variant=\"h2\">{props.matchInfo.code}</Typography>)}><CodeIcon /></IconButton>\n            </div>\n\n            <div className={classes.boardContainer}>\n                <canvas id=\"board\" style={{\n                }} className={classes.board} />\n                <Tooltip title={<span style={{fontSize: 30, lineHeight: 1.2}}>\n                    {pos[1]+1}, {pos[0]+1} | {['N','NE','E', 'SE', 'S', 'SW', 'W', 'NW'][dir]} ({'↑↗→↘↓↙←↖'[dir]})\n                </span>}>\n                    <canvas id=\"topLayer\" style={{\n                    }} className={classes.board} />\n                </Tooltip>\n            </div>\n\n            <Controller height={controllerHeight} matchInfo={props.matchInfo} />\n        </div>\n    );\n}\n\nexport default Match;","import React from 'react';\nimport { Typography, Tooltip, IconButton, Paper, TableContainer, Table, TableHead, TableBody, TableRow, TableCell, Button, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport HomeIcon from '@material-ui/icons/Home';\nimport socket from '../socket/';\nimport playerColours from '../Match/playerColours.json';\nimport rules from '../Rules';\nimport showMatchOptions from '../Home/showMatchOptions';\nimport SettingsIcon from '@material-ui/icons/Settings';\n//import { gameNameChars } from '../Match/gameplay';\n\nconst wins = {\n    'treasure': [true, 'The pirates found all the treasure they needed!'],\n    'kill': [true, 'The pirates found and killed a sea monster!'],\n    'sink': [false, 'The ship sank.'],\n    'snitch': [false, 'The Sea Master found the biologist and snitched on them.'],\n};\n\nconst useStyles = makeStyles({\n    root: {\n        textAlign: 'center',\n    },\n\n    tableCell: {\n        textAlign: 'center',\n    },\n\n    gamesContainer: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'center',\n        '& div': {\n            marginLeft: 25,\n            marginRight: 25,\n        },\n    },\n\n    gameImage: {\n        width: 150,\n    },\n\n    counterImage: {\n        height: 10,\n    },\n\n    you: {\n        color: 'red',\n    },\n\n    otherPlayer: {\n    },\n});\n\nfunction Results(props) {\n    const classes = useStyles();\n    \n    (new Audio('/endMatch.mp3')).play();\n    \n    let win = wins[props.results.cause];\n\n    return (\n        <div>\n            <div className={classes.root}>\n                <IconButton onClick={() => showMatchOptions.showMatchOptions({editable: false, started: true, ingame: true, options: props.matchInfo.options})}>\n                    <SettingsIcon />\n                </IconButton>\n                <IconButton onClick={() => window.location.reload()}>\n                    <HomeIcon />\n                </IconButton>\n                <rules.ShowRulesButton />\n                <Typography variant=\"h3\">\n                    <span style={{color: win[0] ? '#00ff00' : '#ff0000'}}>{win[0] ? 'Pirate' : 'Sea Monster'}s</span> win!\n                </Typography>\n                <Typography variant=\"h5\" gutterBottom>\n                    {win[1]}\n                </Typography>\n\n                <div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'center'}}>\n                    {props.results.roles.map(player => {\n                        let p = props.matchInfo.players.find(pl => pl.num == player.num);\n                        return (\n                            <span style={{margin: 10}}>\n                                <img src={`/roles/${player.role}.png`} width={100} /><br />\n                                <span style={{fontSize: 20, textAlign: 'center', color: playerColours[p.num], textDecoration: `${p.dead ? 'line-through' : ''} ${props.myId.startsWith(p.id) ? 'underline': ''}`}}>{p.name}</span>\n                            </span>\n                        );\n                    })}\n                </div>\n\n                <br />\n                <Button color=\"primary\" size=\"large\" style={{margin: '16px 0'}} onClick={() => socket.emit('rejoin', props.rjCode, props.matchInfo.options)}>Play again</Button>\n\n                <Divider/>\n\n                <Typography variant=\"h3\">\n                    Final board\n                </Typography>\n                <img src={props.finalBoard} style={{height: '80vh', maxWidth: '100%', objectFit: 'contain'}} />\n            </div>\n        </div>\n    );\n}\n\nexport default Results;","const images = {\n    tiles : {},\n    ship: Array(36).fill(null).map((e, i) => {\n        let img = new Image();\n        img.src = `/ship/${i}.png`\n        return img;\n    }),\n};\n\nfor (let i of ['unknown', 'water', 'treasure', 'rock', 'iceberg', 'waves', 'storm', 'alcohol', 'whirlpoolleft', 'whirlpoolright', 'blank']) {\n    let src = `/tiles/${i}.png`;\n    images.tiles[i] = new Image();\n    images.tiles[i].src = src;\n}\n\nimages.ship.src = '/ship.png';\n\nexport default images;","function getRandomInt(n) {\n    return Math.floor(Math.random() * n);\n}\n\nfunction shuffleString(s) {\n    let arr = s.split('');\n    let n = arr.length;\n\n    for(let i=0 ; i<n-1 ; ++i) {\n        let j = getRandomInt(n);\n        \n        let temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n\n    s = arr.join('');\n    return s;\n}\n\nexport default shuffleString;","import React from 'react';\nimport ReactDOM, { render } from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport Match from './';\nimport Results from '../Results';\nimport shuffleString from './shuffleString';\nimport images from './images';\n\nconst boxSize = 200;\nconst gridlineSize = 6;\nconst borderSize = 20;\nconst gameNameChars = '123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';\nconst placeAudio = new Audio('/place.mp3');\nconst otherPlaceAudio = new Audio('/otherPlace.mp3');\nconst gameEndAudio = new Audio('/endGame.mp3');\nconst startTurnAudio = new Audio('/startTurn.mp3');\n\n\nvar matchInfo;\nvar myId;\nvar intervals = [];\nvar turnNumber = 0;\nvar HP;\n\nvar tilesChanging = [];\nvar movement = null;\nvar direction = null;\nvar textNotifs = [];\n\nvar canvas;\nvar ctx;\nvar topCanvas;\nvar topCtx;\nvar animating = false;\n\nfunction renderBottom() {\n    ctx.globalAlpha = 1;\n    ctx.clearRect(0, 0, canvas.width, canvas.height); //clear canvas\n    //horizontal gridlines\n    ctx.fillStyle = 'black';\n    for (let x = 1; x < matchInfo.options.boardSize[0]; x++)\n        ctx.fillRect(borderSize, (gridlineSize+boxSize)*x-gridlineSize+borderSize, ((gridlineSize+boxSize)*matchInfo.options.boardSize[1])-gridlineSize, gridlineSize);\n    //vertical gridlines\n    for (let y = 1; y < matchInfo.options.boardSize[1]; y++)\n        ctx.fillRect((gridlineSize+boxSize)*y-gridlineSize+borderSize, borderSize, gridlineSize, ((gridlineSize+boxSize)*matchInfo.options.boardSize[0])-gridlineSize);\n    \n    //left (blue) border\n    ctx.fillStyle = '#0100fc';\n    ctx.fillRect(0, 0, borderSize, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2);\n    //right (green) border\n    ctx.fillStyle = '#02fe01';\n    ctx.fillRect((gridlineSize+boxSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize, 0, borderSize, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2);\n    //top (red) border\n    ctx.fillStyle = '#fe0000';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(borderSize, borderSize);\n    ctx.lineTo((gridlineSize+boxSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize, borderSize);\n    ctx.lineTo((gridlineSize+boxSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize*2, 0);\n    ctx.fill();\n    //bottom (yellow) border\n    ctx.fillStyle = '#fdff06';\n    ctx.beginPath();\n    ctx.moveTo(0, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2);\n    ctx.lineTo((gridlineSize+boxSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize*2, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2);\n    ctx.lineTo((gridlineSize+boxSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize);\n    ctx.lineTo(borderSize, (gridlineSize+boxSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize);\n    ctx.fill();\n\n    //draw tiles\n    for (let y = 0; y < matchInfo.options.boardSize[0]; y++)\n        for (let x = 0; x < matchInfo.options.boardSize[1]; x++) {\n            let img = images.tiles[matchInfo.board[y][x]]; //get image of tile\n            if (img.complete) //if the image has loaded\n                ctx.drawImage(img, (gridlineSize+boxSize)*x+borderSize, (gridlineSize+boxSize)*y+borderSize, boxSize, boxSize); //draw it\n        }\n}\n\nfunction renderBoard(bypass=false) {\n    if (!(animating || bypass)) return;\n\n    topCtx.clearRect(0, 0, topCanvas.width, topCanvas.height);\n    let now = Date.now();\n\n    //draw tiles which are changing\n    let cttd = [];\n    let doBottom = false; //lol\n    tilesChanging.forEach((tile, index) => {\n        if (now - tile.start >= tile.time) cttd.push(index);\n        if (tile.new) {\n            doBottom = true;\n            tile.new = false;\n        }\n\n        topCtx.globalAlpha = 1 - Math.min(1, (now - tile.start) / tile.time);\n        if (images.tiles[tile.before].complete)\n            topCtx.drawImage(images.tiles[tile.before], (gridlineSize+boxSize)*tile.location[1]+borderSize, (gridlineSize+boxSize)*tile.location[0]+borderSize, boxSize, boxSize);\n    });\n    if (doBottom) renderBottom();\n    cttd.reverse();\n    cttd.forEach(i => tilesChanging.splice(i, 1));\n    \n    //draw ship\n    if (movement != null) { //move ship\n        matchInfo.ship = movement.from.map((a, index) => a+((movement.to[index]-a)*Math.min(1, (now - movement.start) / movement.time)));\n        if (now - movement.start > movement.time) movement = null;\n    }\n    if (direction != null) { //turn ship\n        matchInfo.dir = ((direction.from + (direction.diff * Math.min(1, (now - direction.start) / direction.time))) + 8) % 8;\n        if (now - direction.start > direction.time) direction = null;\n    }\n    topCtx.globalAlpha = 1;\n    let shipImg = images.ship[(Math.round(matchInfo.dir * 4.5)+36)%36];\n    if (shipImg.complete)\n        topCtx.drawImage(shipImg, (gridlineSize+boxSize)*matchInfo.ship[1]+borderSize, (gridlineSize+boxSize)*matchInfo.ship[0]+borderSize, boxSize, boxSize);\n\n    //draw text notifications\n    topCtx.textAlign = 'center';\n    topCtx.textBaseline = 'middle';\n    topCtx.font = `${boxSize*0.8}px sans-serif`;\n    let ntd = [];\n    textNotifs.forEach((notif, index) => {\n        if (now - notif.start >= notif.time) cttd.push(index);\n        let progress = Math.min(1, (now - notif.start) / notif.time);\n\n        topCtx.globalAlpha = Math.sin(progress*Math.PI);;\n        topCtx.fillStyle = notif.color;\n        topCtx.fillText(notif.text, (gridlineSize+boxSize)*notif.at[1]+borderSize+(boxSize/2), (gridlineSize+boxSize)*notif.at[0]+borderSize+(boxSize/2)-(notif.height*progress));\n    });\n    ntd.reverse();\n    ntd.forEach(i => textNotifs.splice(i, 1));\n\n    requestAnimationFrame(renderBoard);\n}\n\nfunction playMatch(startingMatchInfo, sentId) {\n    myId = sentId;\n    matchInfo = startingMatchInfo;\n    turnNumber = 0;\n    ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Match matchInfo={matchInfo} players={startingMatchInfo.players} myId={myId} /></ThemeProvider>, document.getElementById('root'), () => {\n        canvas = document.getElementById('board');\n        ctx = canvas.getContext('2d');\n        topCanvas = document.getElementById('topLayer');\n        topCtx = topCanvas.getContext('2d');\n        canvas.width = (boxSize+gridlineSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize*2;\n        canvas.height = (boxSize+gridlineSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2;\n        topCanvas.width = (boxSize+gridlineSize)*matchInfo.options.boardSize[1]-gridlineSize+borderSize*2;\n        topCanvas.height = (boxSize+gridlineSize)*matchInfo.options.boardSize[0]-gridlineSize+borderSize*2;\n\n        document.getElementById('treasuresNeeded').innerHTML = matchInfo.options.treasuresNeeded;\n        document.getElementById('treasuresTotal').innerHTML = matchInfo.options.tiles.treasure;\n        HP = matchInfo.options.startHP;\n        document.getElementById('shipHP').innerHTML = HP;\n        document.getElementById('maxShipHP').innerHTML = matchInfo.options.maxHP;\n\n        renderBottom();\n        animating = true;\n        renderBoard();\n        \n        (new Audio('/startMatch.mp3')).play();\n    });\n}\n\nfunction move(location) {\n    movement = {\n        from: matchInfo.ship,\n        to: location,\n        start: Date.now(),\n        time: 1000,\n    };\n}\n\nfunction turn(to) {\n    direction = {\n        from: matchInfo.dir,\n        diff: (4 - Math.abs(Math.abs(to - matchInfo.dir) - 4)) * (((to - matchInfo.dir + 8) % 8) > 4 ? -1 : 1), \n        start: Date.now(),\n        time: 400,\n    };\n}\n\nfunction changeTile(location, tile, start=Date.now()) {\n    tilesChanging.push({\n        location: location,\n        before: matchInfo.board[location[0]][location[1]],\n        start: start,\n        time: 200,\n        new: true,\n    });\n    matchInfo.board[location[0]][location[1]] = tile;\n}\n\nfunction newNotif(text, color) {\n    textNotifs.push({\n        text,\n        color,\n        at: [...matchInfo.ship],\n        height: boxSize*0.5,\n        start: Date.now(),\n        time: 2000,\n    });\n}\n\nfunction changeHP(change) {\n    if (change != 0) {\n        newNotif(`${change > 0 ? '+' : '-'}${Math.abs(change)}`, change > 0 ? '#2eff70' : '#ff2e2e');\n        HP += change;\n        if (HP > matchInfo.options.maxHP)\n            HP = matchInfo.options.maxHP;\n        document.getElementById('shipHP').innerHTML = HP;\n    }\n}\n\nfunction treasureFound() {\n    newNotif('+T', '#d69d00');\n    document.getElementById('treasuresFound').innerHTML = Number(document.getElementById('treasuresFound').innerHTML)+1;\n}\n\nfunction turnNum(n) {\n    document.getElementById('turnNumber').innerHTML = n;\n}\n\nfunction die(num) {\n    matchInfo.players.find(p => p.num == num).dead = true;\n}\n\nfunction endMatch(results, rjCode) {\n    animating = false;\n\n    tilesChanging = [];\n    matchInfo.board.forEach((row, y) => row.forEach((tile, x) => {\n        if (tile == 'unknown') {\n            matchInfo.board[y][x] = results.board[y][x];\n            changeTile([y, x], 'blank', Date.now() - 200 * 0.3);\n            matchInfo.board[y][x] = 'blank';\n        }\n        if (results.board[y][x] != results.originalBoard[y][x]) {\n            changeTile([y, x], results.originalBoard[y][x], Date.now() - 200 * 0.2);\n        }\n    }));\n    renderBottom();\n    renderBoard(true);\n    console.log(topCanvas.toDataURL());\n    ctx.drawImage(topCanvas, 0, 0);\n\n    ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Results myId={myId} results={results} matchInfo={matchInfo} rjCode={rjCode} finalBoard={canvas.toDataURL()} /></ThemeProvider>, document.getElementById('root'));\n\n    matchInfo = null;\n}\n\nexport {\n    playMatch,\n    move,\n    turn,\n    changeTile,\n    changeHP,\n    treasureFound,\n    turnNum,\n    die,\n    endMatch,\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport theme from '../theme';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport socketIOClient from 'socket.io-client';\nimport serverLocation from './server.json';\nimport showDialog from '../Dialog/show';\nimport Connecting from './Connect/ing';\nimport ConnectFailed from './Connect/Failed';\nimport Home from '../Home';\nimport Lobby from '../Lobby';\nimport ComeBackMenu from '../Lobby/ComeBackMenu';\nimport * as gameplay from '../Match/gameplay';\nimport defaultMatchOptions from '../Home/defaultMatchOptions.json';\nimport showMatchOptions from '../Home/showMatchOptions';\n\nvar socket = socketIOClient(serverLocation, {\n    transports: ['websocket'],\n});\nvar connectedOnce = false;\n\nReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Connecting /></ThemeProvider>, document.getElementById('root'));\n\nsocket.on('connect', () => {\n    if (!connectedOnce) {\n        connectedOnce = true;\n        ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Home /></ThemeProvider>, document.getElementById('root'));\n    }\n});\n\nfunction displayConnectionFail(error) {\n    setTimeout(() => {\n        if (socket.disconnected) {\n            ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><ConnectFailed error={error.toString()} /></ThemeProvider>, document.getElementById('root'));\n            socket.disconnect();\n        }\n    }, 10000);\n}\n\nsocket.on('connect_error', displayConnectionFail);\nsocket.on('connect_timeout', displayConnectionFail);\nsocket.on('disconnect', displayConnectionFail);\n\nsocket.on('err', (error='Unknown error', title='Error:') => {\n    showDialog({\n        layer: 'err',\n        title: title,\n        description: error,\n    });\n});\n\nsocket.on('noMatches', async () => {\n    let dialog = await showDialog({\n        title: 'No public matches available.',\n        description: 'Maybe create one yourself for people to join?',\n        buttonText: 'Create match with default options',\n        buttonAction: () => {\n            dialog.handleClose();\n            socket.emit('createMatch', {...defaultMatchOptions, public: true});\n        },\n    });\n});\n\nsocket.on('kicked', kicker => {\n    showDialog({\n        required: true,\n        title: 'Kicked!',\n        description: `${kicker} kicked you from the lobby.`,\n        buttonText: 'Back Home',\n        buttonAction: () => window.location.reload(),\n    });\n});\n\nsocket.on('disconnect', () => {\n    setTimeout(() => {\n        showDialog({\n            title: 'Disconnected.',\n            description: 'Lost connection to the Clueless Captains server. You might not be able to do anything. Sorry :/',\n        });\n        //window.location.reload();\n    }, 200);\n});\n\nsocket.on('joinMatch', () => {\n});\n\nsocket.on('matchUpdate', matchInfo => {\n    if (!matchInfo.started)\n        ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><Lobby matchInfo={matchInfo} /></ThemeProvider>, document.getElementById('root'));\n    showMatchOptions.changeOptions(matchInfo.options);\n});\n\nsocket.on('matchStart', matchInfo => gameplay.playMatch(matchInfo, socket.id));\nsocket.on('comebackchoice', (choices, code) => ReactDOM.render(<ThemeProvider theme={theme}><CssBaseline /><ComeBackMenu choices={choices} code={code} /></ThemeProvider>, document.getElementById('root')));\nsocket.on('move', location => gameplay.move(location));\nsocket.on('dir', dir => gameplay.turn(dir));\nsocket.on('reveal', (location, tile) => gameplay.changeTile(location, tile));\nsocket.on('changeTile', (location, tile) => gameplay.changeTile(location, tile));\nsocket.on('damage', damage => gameplay.changeHP(-damage));\nsocket.on('heal', healing => gameplay.changeHP(healing));\nsocket.on('treasure', gameplay.treasureFound);\nsocket.on('turnNum', n => gameplay.turnNum(n));\nsocket.on('die', n => gameplay.die(n));\nsocket.on('endMatch', (results, rjCode) => gameplay.endMatch(results, rjCode));\nsocket.on('rejoin', code => window.location.href = `/?${code}`);\n\nexport default socket;"],"sourceRoot":""}